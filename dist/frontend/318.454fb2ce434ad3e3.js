"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[318],{3807:(F,C,u)=>{u.d(C,{K:()=>b});var d=u(6895),f=u(380),p=u(4006),c=u(2466),e=u(5030),v=u(4298),_=u(6738);let b=(()=>{class x{static#e=this.\u0275fac=function(Z){return new(Z||x)};static#t=this.\u0275mod=_.oAB({type:x});static#n=this.\u0275inj=_.cJS({imports:[d.ez,f.m,p.UX,c.aw,e.Y,v.S]})}return x})()},4318:(F,C,u)=>{u.r(C),u.d(C,{ObjectModule:()=>Kt});var d=u(6895),f=u(7935),p=u(5861),c=u(4006),e=u(6738),v=u(865),_=u(2111),b=u(4120),x=u(8253),w=u(1155),g=u(8611),Z=u(4146),T=u(8473),k=u(155),j=u(713),y=u(9723),J=u(5085),P=u(1188),I=u(4642),V=u(2712),Y=u(9700),L=u(4298),O=u(4112),Q=u(461),A=u(2833),h=u(2466);function R(n,s){if(1&n&&(e.TgZ(0,"h6"),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"label"),e._uU(4),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",e.lcZ(2,2,"object.description"),":"),e.xp6(3),e.Oqu(t.description)}}function D(n,s){1&n&&(e.TgZ(0,"small",24),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij("*",e.lcZ(2,1,"validation.obligatoryCamp"),"*"))}function W(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,D,3,3,"small",23),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.setValueReturnForm(t.value).errors.required)}}function B(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"div",9)(2,"label"),e._uU(3),e.qZA(),e.TgZ(4,"div",10)(5,"p-button",11),e.NdJ("click",function(i){e.CHM(t);const a=e.MAs(7);return e.KtG(a.toggle(i))}),e.qZA(),e.TgZ(6,"p-overlayPanel",12,13),e.YNc(8,R,5,4,"ng-template",14),e.qZA()()(),e.TgZ(9,"div",3)(10,"div",15)(11,"div",15),e._UZ(12,"p-radioButton",16),e.TgZ(13,"label",17),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",18),e._UZ(17,"p-radioButton",19),e.TgZ(18,"label",17),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",20),e._UZ(22,"p-radioButton",21),e.TgZ(23,"label",17),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",20),e._UZ(27,"p-radioButton",22),e.TgZ(28,"label",17),e._uU(29),e.ALo(30,"translate"),e.qZA()()(),e.YNc(31,W,2,1,"div",1),e.qZA()()}if(2&n){const t=s.$implicit,o=e.oxw(3);e.xp6(3),e.hij("",t.label," \xa0"),e.xp6(3),e.Q6J("showCloseIcon",!0),e.xp6(6),e.s9C("formControlName",t.value),e.xp6(2),e.Oqu(e.lcZ(15,11,"register.yes")),e.xp6(3),e.s9C("formControlName",t.value),e.xp6(2),e.Oqu(e.lcZ(20,13,"register.no")),e.xp6(3),e.s9C("formControlName",t.value),e.xp6(2),e.Oqu(e.lcZ(25,15,"register.partially")),e.xp6(3),e.s9C("formControlName",t.value),e.xp6(2),e.Oqu(e.lcZ(30,17,"register.notApply")),e.xp6(2),e.Q6J("ngIf",o.setValueReturnForm(t.value).invalid&&(o.setValueReturnForm(t.value).dirty||o.setValueReturnForm(t.value).touched))}}function K(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",3)(2,"h3",4),e._uU(3),e.qZA(),e.TgZ(4,"ul"),e.YNc(5,B,32,19,"li",2),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(t.label),e.xp6(2),e.Q6J("ngForOf",t.items)}}function z(n,s){1&n&&(e.TgZ(0,"small",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij("*",e.lcZ(2,1,"validation.obligatoryCamp"),"*"))}function G(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,z,3,3,"small",25),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.observation.errors.required)}}const q=function(n){return{"ng-dirty":n}};function H(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,K,6,2,"div",2),e.TgZ(2,"div",3)(3,"h3",4),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"textarea",5),e.ALo(7,"translate"),e.YNc(8,G,2,1,"div",1),e.qZA(),e.TgZ(9,"div",6)(10,"p-button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeView())}),e.ALo(11,"translate"),e.qZA(),e._uU(12," \xa0 "),e._UZ(13,"p-button",8),e.ALo(14,"translate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.groupedQuestionsEx),e.xp6(3),e.Oqu(e.lcZ(5,7,"object.observation")),e.xp6(2),e.MGl("placeholder","",e.lcZ(7,9,"object.observation"),".."),e.Q6J("ngClass",e.VKq(15,q,t.observation.invalid&&(t.observation.dirty||t.observation.touched))),e.xp6(2),e.Q6J("ngIf",t.observation.invalid&&(t.observation.dirty||t.observation.touched)),e.xp6(2),e.s9C("label",e.lcZ(11,11,"object.exit")),e.xp6(3),e.s9C("label",e.lcZ(14,13,"object.sendEval"))}}function $(n,s){if(1&n&&(e.TgZ(0,"li")(1,"div",9)(2,"label",27),e._uU(3),e.qZA()(),e.TgZ(4,"div",3)(5,"div",15)(6,"div",15),e._UZ(7,"p-radioButton",16),e.TgZ(8,"label",17),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",18),e._UZ(12,"p-radioButton",19),e.TgZ(13,"label",17),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",20),e._UZ(17,"p-radioButton",21),e.TgZ(18,"label",17),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",20),e._UZ(22,"p-radioButton",22),e.TgZ(23,"label",17),e._uU(24),e.ALo(25,"translate"),e.qZA()()()()()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(t.questions),e.xp6(4),e.s9C("formControlName",t.questionid),e.xp6(2),e.Oqu(e.lcZ(10,9,"register.yes")),e.xp6(3),e.s9C("formControlName",t.questionid),e.xp6(2),e.Oqu(e.lcZ(15,11,"register.no")),e.xp6(3),e.s9C("formControlName",t.questionid),e.xp6(2),e.Oqu(e.lcZ(20,13,"register.partially")),e.xp6(3),e.s9C("formControlName",t.questionid),e.xp6(2),e.Oqu(e.lcZ(25,15,"register.notApply"))}}function X(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",3)(2,"h6"),e._uU(3),e.qZA(),e.TgZ(4,"ul"),e.YNc(5,$,26,17,"li",2),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(t.evaluationConcept),e.xp6(2),e.Q6J("ngForOf",t.questionEvaluations)}}function ee(n,s){1&n&&(e.TgZ(0,"small",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij("*",e.lcZ(2,1,"validation.obligatoryCamp"),"*"))}function te(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ee,3,3,"small",25),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.observation.errors.required)}}function ne(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,X,6,2,"div",2),e.TgZ(2,"div",3)(3,"h6"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"textarea",5),e.ALo(7,"translate"),e.YNc(8,te,2,1,"div",1),e.qZA(),e.TgZ(9,"div",6)(10,"p-button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.closeView())}),e.ALo(11,"translate"),e.qZA(),e._uU(12," \xa0 "),e._UZ(13,"p-button",8),e.ALo(14,"translate"),e.qZA()()}if(2&n){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.conceptEvaluations),e.xp6(3),e.Oqu(e.lcZ(5,7,"object.observation")),e.xp6(2),e.MGl("placeholder","",e.lcZ(7,9,"object.observation"),".."),e.Q6J("ngClass",e.VKq(15,q,o.observation.invalid&&(o.observation.dirty||o.observation.touched))),e.xp6(2),e.Q6J("ngIf",o.observation.invalid&&(o.observation.dirty||o.observation.touched)),e.xp6(2),e.s9C("label",e.lcZ(11,11,"object.exit")),e.xp6(3),e.s9C("label",e.lcZ(14,13,"profile.btnUpdate"))}}function ie(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ne,15,17,"div",2),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.groupedQuestionsEx)}}let oe=(()=>{class n{constructor(t,o,i,a,r,l){this.searchService=t,this.fb=o,this.learningObject=i,this.loginService=a,this.messageServicee=r,this.languageService=l,this.commentEmit=new e.vpe,this.commentEmit1=new e.vpe,this.displayFormRatingExpert=!1,this.subscribes=[]}ngOnDestroy(){this.subscribes.forEach(t=>{t.unsubscribe()})}ngOnInit(){this.loadData(),this.createForm()}createForm(){0==this.flagQuestionsEx?this.angForm=this.fb.group({observation:[null,c.kI.required]}):1==this.flagQuestionsEx&&(this.angForm=this.fb.group({}))}loadData(){var t=this;return(0,p.Z)(function*(){if(t.loginService.validateRole("expert")&&0==t.flagQuestionsEx){let o=yield t.searchService.geQuestionsExpert().subscribe(i=>{t.groupedQuestionsEx=i.map(a=>({value:a.id,label:a.concept,items:a.questions.map(r=>({value:r.id,label:r.question,description:r.description,schema:r.schema}))})),t.groupedQuestionsEx=t.groupedQuestionsEx,t.groupedQuestionsEx.forEach(a=>{a.items.forEach(r=>{t.angForm.addControl(r.value,new c.p4(null,c.kI.required))})})});t.subscribes.push(o)}else if(t.loginService.validateRole("expert")&&1==t.flagQuestionsEx){let o=yield t.learningObject.getObjectResultsEvaluation(t.object.id).subscribe(function(){var i=(0,p.Z)(function*(a){t.groupedQuestionsEx=a.map(r=>({conceptEvaluations:r.concept_evaluations.map(l=>({evaluationConcept:l.evaluation_concept.concept,average:l.average,questionEvaluations:l.question_evaluations.map(m=>({value:m.id,questions:m.question,qualification:m.qualification,questionid:m.question_id}))})),observation:r.observation,id:r.id})),yield t.createFormControl()});return function(a){return i.apply(this,arguments)}}());t.subscribes.push(o)}})()}createFormControl(){this.groupedQuestionsEx=this.groupedQuestionsEx,this.groupedQuestionsEx.forEach(t=>{t.conceptEvaluations.forEach(o=>{o.questionEvaluations.forEach(i=>{this.angForm.addControl(i.questionid,new c.p4(i.qualification,[c.kI.required]))})}),this.angForm.addControl("observation",new c.p4(t.observation,[c.kI.required]))})}sendAnswersExcpert(){var t=this;return(0,p.Z)(function*(){if(t.angForm.valid){if(0==t.flagQuestionsEx){let o=Object.entries(t.angForm.value),i=[];o.forEach(r=>{let l={id:Number(r[0]),value:r[1]};i.push(l)}),i.pop(),t.answers={learning_object:t.object.id,results:i,observation:t.angForm.get("observation").value};let a=yield t.learningObject.sendQualificationExpert(t.answers).subscribe(function(){var r=(0,p.Z)(function*(l){t.commentEmit1.emit(!0),t.flagConfirm=!0,t.ngOnInit(),t.showSuccess(yield t.languageService.translate.get("object.evaluationMessage").toPromise()),t.angForm.reset()});return function(l){return r.apply(this,arguments)}}(),r=>{t.flagConfirm=!1});t.subscribes.push(a)}else if(1==t.flagQuestionsEx){let o=Object.entries(t.angForm.value),i=[];o.forEach(r=>{let l={id:Number(r[0]),value:r[1]};i.push(l)}),i.pop(),t.answers={id:t.groupedQuestionsEx[0].id,learning_object:t.object.id,results:i,observation:t.angForm.get("observation").value};let a=yield t.learningObject.sendQualificationExpertUpdate(t.answers,t.groupedQuestionsEx[0].id).subscribe(function(){var r=(0,p.Z)(function*(l){t.showSuccess(yield t.languageService.translate.get("object.successSendData").toPromise()),t.commentEmit.emit(!1)});return function(l){return r.apply(this,arguments)}}(),function(){var r=(0,p.Z)(function*(l){t.showError(yield t.languageService.translate.get("object.messageErrorUpdate").toPromise())});return function(l){return r.apply(this,arguments)}}());t.subscribes.push(a)}}else t.markTouchForm(),t.showError(yield t.languageService.translate.get("object.fillForm").toPromise())})()}showError(t){this.messageServicee.add({severity:"error",summary:"Error",detail:t})}showSuccess(t){this.messageServicee.add({severity:"success",summary:"Success",detail:t})}markTouchForm(){Object.values(this.angForm.controls).forEach(t=>{t.markAsTouched()})}get observation(){return this.angForm.get("observation")}get roleExpert(){return this.loginService.validateRole("expert")}closeView(){0==this.flagQuestionsEx&&this.angForm.reset(),this.commentEmit.emit(!1)}setValueReturnForm(t){return this.angForm.get(String(t))}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(O.o),e.Y36(c.QS),e.Y36(v.N),e.Y36(b.r),e.Y36(_.ez),e.Y36(w.T))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-questions-expert"]],inputs:{object:"object",flagQuestionsEx:"flagQuestionsEx"},outputs:{commentEmit:"commentEmit",commentEmit1:"commentEmit1"},decls:3,vars:3,consts:[["autocomplete","off","id","loginForm",3,"formGroup","ngSubmit"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"forms"],[2,"font-size","1.1em"],["rows","5","cols","30","formControlName","observation","pInputTextarea","",2,"width","100%",3,"placeholder","ngClass"],[2,"text-align","right"],["icon","pi pi-times","type","button","styleClass","p-button-text",3,"label","click"],["icon","pi pi-check","type","submit","styleClass","p-button-text",3,"label"],[1,"labelQu"],[1,"buttonIncog"],["icon","pi pi-question-circle",3,"click"],[2,"width","550px",3,"showCloseIcon"],["op",""],["pTemplate",""],[1,"p-field-radiobutton"],["group","button","value","Si",3,"formControlName"],["for","group1"],[1,"p-field-radiobutton",2,"padding","0px 15px"],["group","button","value","No",3,"formControlName"],[1,"p-field-radiobutton",2,"padding","0px 10px"],["group","button","value","Parcialmente",3,"formControlName"],["group","button","value","No aplica",3,"formControlName"],["id","nameLabel","class","p-error",4,"ngIf"],["id","nameLabel",1,"p-error"],["id","observation ","class","p-error",4,"ngIf"],["id","observation ",1,"p-error"],[1,"labelQT"]],template:function(o,i){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.sendAnswersExcpert()}),e.YNc(1,H,15,17,"div",1),e.YNc(2,ie,2,1,"div",1),e.qZA()),2&o&&(e.Q6J("formGroup",i.angForm),e.xp6(1),e.Q6J("ngIf",0==i.flagQuestionsEx),e.xp6(1),e.Q6J("ngIf",1==i.flagQuestionsEx))},dependencies:[d.mk,d.sg,d.O5,c._Y,c.Fj,c.JJ,c.JL,_.jx,g.zx,Z.g,Q.T,A.EU,c.sg,c.u,h.X$],styles:[".labelQu[_ngcontent-%COMP%]{background-color:#3b5b68;padding:9px;border-radius:5px;position:relative;color:#fff;display:flex}.labelQT[_ngcontent-%COMP%]{color:#fff}.forms[_ngcontent-%COMP%]{padding:10px 0}.buttonIncog[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]     .p-overlaypanel{position:absolute;top:20px!important;left:0!important}button[_ngcontent-%COMP%]{min-width:15rem}.product-image[_ngcontent-%COMP%]{width:50px;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b}"]})}return n})();var U=u(1807);function ae(n,s){if(1&n&&(e.TgZ(0,"li")(1,"div",5)(2,"label",6),e._uU(3),e.qZA()(),e.TgZ(4,"div",7)(5,"div",8),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",8),e._UZ(9,"p-rating",9),e.qZA(),e.TgZ(10,"div",8),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",8)(14,"h1")(15,"span",10),e._uU(16),e.qZA()()()()()),2&n){const t=s.$implicit,o=e.oxw(2);e.xp6(3),e.hij("",t.label,"."),e.xp6(3),e.hij("",e.lcZ(7,6,"object.disagreement")," "),e.xp6(3),e.s9C("formControlName",t.value),e.Q6J("cancel",!1),e.xp6(2),e.hij(" ",e.lcZ(12,8,"object.agree"),""),e.xp6(5),e.Oqu(o.getNumber(t.value))}}function se(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",4)(2,"label"),e._uU(3),e.qZA(),e.TgZ(4,"ul"),e.YNc(5,ae,17,10,"li",1),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(t.label),e.xp6(2),e.Q6J("ngForOf",t.items)}}let re=(()=>{class n{constructor(t,o,i){this.searchService=t,this.loginService=o,this.fb=i,this.subscribes=[],this.createForm()}ngOnDestroy(){this.subscribes.forEach(t=>{t.unsubscribe()})}createForm(){this.angForm=this.fb.group({})}ngOnInit(){this.loadData()}loadData(){var t=this;return(0,p.Z)(function*(){if(t.loginService.validateRole("student")){let o=yield t.searchService.geQuestionsStudent().subscribe(i=>{t.groupedQuestions=i.map(a=>({value:a.id,label:a.principle,items:a.guidelines.map(r=>({value:r.id,label:r.guideline}))})),t.groupedQuestions=t.groupedQuestions,t.groupedQuestions.forEach(a=>{a.items.forEach(r=>{t.angForm.addControl(r.value,new c.p4(null,c.kI.required))})})});t.subscribes.push(o)}})()}getNumber(t){return this.angForm.get(String(t)).value}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(O.o),e.Y36(b.r),e.Y36(c.QS))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-questions"]],decls:4,vars:2,consts:[["autocomplete","off","id","loginForm","id","loginForm",3,"formGroup"],[4,"ngFor","ngForOf"],[2,"text-align","right"],["icon","pi pi-check","type","submit","label","Ok","styleClass","p-button-text"],[1,"forms"],[1,"labelQu"],[1,"labelQT"],[1,"p-grid",2,"padding","10px 10px 10px"],[1,"p-col"],[3,"cancel","formControlName"],[1,"blue"]],template:function(o,i){1&o&&(e.TgZ(0,"form",0),e.YNc(1,se,6,2,"div",1),e.TgZ(2,"div",2),e._UZ(3,"p-button",3),e.qZA()()),2&o&&(e.Q6J("formGroup",i.angForm),e.xp6(1),e.Q6J("ngForOf",i.groupedQuestions))},dependencies:[d.sg,c._Y,c.JJ,c.JL,g.zx,U.iG,c.sg,c.u,h.X$],styles:[".labelQu[_ngcontent-%COMP%]{background-color:var(--primary-color);padding:9px;border-radius:5px}.labelQT[_ngcontent-%COMP%]{color:#fff}span.blue[_ngcontent-%COMP%]{background:var(--primary-color);border-radius:.5em;-moz-border-radius:.5em;-webkit-border-radius:.5em;color:#fff;display:inline-block;font-weight:700;line-height:1em;margin-right:15px;text-align:center;width:1em}"]})}return n})();function le(n,s){if(1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"label"),e._uU(4),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",e.lcZ(2,2,"object.description"),":"),e.xp6(3),e.Oqu(t.description)}}function ce(n,s){1&n&&(e.TgZ(0,"small",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij("*",e.lcZ(2,1,"validation.obligatoryCamp"),"*"))}function ue(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ce,3,3,"small",25),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw(5);e.xp6(1),e.Q6J("ngIf",o.setValueReturnForm(t.id).errors.required)}}function pe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ul")(1,"div",11)(2,"label")(3,"h4",9),e._uU(4),e.qZA()(),e.TgZ(5,"div",12)(6,"p-button",13),e.NdJ("click",function(i){e.CHM(t);const a=e.MAs(8);return e.KtG(a.toggle(i))}),e.qZA(),e.TgZ(7,"p-overlayPanel",14,15),e.YNc(9,le,5,4,"ng-template",16),e.qZA()()(),e._UZ(10,"br"),e.TgZ(11,"div",17)(12,"div",17),e._UZ(13,"p-radioButton",18),e.TgZ(14,"label",19),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",20),e._UZ(18,"p-radioButton",21),e.TgZ(19,"label",19),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",22),e._UZ(23,"p-radioButton",23),e.TgZ(24,"label",19),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",22),e._UZ(28,"p-radioButton",24),e.TgZ(29,"label",19),e._uU(30),e.ALo(31,"translate"),e.qZA()()(),e.YNc(32,ue,2,1,"div",1),e.qZA()}if(2&n){const t=s.$implicit,o=e.oxw(5);e.xp6(4),e.hij("",t.question," \xa0"),e.xp6(3),e.Q6J("showCloseIcon",!0),e.xp6(6),e.s9C("formControlName",t.id),e.xp6(2),e.Oqu(e.lcZ(16,11,"register.yes")),e.xp6(3),e.s9C("formControlName",t.id),e.xp6(2),e.Oqu(e.lcZ(21,13,"register.no")),e.xp6(3),e.s9C("formControlName",t.id),e.xp6(2),e.Oqu(e.lcZ(26,15,"register.partially")),e.xp6(3),e.s9C("formControlName",t.id),e.xp6(2),e.Oqu(e.lcZ(31,17,"register.notApply")),e.xp6(2),e.Q6J("ngIf",o.setValueReturnForm(t.id).invalid&&(o.setValueReturnForm(t.id).dirty||o.setValueReturnForm(t.id).touched))}}function de(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",10)(2,"label")(3,"p"),e._uU(4),e.qZA()()(),e._UZ(5,"br"),e.TgZ(6,"div"),e.YNc(7,pe,33,19,"ul",7),e.qZA()()),2&n){const t=s.$implicit;e.xp6(4),e.Oqu(t.label),e.xp6(3),e.Q6J("ngForOf",t.question)}}function me(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",2)(2,"div",8)(3,"label")(4,"h3",9),e._uU(5),e.qZA()()(),e._UZ(6,"br"),e.YNc(7,de,8,2,"div",7),e.qZA()()),2&n){const t=s.$implicit;e.xp6(5),e.Oqu(t.label),e.xp6(2),e.Q6J("ngForOf",t.items)}}function _e(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,me,8,2,"div",7),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.groupedQuestionsSTUDENT)}}function ge(n,s){1&n&&(e.TgZ(0,"small",28),e._uU(1,"*****"),e.qZA())}function be(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ge,2,0,"small",27),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.observation.errors.required)}}const fe=function(n){return{"ng-dirty":n}};function ve(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,_e,2,1,"div",1),e.TgZ(2,"div",2)(3,"h6"),e._uU(4,"Observaciones"),e.qZA(),e._UZ(5,"textarea",3),e.YNc(6,be,2,1,"div",1),e.qZA(),e.TgZ(7,"div",4)(8,"p-button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeView())}),e.ALo(9,"translate"),e.qZA(),e._uU(10,"\xa0 "),e._UZ(11,"p-button",6),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.groupedQuestionsSTUDENT),e.xp6(4),e.Q6J("ngClass",e.VKq(6,fe,t.observation.invalid&&(t.observation.dirty||t.observation.touched))),e.xp6(1),e.Q6J("ngIf",t.observation.invalid&&(t.observation.dirty||t.observation.touched)),e.xp6(2),e.s9C("label",e.lcZ(9,4,"object.exit"))}}function he(n,s){if(1&n&&(e.TgZ(0,"ul")(1,"div",10)(2,"label")(3,"p"),e._uU(4),e.qZA()()(),e._UZ(5,"br"),e.TgZ(6,"div",17)(7,"div",17),e._UZ(8,"p-radioButton",18),e.TgZ(9,"label",19),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",20),e._UZ(13,"p-radioButton",21),e.TgZ(14,"label",19),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",22),e._UZ(18,"p-radioButton",23),e.TgZ(19,"label",19),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",22),e._UZ(23,"p-radioButton",24),e.TgZ(24,"label",19),e._uU(25),e.ALo(26,"translate"),e.qZA()()()()),2&n){const t=s.$implicit;e.xp6(4),e.Oqu(t.question),e.xp6(4),e.s9C("formControlName",t.question_id),e.xp6(2),e.Oqu(e.lcZ(11,9,"register.yes")),e.xp6(3),e.s9C("formControlName",t.question_id),e.xp6(2),e.Oqu(e.lcZ(16,11,"register.no")),e.xp6(3),e.s9C("formControlName",t.question_id),e.xp6(2),e.Oqu(e.lcZ(21,13,"register.partially")),e.xp6(3),e.s9C("formControlName",t.question_id),e.xp6(2),e.Oqu(e.lcZ(26,15,"register.notApply"))}}function xe(n,s){if(1&n&&(e.TgZ(0,"ul")(1,"div",11)(2,"label")(3,"p"),e._uU(4),e.qZA()()(),e._UZ(5,"br"),e.YNc(6,he,27,17,"ul",7),e.qZA()),2&n){const t=s.$implicit;e.xp6(4),e.Oqu(t.guideline_pr),e.xp6(2),e.Q6J("ngForOf",t.guideline_evaluations)}}function Ze(n,s){if(1&n&&(e.TgZ(0,"ul")(1,"div",8)(2,"label")(3,"p"),e._uU(4),e.qZA()()(),e._UZ(5,"br"),e.YNc(6,xe,7,2,"ul",7),e.qZA()),2&n){const t=s.$implicit;e.xp6(4),e.Oqu(t.evaluation_principle),e.xp6(2),e.Q6J("ngForOf",t.principle_gl)}}function Ce(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Ze,7,2,"ul",7),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t.evaluation_students)}}function we(n,s){1&n&&(e.TgZ(0,"small",28),e._uU(1,"*****"),e.qZA())}function Te(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,we,2,0,"small",27),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.observation.errors.required)}}function Oe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,Ce,2,1,"div",7),e.TgZ(2,"div",2)(3,"h6"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"textarea",29),e.ALo(7,"translate"),e.YNc(8,Te,2,1,"div",1),e.qZA(),e.TgZ(9,"div",4)(10,"p-button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeView2())}),e.ALo(11,"translate"),e.qZA(),e._uU(12,"\xa0 "),e._UZ(13,"p-button",30),e.ALo(14,"translate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.groupedQuestionsUpdate),e.xp6(3),e.Oqu(e.lcZ(5,6,"object.observation")),e.xp6(2),e.MGl("placeholder","",e.lcZ(7,8,"object.observation"),".."),e.xp6(2),e.Q6J("ngIf",t.observation.invalid&&(t.observation.dirty||t.observation.touched)),e.xp6(2),e.s9C("label",e.lcZ(11,10,"object.exit")),e.xp6(3),e.s9C("label",e.lcZ(14,12,"profile.btnUpdate"))}}let Ee=(()=>{class n{constructor(t,o,i,a,r,l){this.searchService=t,this.loginService=o,this.fb2=i,this.messageServicee=a,this.learningObject=r,this.languageService=l,this.commentEmit1=new e.vpe,this.commentEmit=new e.vpe,this.questionsupdates=[],this.subscribes=[]}ngOnInit(){this.loadData(),this.createForm2()}createForm2(){this.flagQuestionsEst?this.flagQuestionsEst&&(this.angForm2=this.fb2.group({observation:[null,[c.kI.required]]})):this.angForm2=this.fb2.group({observation:[null,[c.kI.required]]})}ngOnDestroy(){this.subscribes.forEach(t=>{t.unsubscribe()})}loadData(){var t=this;return(0,p.Z)(function*(){if(t.loginService.validateRole("student")&&!t.flagQuestionsEst){let o=yield t.searchService.geQuestionsStudent().subscribe(i=>{t.groupedQuestionsSTUDENT=i.map(a=>({value:a.id,label:a.principle,items:a.guidelines.map(r=>({value:r.id,label:r.guideline,question:r.questions}))})),t.groupedQuestionsSTUDENT=t.groupedQuestionsSTUDENT,t.groupedQuestionsSTUDENT.forEach(a=>{a.items.forEach(r=>{r.question.forEach(l=>{t.angForm2.addControl(l.id,new c.p4(null,c.kI.required))})})})});t.subscribes.push(o)}else if(t.flagQuestionsEst){let o=yield t.searchService.getObjectResultsEvaluationStudent(t.object.id).subscribe(i=>{t.groupedQuestionsUpdate=i.map(a=>({id:a.id,observation:a.observation,evaluation_students:a.evaluation_students.map(r=>({idevaluation:r.id,evaluation_principle:r.evaluation_principle.principle,principle_gl:r.principle_gl.map(l=>({guideline_pr:l.guideline_pr.guideline,guideline_evaluations:l.guideline_evaluations.map(m=>({value:m.id,question_id:m.question_id,question:m.question,qualification:m.qualification}))}))}))})),t.groupedQuestionsUpdate=t.groupedQuestionsUpdate,t.groupedQuestionsUpdate.forEach(a=>{a.evaluation_students.forEach(r=>{r.principle_gl.forEach(l=>{l.guideline_evaluations.forEach(m=>{t.angForm2.addControl(m.question_id,new c.p4(m.qualification,c.kI.required))})})}),t.angForm2.controls.observation.setValue(a.observation)}),t.subscribes.push(o)})}})()}closeView(){0==this.flagQuestionsEst&&this.angForm2.reset(),this.commentEmit1.emit(!1),this.commentEmit.emit(!1)}closeView2(){1==this.flagQuestionsEst&&this.angForm2.reset(),this.commentEmit.emit(!1),this.commentEmit1.emit(!1)}getNumber(t){return this.angForm2.get(String(t)).value}get observation(){return this.angForm2.get("observation")}sendAnswersStudent(){var t=this;return(0,p.Z)(function*(){if(t.flagQuestionsEst){if(t.flagQuestionsEst){let o=Object.entries(t.angForm2.value),i=[];o.forEach(r=>{let l={id:Number(r[0]),value:r[1]};i.push(l)}),i.pop(),t.answerEV={id:t.groupedQuestionsUpdate[0].id,learning_object:t.object.id,results:i,observation:t.angForm2.get("observation").value},yield t.learningObject.sendQualificationStudentUpdate(t.answerEV,t.groupedQuestionsUpdate[0].id).subscribe(function(){var r=(0,p.Z)(function*(l){t.commentEmit.emit(!1),t.commentEmit1.emit(!1),t.flagConfirmSt=!0,t.ngOnInit(),t.showSuccess(yield t.languageService.translate.get("object.evaluationMessage").toPromise())});return function(l){return r.apply(this,arguments)}}(),r=>{t.flagConfirmSt=!1})}}else if(t.angForm2.valid){let o=Object.entries(t.angForm2.value),i=[];o.forEach(r=>{let l={id:Number(r[0]),value:r[1]};i.push(l)}),i.pop(),t.answerEV={learning_object:t.object.id,results:i,observation:t.angForm2.get("observation").value},yield t.learningObject.sendQualificationStudent(t.answerEV).subscribe(function(){var r=(0,p.Z)(function*(l){t.commentEmit1.emit(!0),t.flagConfirmSt=!0,t.angForm2.reset(),t.ngOnInit(),t.closeView2(),t.showSuccess(yield t.languageService.translate.get("object.evaluationMessage").toPromise())});return function(l){return r.apply(this,arguments)}}(),r=>{t.flagConfirmSt=!1})}else t.markTouchForm(),t.showError(yield t.languageService.translate.get("object.fillForm").toPromise())})()}showError(t){this.messageServicee.add({severity:"error",summary:"Error",detail:t})}showSuccess(t){this.messageServicee.add({severity:"success",summary:"Success",detail:t})}markTouchForm(){Object.values(this.angForm2.controls).forEach(t=>{t.markAsTouched()})}setValueReturnForm(t){return this.angForm2.get(String(t))}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(O.o),e.Y36(b.r),e.Y36(c.QS),e.Y36(_.ez),e.Y36(v.N),e.Y36(w.T))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-questions-student"]],inputs:{object:"object",flagQuestionsEst:"flagQuestionsEst"},outputs:{commentEmit1:"commentEmit1",commentEmit:"commentEmit"},decls:4,vars:3,consts:[["autocomplete","off","id","loginForm",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"forms"],["rows","5","cols","30","placeholder","Observaciones..","formControlName","observation","pInputTextarea","",2,"width","100%",3,"ngClass"],[2,"text-align","right"],["icon","pi pi-times","type","button","styleClass","p-button-text",3,"label","click"],["icon","pi pi-check","type","submit","label","Guardar Evaluacion","styleClass","p-button-text"],[4,"ngFor","ngForOf"],[1,"labelQu"],[2,"font-size","1.1em"],[1,"labelQ"],[1,"labelQutwo"],[1,"buttonIncog"],["icon","pi pi-question-circle ",3,"click"],[3,"showCloseIcon"],["op",""],["pTemplate",""],[1,"p-field-radiobutton"],["group","button","value","Si",3,"formControlName"],["for","group1"],[1,"p-field-radiobutton",2,"padding","0px 15px"],["group","button","value","No",3,"formControlName"],[1,"p-field-radiobutton",2,"padding","0px 10px"],["group","button","value","Parcialmente",3,"formControlName"],["group","button","value","No aplica",3,"formControlName"],["id","nameLabel","class","p-error",4,"ngIf"],["id","nameLabel",1,"p-error"],["id","observation ","class","p-error",4,"ngIf"],["id","observation ",1,"p-error"],["rows","5","cols","30","formControlName","observation","pInputTextarea","",2,"width","100%",3,"placeholder"],["icon","pi pi-check","type","submit","styleClass","p-button-text",3,"label"]],template:function(o,i){1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"form",0),e.NdJ("ngSubmit",function(){return i.sendAnswersStudent()}),e.YNc(2,ve,12,8,"div",1),e.YNc(3,Oe,15,14,"div",1),e.qZA()),2&o&&(e.xp6(1),e.Q6J("formGroup",i.angForm2),e.xp6(1),e.Q6J("ngIf",0==i.flagQuestionsEst),e.xp6(1),e.Q6J("ngIf",1==i.flagQuestionsEst))},dependencies:[d.mk,d.sg,d.O5,c._Y,c.Fj,c.JJ,c.JL,_.jx,g.zx,Z.g,Q.T,A.EU,y.FN,c.sg,c.u,h.X$],styles:[".labelQu[_ngcontent-%COMP%]{background-color:#203f4d;padding:9px;border-radius:5px;position:relative;color:#fff;display:flex}.labelQutwo[_ngcontent-%COMP%]{background-color:#3b5b68;padding:9px;border-radius:5px;position:relative;color:#fff;display:flex}.labelQ[_ngcontent-%COMP%]{background-color:#254755;padding:9px;border-radius:5px;position:relative;color:#fff;display:flex}[_nghost-%COMP%]     .p-overlaypanel{top:0!important;left:270px!important;transform:translateY(40px)!important}"]})}return n})();const je=["webView"];function ye(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.displayFormRatingExpert=!0)}),e.ALo(1,"translate"),e.qZA()}2&n&&e.Q6J("label",e.lcZ(1,1,"object.btnEvaluateExpert"))}function Qe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-button",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.displayFormRatingExpertUpdate=!0)}),e.ALo(1,"translate"),e.TgZ(2,"i",31),e._uU(3,"\xa0"),e.qZA()()}2&n&&e.Q6J("label",e.lcZ(1,1,"object.objectQualification"))}function Ae(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.displayFormRatingStudent=!0)}),e.ALo(1,"translate"),e.qZA()}2&n&&e.Q6J("label",e.lcZ(1,1,"registesest.btnEva"))}function qe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.displayFormRatingStudentUpdate=!0)}),e.ALo(1,"translate"),e.qZA()}2&n&&e.Q6J("label",e.lcZ(1,1,"registesest.btnEvaU"))}const Ue=function(n,s){return{"p-button-outlined":n,"p-button-danger":s}};function Se(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onLike())}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("aria-label",e.lcZ(1,3,"object.buttonLiked"))("ngClass",e.WLB(7,Ue,!t.liked,t.liked))("pTooltip",e.lcZ(2,5,"object.like"))}}function Me(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onDownloadFile(i.object.source_file))}),e.ALo(1,"translate"),e.qZA()}2&n&&e.Q6J("aria-label",e.lcZ(1,2,"object.buttonDownloadFile"))("pTooltip","Descargar el fichero fuente de eXeLearning")}function Ne(n,s){if(1&n&&(e._UZ(0,"a",36),e.ALo(1,"translate"),e.ALo(2,"translate")),2&n){const t=e.oxw();e.Q6J("aria-label",e.lcZ(1,3,"object.buttonScreamFull"))("href",t.redirectPreviewAddress(t.object.learning_object_file.url),e.LSH)("pTooltip",e.lcZ(2,5,"object.btnFullScreen"))}}function Fe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeFullscreen())}),e.ALo(1,"translate"),e.qZA()}2&n&&e.Q6J("aria-label",e.lcZ(1,1,"object.buttonExitScreamFull"))}function ke(n,s){if(1&n&&(e.TgZ(0,"div",38)(1,"span",39),e._UZ(2,"i",40),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"number"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.AsE(" ",e.lcZ(4,2,"object.labelValorate")," ",e.xi3(5,4,t.object.rating,"1.1-2"),"")}}function Je(n,s){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,2,"object.date")," "),e.xp6(3),e.Oqu(e.xi3(5,4,t.object.created,"MM/dd/yyyy"))}}function Pe(n,s){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,2,"object.labelKnowledgeArea")," "),e.xp6(3),e.Oqu(t.object.knowledge_area.name)}}function Ie(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij("",t.description,", ")}}function Ve(n,s){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.YNc(3,Ie,2,1,"span",41),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,2,"object.labelLevelEducation")," "),e.xp6(2),e.Q6J("ngForOf",t.object.education_levels)}}function Ye(n,s){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,2,"object.labelKeywords")," "),e.xp6(3),e.Oqu(t.object.general_keyword)}}function Le(n,s){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,2,"object.labelLicense")," "),e.xp6(3),e.Oqu(t.object.license.description)}}function Re(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"app-view-questions-expert",42),e.NdJ("commentEmit",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.coutComment(i))})("commentEmit1",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.coutComment1(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("object",t.object)("flagQuestionsEx",t.flagQuestionsEx)}}function De(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"app-view-questions-expert",43),e.NdJ("commentEmit",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.coutComment(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("object",t.object)("flagQuestionsEx",t.flagQuestionsEx)}}function We(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"app-view-questions-student",44),e.NdJ("commentEmit1",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.coutCommentstudent(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("flagQuestionsEst",t.flagQuestionsEst)("object",t.object)}}function Be(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"app-view-questions-student",45),e.NdJ("commentEmit1",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.coutCommentstudent(i))})("commentEmit",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.coutComments(i))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("flagQuestionsEst",t.flagQuestionsEst)("object",t.object)}}const S=function(){return{width:"50vw"}};function Ke(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-dialog",27),e.NdJ("visibleChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.displayFormRatingStudentUpdate=i)}),e.ALo(1,"translate"),e.YNc(2,Be,2,2,"div",26),e.qZA()}if(2&n){const t=e.oxw();e.Akn(e.DdM(8,S)),e.s9C("header",e.lcZ(1,6,"object.EvaluateWithStudentView")),e.Q6J("visible",t.displayFormRatingStudentUpdate)("baseZIndex",1e4),e.xp6(2),e.Q6J("ngIf",t.flagQuestionsEst)}}const E=function(){return{width:"60vw"}};let ze=(()=>{class n{constructor(t,o,i,a,r){this.loginService=t,this.learningObject=o,this.messageService=i,this.router=a,this.localStorage=r,this.commentEmit1=new e.vpe,this.fullScreen=!1,this.rating=3,this.displayFormRating=!1,this.displayFormRatingExpert=!1,this.displayFormRatingExpertUpdate=!1,this.subscribes=[],this.liked=!1,this.flagQuestionsEx=!1,this.flagQuestionsExNumber=-1,this.flagConfirm=!1,this.flagQuestionsEst=!1,this.flagQuestionsEstNumber=-1,this.displayFormRatingStudent=!1,this.displayFormRatingStudentUpdate=!1,this.countViews=0,this.countDownloads=0,this.youNeedMenu=!1;let l=this.learningObject.interactionSideObjectSelect.subscribe(m=>{m&&(this.object=m,this.getNumberOfDownloads(),this.getNumberOfViews(),this.youNeedMenu=-1===this.object.learning_object_file.url.indexOf("website_index.html"))});this.subscribes.push(l)}ngOnDestroy(){this.subscribes.forEach(t=>{t?.unsubscribe()})}ngOnInit(){this.youNeedMenu=-1===this.object.learning_object_file.url.indexOf("website_index.html"),this.generateUserRefKey(),this.items=[{label:"Facebook",icon:"pi pi-facebook",command:()=>{}},{label:"Twitter",icon:"pi pi-twitter",command:()=>{}}],this.loadData(),this.loadDataExpertEvaluation(),this.loadDataStudentEvaluation(),this.msgs1=[{severity:"success",summary:"Success",detail:"Datos enviados con exito, gracias por realizar la evaluacion"}]}loadDataExpertEvaluation(){var t=this;return(0,p.Z)(function*(){if(t.roleExpert){let o=yield t.learningObject.getObjectResultsEvaluation(t.object.id).subscribe(i=>{i.length>0?0==i.length?(t.flagQuestionsEx=!1,t.flagQuestionsExNumber=0):(t.flagQuestionsEx=!0,t.flagQuestionsExNumber=1):(t.flagQuestionsEx=!1,t.flagQuestionsExNumber=0)});t.subscribes.push(o)}})()}loadData(){var t=this;return(0,p.Z)(function*(){var o;t.loginService.user&&(t.roleUserStudent||t.roleUserExpert||t.roleUserTeacher)&&(o=yield t.learningObject.validateLike(t.object.id).subscribe(i=>{t.liked=i.liked,t.interaction=i},i=>{t.liked=!1})),t.subscribes.push(o),t.getNumberOfDownloads(),t.getNumberOfViews()})()}getNumberOfViews(){var t=this;return(0,p.Z)(function*(){let o=yield t.learningObject.getViewedCount(t.object.id).subscribe(function(){var i=(0,p.Z)(function*(a){a.length>0&&(t.countViews=a[0].view,t.validateOAExistArrayView()&&t.exist_Key()?t.validateIdExistArrayLocalS(t.object.id)||(t.addNewItemArray(t.object.id),t.countUpdateViews()):t.exist_Key()&&(t.createArrayLocalStorage([t.object.id]),t.countUpdateViews()))});return function(a){return i.apply(this,arguments)}}(),i=>{t.createNumberViews()});t.subscribes.push(o)})()}validateIdExistArrayLocalS(t){let o=this.localStorage.getCookieItem("array_view");return-1!==JSON.parse(o).indexOf(t)}validateOAExistArrayView(){const t=this.localStorage.getCookieItem("array_view");return null!=t&&null!=t||(this.localStorage.saveCookieItem("array_view",JSON.stringify([])),!1)}countUpdateViews(){var t=this;return(0,p.Z)(function*(){let o={learning_object:t.object.id,view:t.countViews+1},i=yield t.learningObject.viewedUpdateCount(o,t.object.id).subscribe(a=>{t.countViews=t.countViews+1},a=>{});t.subscribes.push(i)})()}createNumberViews(){var t=this;return(0,p.Z)(function*(){let o={learning_object:t.object.id,view:1},i=yield t.learningObject.viewedCreateCount(o).subscribe(a=>{t.countViews=a.view,t.validateOAExistArrayView()&&t.exist_Key()?t.addNewItemArray(t.object.id):t.exist_Key()&&t.createArrayLocalStorage([t.object.id])});t.subscribes.push(i)})()}exist_Key(){if(null!=this.localStorage.getCookieItem("key_ref"))return!0}createArrayLocalStorage(t){this.localStorage.saveCookieItem("array_view",JSON.stringify(t))}addNewItemArray(t){let o=this.localStorage.getCookieItem("array_view"),i=JSON.parse(o);i.push(t),this.localStorage.saveCookieItem("array_view",JSON.stringify(i))}getNumberOfDownloads(){var t=this;return(0,p.Z)(function*(){let o=yield t.learningObject.getdownloadCount(t.object.id).subscribe(i=>{t.countDownloads=i.number},i=>{});t.subscribes.push(o)})()}openFullscreen(){const t=this.webView.nativeElement;this.fullScreen=!0,t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}closeFullscreen(){document.exitFullscreen&&document.exitFullscreen(),this.fullScreen=!1}showFormRating(){this.displayFormRating=!0}showFormRatingExpert(){this.displayFormRatingExpert=!0}showFormRatingExpertUpdate(){this.displayFormRatingExpertUpdate=!0}onDownloadFile(t){this.loginService.user&&(this.roleUserStudent||this.roleUserTeacher||this.roleUserExpert)?(this.onDonwloaded(),window.open(t)):this.messageService.add({severity:"error",summary:"Error",detail:"Debe iniciar sesi\xf3n para realizar esta acci\xf3n"})}get roleExpert(){return this.loginService.validateRole("expert")}get isloged(){return this.loginService.user}get roleUserStudent(){return this.loginService.validateRole("student")}get roleUserExpert(){return this.loginService.validateRole("expert")}get roleUserTeacher(){return this.loginService.validateRole("teacher")}coutComment(t){this.displayFormRatingExpert=t,1==this.flagQuestionsEx&&(this.displayFormRatingExpertUpdate=t,this.commentEmit1.emit(!0))}coutComment1(t){1==t?(this.flagConfirm=!0,this.displayFormRatingExpert=!1,this.ngOnInit()):this.flagConfirm=!1}onLike(){var t=this;return(0,p.Z)(function*(){if(t.liked=!t.liked,null==t.interaction?.liked)t.createILike();else{t.interaction.liked=t.liked;let o=yield t.learningObject.interactionLike(t.interaction).subscribe(i=>{t.interaction=i},i=>{t.liked=!t.liked});t.subscribes.push(o)}})()}createILike(){var t=this;return(0,p.Z)(function*(){t.interaction={liked:t.liked,learning_object:t.object.id};let o=yield t.learningObject.interactionView(t.interaction).subscribe(i=>{t.interaction=i},i=>{t.messageService.add({severity:"error",summary:"Error",detail:"No se pudo guardar la interacci\xf3n"})});t.subscribes.push(o)})()}onDonwloaded(){var t=this;return(0,p.Z)(function*(){if(0===t.countDownloads){const o={downloaded:1,learning_object:t.object.id};let i=yield t.learningObject.downloadCreateCount(o).subscribe(a=>{t.interaction=a[0],t.countDownloads=1},a=>{});t.subscribes.push(i)}else{const o={downloaded:t.interaction.downloaded,learning_object:t.object.id};let i=yield t.learningObject.downloadUpdateCount(o,t.object.id).subscribe(a=>{a.length>0&&(t.interaction=a[0],t.getNumberOfDownloads())},a=>{});t.subscribes.push(i)}})()}coutCommentstudent(t){this.displayFormRatingStudent=t,this.flagQuestionsEst=!0,this.flagQuestionsEstNumber=1}coutComments(t){this.displayFormRatingStudent=t,1==this.flagQuestionsEst&&(this.displayFormRatingStudentUpdate=t)}showFormRatingStudentUpdate(){this.displayFormRatingStudentUpdate=!0}loadDataStudentEvaluation(){var t=this;return(0,p.Z)(function*(){if(t.roleUserStudent){let o=yield t.learningObject.getObjectResultsEvaluationStudent(t.object.id).subscribe(i=>{i.length>0?0==i.length?(t.flagQuestionsEst=!1,t.flagQuestionsEstNumber=0):(t.flagQuestionsEst=!0,t.flagQuestionsEstNumber=1):(t.flagQuestionsEst=!1,t.flagQuestionsEstNumber=0)});t.subscribes.push(o)}})()}generateUserRefKey(){var t=this;return(0,p.Z)(function*(){const o=t.localStorage.getCookieItem("key_ref");if(null==o||null==o)try{const i=yield t.learningObject.getReferenceUserView().toPromise();t.localStorage.saveCookieItem("key_ref",i.reference)}catch(i){console.log(i)}})()}redirectPreviewAddress(t){let o="";return this.youNeedMenu?(o="/#/preview-learning-object/"+this.object.slug,o):t}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(b.r),e.Y36(v.N),e.Y36(_.ez),e.Y36(f.F0),e.Y36(P.V))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-web-view"]],viewQuery:function(o,i){if(1&o&&e.Gf(je,5),2&o){let a;e.iGM(a=e.CRH())&&(i.webView=a.first)}},inputs:{object:"object"},outputs:{commentEmit1:"commentEmit1"},decls:58,vars:68,consts:[[1,"web-view","animate__animated","animate__fadeIn"],["webView",""],[3,"object","youNeedMenu"],[1,"controls"],[1,"buttons"],[1,"controls-view",2,"margin-right","5px"],["for",""],[1,"pi","pi-download"],[1,"pi","pi-eye",2,"top","1px","position","relative"],[3,"label","click",4,"ngIf"],["title","Editar evaluacion",3,"label","click",4,"ngIf"],["aria-label","Boton para calificar ","pButton","","pRipple","","type","button","class","p-button-rounded p-button-outlined",3,"label","click",4,"ngIf"],["aria-label","Boton para calificar actualizar","pButton","","pRipple","","type","button","class","p-button-rounded p-button-outlined","title","Actualizar calificacion",3,"label","click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-heart","class","p-button-rounded",3,"aria-label","ngClass","pTooltip","click",4,"ngIf"],["aria-label","Bot\xf3n de descarga","pButton","","pRipple","","type","button","icon","pi pi-download",1,"p-button-rounded","p-button-outlined",3,"pTooltip","click"],["pButton","","pRipple","","type","button","icon","pi pi-cloud-download","class","p-button-rounded p-button-outlined",3,"aria-label","pTooltip","click",4,"ngIf"],["style","margin-left: 2px;","target","_blanck","pButton","","pRipple","","type","button","icon","pi pi-window-maximize","class","p-button-rounded p-button-outlined",3,"aria-label","href","pTooltip",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-window-minimize","class","p-button-rounded p-button-outlined",3,"aria-label","click",4,"ngIf"],[1,"description"],[1,"profile"],[1,"profile-image"],["loading","lazy",3,"src","alt"],[1,"profile-name"],["class","rating",4,"ngIf"],[1,"object-description"],[1,"object-metadata"],[4,"ngIf"],[3,"header","visible","baseZIndex","visibleChange"],[3,"header","visible","style","baseZIndex","visibleChange",4,"ngIf"],[3,"label","click"],["title","Editar evaluacion",3,"label","click"],[1,"pi","pi-pencil"],["aria-label","Boton para calificar ","pButton","","pRipple","","type","button",1,"p-button-rounded","p-button-outlined",3,"label","click"],["aria-label","Boton para calificar actualizar","pButton","","pRipple","","type","button","title","Actualizar calificacion",1,"p-button-rounded","p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button","icon","pi pi-heart",1,"p-button-rounded",3,"aria-label","ngClass","pTooltip","click"],["pButton","","pRipple","","type","button","icon","pi pi-cloud-download",1,"p-button-rounded","p-button-outlined",3,"aria-label","pTooltip","click"],["target","_blanck","pButton","","pRipple","","type","button","icon","pi pi-window-maximize",1,"p-button-rounded","p-button-outlined",2,"margin-left","2px",3,"aria-label","href","pTooltip"],["pButton","","pRipple","","type","button","icon","pi pi-window-minimize",1,"p-button-rounded","p-button-outlined",3,"aria-label","click"],[1,"rating"],[1,"profile-downloads"],[1,"pi","pi-star"],[4,"ngFor","ngForOf"],[3,"object","flagQuestionsEx","commentEmit","commentEmit1"],[3,"object","flagQuestionsEx","commentEmit"],[3,"flagQuestionsEst","object","commentEmit1"],[3,"flagQuestionsEst","object","commentEmit1","commentEmit"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0,1),e._UZ(2,"app-iframe-integrated-menu",2),e.TgZ(3,"div",3)(4,"h2"),e._uU(5),e.qZA(),e.TgZ(6,"div",4)(7,"div",5)(8,"label",6),e._UZ(9,"i",7),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"label",6),e._UZ(14,"i",8),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.YNc(17,ye,2,3,"p-button",9),e.YNc(18,Qe,4,3,"p-button",10),e.YNc(19,Ae,2,3,"button",11),e.YNc(20,qe,2,3,"button",12),e.YNc(21,Se,3,10,"button",13),e.TgZ(22,"button",14),e.NdJ("click",function(){return i.onDownloadFile(i.object.learning_object_file.file)}),e.ALo(23,"translate"),e.qZA(),e.YNc(24,Me,2,4,"button",15),e.YNc(25,Ne,3,7,"a",16),e.YNc(26,Fe,2,3,"button",17),e.qZA()()(),e.TgZ(27,"div",18)(28,"div",19)(29,"div",20),e._UZ(30,"img",21),e.qZA(),e.TgZ(31,"div")(32,"p",22),e._uU(33),e.qZA(),e.YNc(34,ke,6,7,"div",23),e.qZA()(),e.TgZ(35,"div",24)(36,"p"),e._uU(37),e.qZA(),e._UZ(38,"p-divider"),e.TgZ(39,"div",25),e.YNc(40,Je,6,7,"p",26),e.YNc(41,Pe,5,4,"p",26),e.YNc(42,Ve,4,4,"p",26),e.YNc(43,Ye,5,4,"p",26),e.YNc(44,Le,5,4,"p",26),e.qZA()()(),e.TgZ(45,"p-dialog",27),e.NdJ("visibleChange",function(r){return i.displayFormRating=r}),e.ALo(46,"translate"),e._UZ(47,"app-view-questions"),e.qZA(),e.TgZ(48,"p-dialog",27),e.NdJ("visibleChange",function(r){return i.displayFormRatingExpert=r}),e.ALo(49,"translate"),e.YNc(50,Re,2,2,"div",26),e.qZA(),e.TgZ(51,"p-dialog",27),e.NdJ("visibleChange",function(r){return i.displayFormRatingExpertUpdate=r}),e.ALo(52,"translate"),e.YNc(53,De,2,2,"div",26),e.qZA(),e.TgZ(54,"p-dialog",27),e.NdJ("visibleChange",function(r){return i.displayFormRatingStudent=r}),e.ALo(55,"translate"),e.YNc(56,We,2,2,"div",26),e.qZA(),e.YNc(57,Ke,3,9,"p-dialog",28)),2&o&&(e.xp6(2),e.Q6J("object",i.object)("youNeedMenu",i.youNeedMenu),e.xp6(3),e.Oqu(i.object.general_title),e.xp6(5),e.AsE(" ",i.countDownloads," ",e.lcZ(11,50,"object.countDownloads"),""),e.xp6(5),e.AsE(" ",i.countViews," ",e.lcZ(16,52,"object.countViews"),""),e.xp6(2),e.Q6J("ngIf",i.roleExpert&&!i.flagQuestionsEx&&0==i.flagQuestionsExNumber),e.xp6(1),e.Q6J("ngIf",i.roleExpert&&i.flagQuestionsEx&&1==i.flagQuestionsExNumber),e.xp6(1),e.Q6J("ngIf",i.roleUserStudent&&!i.flagQuestionsEst&&0==i.flagQuestionsEstNumber),e.xp6(1),e.Q6J("ngIf",i.roleUserStudent&&i.flagQuestionsEst&&1==i.flagQuestionsEstNumber),e.xp6(1),e.Q6J("ngIf",i.roleUserStudent||i.roleUserExpert||i.roleUserTeacher),e.xp6(1),e.Q6J("pTooltip",e.lcZ(23,54,"object.btnDownload")),e.xp6(2),e.Q6J("ngIf",i.object.source_file),e.xp6(1),e.Q6J("ngIf",!i.fullScreen),e.xp6(1),e.Q6J("ngIf",i.fullScreen),e.xp6(4),e.Q6J("src",i.object.user_created.image_url,e.LSH)("alt",i.object.user_created.first_name+" "+i.object.user_created.last_name),e.xp6(3),e.Oqu(i.object.user_created.first_name+" "+i.object.user_created.last_name),e.xp6(1),e.Q6J("ngIf",i.object.rating),e.xp6(3),e.Oqu(i.object.general_description),e.xp6(3),e.Q6J("ngIf",i.object.created),e.xp6(1),e.Q6J("ngIf",i.object.knowledge_area.name),e.xp6(1),e.Q6J("ngIf",(null==i.object.education_levels?null:i.object.education_levels.length)>0),e.xp6(1),e.Q6J("ngIf",i.object.general_keyword),e.xp6(1),e.Q6J("ngIf",i.object.license.description),e.xp6(1),e.Akn(e.DdM(64,E)),e.s9C("header",e.lcZ(46,56,"object.btnEvaluate")),e.Q6J("visible",i.displayFormRating)("baseZIndex",1e4),e.xp6(3),e.Akn(e.DdM(65,E)),e.s9C("header",e.lcZ(49,58,"object.btnEvaluateWithExpert")),e.Q6J("visible",i.displayFormRatingExpert)("baseZIndex",1e4),e.xp6(2),e.Q6J("ngIf",!i.flagQuestionsEx),e.xp6(1),e.Akn(e.DdM(66,E)),e.s9C("header",e.lcZ(52,60,"object.btnEvaluateWithExpertView")),e.Q6J("visible",i.displayFormRatingExpertUpdate)("baseZIndex",1e4),e.xp6(2),e.Q6J("ngIf",i.flagQuestionsEx),e.xp6(1),e.Akn(e.DdM(67,S)),e.s9C("header",e.lcZ(55,62,"object.EvaluateWithStudent")),e.Q6J("visible",i.displayFormRatingStudent)("baseZIndex",1e4),e.xp6(2),e.Q6J("ngIf",!i.flagQuestionsEst),e.xp6(1),e.Q6J("ngIf",i.displayFormRatingStudentUpdate))},dependencies:[d.mk,d.sg,d.O5,g.Hq,g.zx,I.V,V.i,T.H,Y.u,L.S,oe,re,Ee,d.JJ,d.uU,h.X$],styles:[".web-view[_ngcontent-%COMP%]:-webkit-full-screen{background-color:#fff}.web-view[_ngcontent-%COMP%]:fullscreen{background-color:#fff}.web-view[_ngcontent-%COMP%]:-webkit-full-screen   iframe[_ngcontent-%COMP%]{width:100vw;height:93vh}.web-view[_ngcontent-%COMP%]:fullscreen   iframe[_ngcontent-%COMP%]{width:100vw;height:93vh}.web-view[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 5px}.web-view[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.web-view[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.web-view[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}[_nghost-%COMP%]  iframe{width:100%;height:75vh!important}.description[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{display:flex;align-items:center;margin:10px 0}.description[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{text-transform:capitalize}.description[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;height:60px;width:60px;margin-right:5px}.description[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0}.description[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .profile-downloads[_ngcontent-%COMP%]{opacity:.5}.description[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{display:flex;flex-direction:column}.description[_ngcontent-%COMP%]   .object-description[_ngcontent-%COMP%]{margin-bottom:10px}.description[_ngcontent-%COMP%]   .object-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}.object-metadata[_ngcontent-%COMP%]{margin-bottom:10px}.object-metadata[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;margin:0;opacity:.8}.object-metadata[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}@media (max-width: 750px){[_nghost-%COMP%]     .p-dialog{width:90vw!important}}"]})}return n})();var Ge=u(1911),He=u(1272),M=u(5439);let $e=(()=>{class n{constructor(t){this.languageService=t,M.locale("es-us")}transform(t){return M(t).startOf("second").fromNow()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(w.T,16))};static#t=this.\u0275pipe=e.Yjl({name:"moment",type:n,pure:!0})}return n})();function Xe(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4)(2,"textarea",5),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.commentDescription=i)}),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",6)(5,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onComment())}),e.ALo(6,"translate"),e.qZA(),e._uU(7," \xa0 "),e.TgZ(8,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.commentView=!1)}),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"p-messages",9),e.NdJ("valueChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.msg=i)}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.commentDescription)("placeholder",e.lcZ(3,8,"object.placeholderComment")),e.xp6(3),e.Q6J("disabled",!t.commentDescription||t.loadingComment)("label",e.lcZ(6,10,"object.btnSubmit"))("icon",t.loadingComment?"pi pi-spin pi-spinner":"pi pi-check"),e.xp6(3),e.Q6J("label",e.lcZ(9,12,"object.btnCancel")),e.xp6(2),e.Q6J("value",t.msg)("enableService",!1)}}function et(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"p-button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.commentView=!0)}),e.ALo(1,"translate"),e.qZA()}2&n&&e.Q6J("label",e.lcZ(1,1,"object.btnAddComment"))}function tt(n,s){if(1&n&&e.YNc(0,et,2,3,"p-button",10),2&n){const t=e.oxw();e.Q6J("ngIf",t.currentUser)}}function nt(n,s){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"p-avatar",14),e.TgZ(2,"div",15)(3,"h6"),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"moment"),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("image",t.user.image_url),e.xp6(3),e.Oqu(t.user.first_name+" "+t.user.last_name),e.xp6(2),e.Oqu(e.lcZ(7,4,t.created)),e.xp6(3),e.Oqu(t.description)}}function it(n,s){if(1&n&&(e.ynx(0),e.YNc(1,nt,10,6,"div",12),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.comments)}}function ot(n,s){1&n&&(e.TgZ(0,"p",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"object.noComments")))}let at=(()=>{class n{constructor(t,o){this.loginService=t,this.learningObjectService=o,this.commentEmit=new e.vpe,this.commentView=!1,this.loadingComment=!1,this.msg=[],this.currentUser=t.user}ngOnInit(){this.comments.reverse()}onComment(){this.loadingComment=!0,this.learningObjectService.addComent({description:this.commentDescription,learning_object:this.objectId}).subscribe(o=>{this.comments.unshift({description:this.commentDescription,created:o.created,user:{first_name:this.currentUser.first_name,last_name:this.currentUser.last_name,image_url:this.currentUser.image}}),this.loadingComment=!1,this.commentView=!1,this.commentEmit.emit(1),this.commentDescription=null},o=>{this.msg=[{severity:"error",summary:"Internal Error",detail:o.message}],this.loadingComment=!1})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(b.r),e.Y36(v.N))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-comments"]],inputs:{objectId:"objectId",comments:"comments"},outputs:{commentEmit:"commentEmit"},decls:7,vars:4,consts:[[4,"ngIf","ngIfElse"],["commentViewTemplate",""],[1,"comments"],["commentsTemplate",""],[1,"comment-form","animate__animated","animate__fadeIn"],["rows","10","pInputTextarea","","id","description","aria-describedby","description-help",3,"ngModel","placeholder","ngModelChange"],[1,"p-buttonset"],["pButton","","pRipple","",3,"disabled","label","icon","click"],["pButton","","pRipple","","icon","pi pi-times",3,"label","click"],[3,"value","enableService","valueChange"],[3,"label","click",4,"ngIf"],[3,"label","click"],["class","comment-item animate__animated animate__fadeIn",4,"ngFor","ngForOf"],[1,"comment-item","animate__animated","animate__fadeIn"],["styleClass","p-mr-2","size","xlarge","shape","circle",3,"image"],[1,"cooment-detail"],[1,"comments-empty"]],template:function(o,i){if(1&o&&(e.YNc(0,Xe,11,14,"ng-container",0),e.YNc(1,tt,1,1,"ng-template",null,1,e.W1O),e.TgZ(3,"div",2),e.YNc(4,it,2,1,"ng-container",0),e.YNc(5,ot,3,3,"ng-template",null,3,e.W1O),e.qZA()),2&o){const a=e.MAs(2),r=e.MAs(6);e.Q6J("ngIf",i.commentView&&i.currentUser)("ngIfElse",a),e.xp6(4),e.Q6J("ngIf",(null==i.comments?null:i.comments.length)>0)("ngIfElse",r)}},dependencies:[d.sg,d.O5,c.Fj,c.JJ,c.On,Ge.q,g.Hq,g.zx,He.V,Z.g,T.H,$e,h.X$],styles:[".comment-form[_ngcontent-%COMP%]{text-align:right}.comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;resize:vertical}.comments[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]{display:flex;margin-top:15px}.comments[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .cooment-detail[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0}.comments[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .cooment-detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:.4;font-size:.8rem}.comments[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .cooment-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:5px}[_nghost-%COMP%]     .p-avatar img{border-radius:50%}.comments-empty[_ngcontent-%COMP%]{text-align:center;margin:20px 0;opacity:.5}"]})}return n})();var st=u(4028),rt=u(2778),lt=u(1061);function ct(n,s){1&n&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"object.labelRecommended")))}function ut(n,s){1&n&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"object.labelNoRated")))}function pt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ct,3,3,"h2",5),e.YNc(2,ut,3,3,"h2",5),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.studentRole),e.xp6(1),e.Q6J("ngIf",t.expertRole)}}function dt(n,s){1&n&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"object.labelPopulars")))}function mt(n,s){if(1&n&&e._UZ(0,"img",18),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.avatar,e.LSH)("alt",t.general_title)}}function _t(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onClick(a.slug))}),e.TgZ(1,"p-card",11),e.NdJ("keyup.enter",function(){const a=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onClick(a.slug))}),e.YNc(2,mt,1,2,"ng-template",12),e.TgZ(3,"div",13)(4,"p",14),e._uU(5),e.qZA(),e.TgZ(6,"span",15),e._uU(7),e.qZA(),e.TgZ(8,"div",16),e._UZ(9,"p-rating",17),e.qZA()()()()}if(2&n){const t=s.$implicit;e.xp6(1),e.Q6J("header",t.general_title),e.xp6(4),e.AsE("",t.user_created.first_name," ",t.user_created.last_name,""),e.xp6(2),e.Oqu(t.knowledge_area.name),e.xp6(2),e.Q6J("ngModel",t.rating)("cancel",!1)}}function gt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,pt,3,2,"ng-container",6),e.YNc(2,dt,3,3,"ng-template",null,7,e.W1O),e.TgZ(4,"p-scrollPanel",8),e.YNc(5,_t,10,6,"div",9),e.qZA(),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.studentRole||o.expertRole)("ngIfElse",t),e.xp6(4),e.Q6J("ngForOf",o.objects)}}let bt=(()=>{class n{constructor(t,o,i){this.router=t,this.learningObjectService=o,this.loginService=i,this.rating=3.5,this.subscribes=[]}ngOnDestroy(){this.subscribes.forEach(t=>{t.unsubscribe()})}ngOnInit(){this.loadData()}onSearch(){this.title&&""!==this.title&&this.router.navigate(["/search"],{queryParams:{general_title:this.title}})}loadData(){var t=this;return(0,p.Z)(function*(){if(t.studentRole){let o=yield t.learningObjectService.getRecommendedObjects().subscribe(i=>{t.objects=i.map(a=>({...a.learning_object,rating:a.rating}))});t.subscribes.push(o)}else if(t.expertRole){let o=yield t.learningObjectService.searchExpertNoRated().subscribe(i=>{t.objects=i.results,t.objects=t.objects.map(a=>({...a,rating:0}))},i=>console.log(i));t.subscribes.push(o)}else{let o=yield t.learningObjectService.getPopulars().subscribe(i=>{t.objects=i.map(a=>({...a.learning_object,rating:a.rating}))});t.subscribes.push(o)}})()}onClick(t){this.router.navigate(["/object",t])}get studentRole(){return this.loginService.validateRole("student")}get expertRole(){return this.loginService.validateRole("expert")}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(f.F0),e.Y36(v.N),e.Y36(b.r))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-side-object"]],decls:8,vars:8,consts:[[1,"input-search"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["aria-labelledby","searchbutton","name","search","id","search","type","text","pInputText","",3,"ngModel","placeholder","ngModelChange"],["id","searchbutton",3,"label","click"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["sideTemplate",""],["styleClass","side-bar"],["class","card-container p-d-flex",3,"click",4,"ngFor","ngForOf"],[1,"card-container","p-d-flex",3,"click"],["tabindex","0","pRipple","","styleClass","item-object card primary-box",3,"header","keyup.enter"],["pTemplate","header"],[1,"detail"],[1,"user"],[1,"categorie"],[1,"rating"],["readonly","true","stars","5",3,"ngModel","cancel"],["loading","lazy",3,"src","alt"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"span",1),e._UZ(2,"i",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(r){return i.title=r}),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"p-button",4),e.NdJ("click",function(){return i.onSearch()}),e.ALo(6,"translate"),e.qZA()(),e.YNc(7,gt,6,3,"ng-container",5)),2&o&&(e.xp6(3),e.Q6J("ngModel",i.title)("placeholder",e.lcZ(4,4,"input.search")),e.xp6(2),e.Q6J("label",e.lcZ(6,6,"input.search")),e.xp6(2),e.Q6J("ngIf",i.objects&&(null==i.objects?null:i.objects.length)>0))},dependencies:[d.sg,d.O5,c.Fj,c.JJ,c.On,_.jx,g.zx,st.Z,rt.o,U.iG,T.H,lt.P,h.X$],styles:["[_nghost-%COMP%]     .p-rating span{font-size:.9em}[_nghost-%COMP%]     .p-scrollpanel p{padding:.5rem;line-height:1.5;margin:0}[_nghost-%COMP%]     .p-scrollpanel.side-bar{width:100%;height:100vh;overflow-x:hidden}[_nghost-%COMP%]     .p-scrollpanel.side-bar .p-scrollpanel-wrapper{border-right:9px solid var(--layer-1)}[_nghost-%COMP%]     .p-scrollpanel.side-bar .p-scrollpanel-bar{background-color:var(--primary-color);opacity:1;transition:background-color .2s}[_nghost-%COMP%]     .p-scrollpanel.side-bar .p-scrollpanel-bar:hover{background-color:#007ad9}[_nghost-%COMP%]     .p-input-icon-left{width:100%}.input-search[_ngcontent-%COMP%]{display:flex;margin-bottom:10px;width:100%}.input-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.input-search[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin-left:5px}[_nghost-%COMP%]     .p-ripple{width:100%;height:100%}[_nghost-%COMP%]     .item-object{cursor:pointer;margin-bottom:10px;display:flex;padding:10px 5px}[_nghost-%COMP%]     .item-object .p-ripple{width:100%}[_nghost-%COMP%]     .item-object .p-card-title{font-size:.8em}[_nghost-%COMP%]     .item-object .p-card-content{padding:0}[_nghost-%COMP%]     .item-object .p-card-body{padding:0 5px;width:100%}[_nghost-%COMP%]     .item-object .detail h6{margin:0;font-size:.8em}[_nghost-%COMP%]     .item-object .detail .categorie{display:block;width:100%;text-align:right;font-size:.8em;margin:5px 0;opacity:.5}[_nghost-%COMP%]     .item-object img{width:100px;border-radius:3px}[_nghost-%COMP%]     .item-object .user{text-transform:capitalize}"]})}return n})(),ft=(()=>{class n{transform(t){return JSON.stringify(t,void 0,4).replace(/ /g,"&nbsp;").replace(/\n/g,"<br/>")}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275pipe=e.Yjl({name:"prettyprint",type:n,pure:!0})}return n})();function vt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-web-view",16),e.NdJ("commentEmit1",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.coutComment1(i))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("object",t.objectData)}}function ht(n,s){1&n&&(e.TgZ(0,"div",17),e._UZ(1,"p-skeleton",18),e.TgZ(2,"div",19),e._UZ(3,"p-skeleton",20)(4,"p-skeleton",20),e.qZA()(),e.TgZ(5,"div",21),e._UZ(6,"p-skeleton",22),e.TgZ(7,"div"),e._UZ(8,"p-skeleton",23)(9,"p-skeleton",24)(10,"p-skeleton",25),e.qZA()(),e.TgZ(11,"div",26),e._UZ(12,"p-skeleton",27)(13,"p-skeleton",28)(14,"p-skeleton",29)(15,"p-skeleton",30)(16,"p-skeleton",31),e.qZA())}function xt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"app-comments",33),e.NdJ("commentEmit",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.coutComment(i))}),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("objectId",t.objectData.id)("comments",t.commentsData.results)}}function Zt(n,s){1&n&&(e.TgZ(0,"div",17)(1,"ul",34)(2,"li",35)(3,"div",36),e._UZ(4,"p-skeleton",22),e.TgZ(5,"div",37),e._UZ(6,"p-skeleton",28)(7,"p-skeleton",38),e.qZA()()(),e.TgZ(8,"li",35)(9,"div",36),e._UZ(10,"p-skeleton",22),e.TgZ(11,"div",37),e._UZ(12,"p-skeleton",28)(13,"p-skeleton",38),e.qZA()()(),e.TgZ(14,"li",35)(15,"div",36),e._UZ(16,"p-skeleton",22),e.TgZ(17,"div",37),e._UZ(18,"p-skeleton",28)(19,"p-skeleton",38),e.qZA()()(),e.TgZ(20,"li")(21,"div",36),e._UZ(22,"p-skeleton",22),e.TgZ(23,"div",37),e._UZ(24,"p-skeleton",28)(25,"p-skeleton",38),e.qZA()()()()())}function Ct(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"pre",42),e.ALo(2,"prettyprint"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,1,t.objectData),e.oJD)}}function wt(n,s){if(1&n&&e._UZ(0,"app-metadata",45),2&n){const t=e.oxw(3);e.Q6J("learningobjectdetail",t.objectData)}}function Tt(n,s){if(1&n&&(e.TgZ(0,"div",43),e.YNc(1,wt,1,1,"app-metadata",44),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.objectData)}}const Ot=function(n,s){return{"pi-eye":n,"pi-eye-slash":s}};function Et(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",39)(2,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showMetadata=!i.showMetadata)}),e.qZA(),e.YNc(3,Ct,3,3,"ng-container",4),e.YNc(4,Tt,2,1,"ng-template",null,41,e.W1O),e.qZA(),e.BQk()}if(2&n){const t=e.MAs(5),o=e.oxw();e.xp6(2),e.Q6J("ngClass",e.WLB(3,Ot,!o.showMetadata,o.showMetadata)),e.xp6(1),e.Q6J("ngIf",o.showMetadata)("ngIfElse",t)}}function jt(n,s){1&n&&e._UZ(0,"p-skeleton",27)(1,"p-skeleton",23)(2,"p-skeleton",46)(3,"p-skeleton",47)(4,"p-skeleton",28)(5,"p-skeleton",48)(6,"p-skeleton",49)(7,"p-skeleton",50)(8,"p-skeleton",51)(9,"p-skeleton",52)(10,"p-skeleton",53)}function yt(n,s){if(1&n&&(e.TgZ(0,"table",57)(1,"thead")(2,"tr")(3,"th",58),e._uU(4),e.qZA()()(),e.TgZ(5,"tbody")(6,"tr")(7,"td"),e._UZ(8,"i",59),e._uU(9),e.ALo(10,"number"),e.qZA()()()()),2&n){const t=s.$implicit;e.xp6(4),e.Oqu(t.concepto.concept),e.xp6(5),e.hij(" ",e.xi3(10,2,t.total,"1.1-2"),"")}}function Qt(n,s){if(1&n&&(e.TgZ(0,"div",55),e.YNc(1,yt,11,5,"table",56),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t.concepts)}}function At(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Qt,2,1,"div",54),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.resultsEva)}}function qt(n,s){if(1&n&&(e.TgZ(0,"li")(1,"div",62)(2,"label",63),e._uU(3),e.TgZ(4,"strong"),e._uU(5),e.qZA()()()()),2&n){const t=s.$implicit;e.xp6(3),e.hij("",t.questions,"."),e.xp6(2),e.Oqu(t.qualification)}}function Ut(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",61)(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"ul"),e.YNc(5,qt,6,2,"li",60),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(t.evaluationConcept),e.xp6(2),e.Q6J("ngForOf",t.questionEvaluations)}}function St(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Ut,6,2,"div",60),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t.conceptEvaluations)}}function Mt(n,s){if(1&n&&(e.TgZ(0,"div")(1,"label"),e._uU(2),e.qZA()()),2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.observation)}}function Nt(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,St,2,1,"div",60),e.TgZ(2,"div",61)(3,"h6"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Mt,3,1,"div",60),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.groupedQuestionsTeacher),e.xp6(3),e.Oqu(e.lcZ(5,3,"object.observation")),e.xp6(2),e.Q6J("ngForOf",t.groupedQuestionsTeacher)}}function Ft(n,s){if(1&n&&(e.TgZ(0,"li")(1,"div",62)(2,"label",63),e._uU(3),e.TgZ(4,"strong"),e._uU(5),e.qZA()()()()),2&n){const t=s.$implicit;e.xp6(3),e.hij("",t.questions,"."),e.xp6(2),e.Oqu(t.qualification)}}function kt(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",61)(2,"h6"),e._uU(3),e.qZA(),e.TgZ(4,"ul"),e.YNc(5,Ft,6,2,"li",60),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(t.evaluationConcept),e.xp6(2),e.Q6J("ngForOf",t.questionEvaluations)}}function Jt(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,kt,6,2,"div",60),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t.conceptEvaluations)}}function Pt(n,s){if(1&n&&(e.TgZ(0,"div")(1,"label"),e._uU(2),e.qZA()()),2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.observation)}}function It(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Jt,2,1,"div",60),e.TgZ(2,"div",61)(3,"h6"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Pt,3,1,"div",60),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.groupedQuestionsEx),e.xp6(3),e.Oqu(e.lcZ(5,3,"object.observation")),e.xp6(2),e.Q6J("ngForOf",t.groupedQuestionsEx)}}function Vt(n,s){1&n&&(e.TgZ(0,"div",64)(1,"label",65),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"object.evaluationErrorView")))}function Yt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-side-object"),e.BQk())}function Lt(n,s){1&n&&(e.TgZ(0,"div",66),e._UZ(1,"p-skeleton",67),e.qZA(),e.TgZ(2,"div",17)(3,"ul",34)(4,"li",35)(5,"div",36),e._UZ(6,"p-skeleton",22),e.TgZ(7,"div",37),e._UZ(8,"p-skeleton",28)(9,"p-skeleton",38),e.qZA()()(),e.TgZ(10,"li",35)(11,"div",36),e._UZ(12,"p-skeleton",22),e.TgZ(13,"div",37),e._UZ(14,"p-skeleton",28)(15,"p-skeleton",38),e.qZA()()(),e.TgZ(16,"li",35)(17,"div",36),e._UZ(18,"p-skeleton",22),e.TgZ(19,"div",37),e._UZ(20,"p-skeleton",28)(21,"p-skeleton",38),e.qZA()()(),e.TgZ(22,"li")(23,"div",36),e._UZ(24,"p-skeleton",22),e.TgZ(25,"div",37),e._UZ(26,"p-skeleton",28)(27,"p-skeleton",38),e.qZA()()()()())}const Rt=[{path:"",pathMatch:"full",redirectTo:"/"},{path:":slug",component:(()=>{class n{constructor(t,o,i,a,r,l,m,zt){this.route=t,this.objectService=o,this.router=i,this.messageService=a,this.loginService=r,this.fb=l,this.breadcrumbService=m,this.languageService=zt,this.subscribes=[],this.showMetadata=!1,this.flagConfirm=!1,this.route.params.subscribe(N=>{this.getObjectDetail(N.slug),this.add_breadcrumb(N.slug)}),this.createForm()}ngOnInit(){}ngOnDestroy(){this.subscribes.forEach(t=>{t.unsubscribe()})}createForm(){this.angForm=this.fb.group({})}add_breadcrumb(t){var o=this;return(0,p.Z)(function*(){o.breadcrumbService.setItems([{label:"ROA"},{label:yield o.languageService.translate.get("menu.learningObject").toPromise()},{label:t,routerLink:["/object/"+t]}])})()}getObjectDetail(t){var o=this;return(0,p.Z)(function*(){let i=yield o.objectService.getObjectDetail(t).subscribe(a=>{o.objectData=a,o.loadData(),o.embedCode=`<iframe id='roa_iframe' src='${o.objectData.learning_object_file.url}' style='border:0; width:100%; height:100%' iframeborder='0' frameborder='0' iframeElement.frameBorder = 0; webkitallowfullscreen mozallowfullscreen allowfullscreen ></iframe>`,o.loadComments(a.id),o.objectService.interactionSideObjectSelect.emit(a)},a=>{o.router.navigateByUrl("/**")});o.subscribes.push(i)})()}loadComments(t){var o=this;return(0,p.Z)(function*(){let i=yield o.objectService.getComments(t).subscribe(a=>{o.commentsData=a});o.subscribes.push(i)})()}coutComment(t){this.commentsData.count+=t}copyText(){var t=this;return(0,p.Z)(function*(){navigator.clipboard.writeText(t.embedCode).then((0,p.Z)(function*(){t.messageService.add({severity:"success",summary:yield t.languageService.translate.get("message.copy").toPromise(),detail:yield t.languageService.translate.get("buttons.copyWebSuccess").toPromise()})}),function(){var o=(0,p.Z)(function*(i){t.messageService.add({severity:"error",summary:yield t.languageService.translate.get("message.titleError").toPromise(),detail:yield t.languageService.translate.get("buttons.resetOther").toPromise()})});return function(i){return o.apply(this,arguments)}}())})()}coutComment1(t){1==t&&this.loadData()}loadData(){var t=this;return(0,p.Z)(function*(){if(!t.roleStudent||t.roleExpert||t.roleTeacher){if(t.roleExpert){let o=yield t.objectService.getObjectResultsEvaluation(t.objectData.id).subscribe(i=>{i.length>0&&(t.groupedQuestionsEx=i.map(a=>({conceptEvaluations:a.concept_evaluations.map(r=>({evaluationConcept:r.evaluation_concept.concept,average:r.average,questionEvaluations:r.question_evaluations.map(l=>({value:l.id,questions:l.question,qualification:l.qualification}))})),observation:a.observation,id:a.id})),t.groupedQuestionsEx=t.groupedQuestionsEx,t.groupedQuestionsEx.forEach(a=>{a.conceptEvaluations.forEach(r=>{r.questionEvaluations.forEach(l=>{t.angForm.addControl(l.value,new c.p4(l.qualification,c.kI.required))})}),t.angForm.addControl("observation",new c.p4(a.observation,[c.kI.required])),t.flagConfirm=!!a.observation}))});t.subscribes.push(o)}else if(t.roleTeacher){let o=yield t.objectService.getResultsEvaluation(t.objectData.id).subscribe(i=>{t.groupedQuestionsTeacher=i.map(a=>({conceptEvaluations:a.concept_evaluations.map(r=>({evaluationConcept:r.evaluation_concept.concept,average:r.average,questionEvaluations:r.question_evaluations.map(l=>({value:l.id,questions:l.question,qualification:l.qualification}))})),observation:a.observation,id:a.id})),t.groupedQuestionsTeacher=t.groupedQuestionsTeacher});t.subscribes.push(o)}}else{let o=yield t.objectService.getResultsEvaluation(t.objectData.id).subscribe(i=>{t.resultsEva=i.map(a=>({concepts:a.concept_evaluations.map(r=>({concepto:r.evaluation_concept,total:r.average}))})),t.resultsEva=t.resultsEva});t.subscribes.push(o)}})()}get roleExpert(){return this.loginService.validateRole("expert")}get roleStudent(){return this.loginService.validateRole("student")}get roleTeacher(){return this.loginService.validateRole("teacher")}get observation(){return this.angForm.get("observation")}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(f.gz),e.Y36(v.N),e.Y36(f.F0),e.Y36(_.ez),e.Y36(b.r),e.Y36(c.QS),e.Y36(x.p),e.Y36(w.T))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-object"]],decls:35,vars:28,consts:[[1,"main-content"],[1,"p-grid"],[1,"p-col-12","p-md-8","p-lg-9"],[1,"box","content"],[4,"ngIf","ngIfElse"],["objectDataTemplate",""],[3,"header"],["commentsTemplate",""],["metadataTemplate",""],["disabled","","rows","6","pInputTextarea","",1,"code","animate__animated","animate__fadeIn",3,"value"],["pButton","","pRipple","","type","button",1,"p-button-raised",3,"label","click"],[4,"ngIf"],["class","di","style","text-align: center;",4,"ngIf"],[1,"p-col-12","p-md-4","p-lg-3"],[1,"box","sidebar"],["slideTemplate",""],[3,"object","commentEmit1"],[1,"custom-skeleton","p-p-4"],["width","100%","height","70vh"],[1,"p-d-flex","p-jc-between","p-mt-3"],["width","4rem","height","2rem"],[1,"p-d-flex","p-mb-3"],["shape","circle","size","4rem","styleClass","p-mr-2"],["width","10rem","styleClass","p-mb-2"],["width","5rem","styleClass","p-mb-2"],["height",".5rem"],[1,"p-field","p-col-12","p-md-12"],["styleClass","p-mb-2"],["width","100%","styleClass","p-mb-2"],["width","75%","styleClass","p-mb-2"],["height","50%","styleClass","p-mb-2"],["width","10rem","height","3rem"],[1,"animate__animated","animate__fadeIn"],[3,"objectId","comments","commentEmit"],[1,"p-m-0","p-p-0"],[1,"p-mb-3"],[1,"p-d-flex"],[2,"flex","1"],["width","75%"],[1,"metadata-content"],["pButton","","pRipple","","type","button","icon","pi",1,"pi","p-button-rounded","show",3,"ngClass","click"],["metatdataTemplate",""],[1,"animate__animated","animate__fadeIn","metadata-content","pretty",3,"innerHTML"],[1,"animate__animated","animate__fadeIn","metadata-content"],[3,"learningobjectdetail",4,"ngIf"],[3,"learningobjectdetail"],["width","70%","styleClass","p-mb-2"],["width","5%","styleClass","p-mb-2"],["width","90%","styleClass","p-mb-2"],["width","50%","styleClass","p-mb-2"],["width","60%","styleClass","p-mb-2"],["width","40%","styleClass","p-mb-2"],["width","20%","styleClass","p-mb-2"],["width","10rem","height","4rem"],["class","tableP",4,"ngFor","ngForOf"],[1,"tableP"],["class","table table-bordered",4,"ngFor","ngForOf"],[1,"table","table-bordered"],["scope","col"],[1,"pi","pi-star"],[4,"ngFor","ngForOf"],[1,"forms"],[1,"labelQu"],[1,"labelQT"],[1,"di",2,"text-align","center"],[2,"color","darkgray"],[1,"custom-skeleton","p-p-2"],["height","3rem","styleClass","p-mb-2"]],template:function(o,i){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,vt,2,1,"ng-container",4),e.YNc(5,ht,17,0,"ng-template",null,5,e.W1O),e.TgZ(7,"p-tabView")(8,"p-tabPanel",6),e.ALo(9,"translate"),e.YNc(10,xt,3,2,"ng-container",4),e.YNc(11,Zt,26,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(13,"p-tabPanel",6),e.ALo(14,"translate"),e.YNc(15,Et,6,6,"ng-container",4),e.YNc(16,jt,11,0,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(18,"p-tabPanel",6),e.ALo(19,"translate"),e._UZ(20,"textarea",9),e.TgZ(21,"button",10),e.NdJ("click",function(){return i.copyText()}),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"p-tabPanel",6),e.ALo(24,"translate"),e.YNc(25,At,2,1,"div",11),e.YNc(26,Nt,7,5,"div",11),e.YNc(27,It,7,5,"div",11),e.YNc(28,Vt,4,3,"div",12),e.qZA()()()(),e.TgZ(29,"div",13)(30,"div",14),e.YNc(31,Yt,2,0,"ng-container",4),e.YNc(32,Lt,28,0,"ng-template",null,15,e.W1O),e.qZA()()()(),e._UZ(34,"p-toast")),2&o){const a=e.MAs(6),r=e.MAs(12),l=e.MAs(17),m=e.MAs(33);e.xp6(4),e.Q6J("ngIf",i.objectData)("ngIfElse",a),e.xp6(4),e.Q6J("header",e.lcZ(9,18,"object.comments")+" ("+(null==i.commentsData?null:i.commentsData.count)+")"),e.xp6(2),e.Q6J("ngIf",i.commentsData)("ngIfElse",r),e.xp6(3),e.Q6J("header",e.lcZ(14,20,"object.metadata")),e.xp6(2),e.Q6J("ngIf",i.objectData)("ngIfElse",l),e.xp6(3),e.Q6J("header",e.lcZ(19,22,"object.insert")),e.xp6(2),e.Q6J("value",i.embedCode),e.xp6(1),e.s9C("label",e.lcZ(22,24,"object.copy")),e.xp6(2),e.Q6J("header",e.lcZ(24,26,"object.evaluation")),e.xp6(2),e.Q6J("ngIf",i.roleStudent&&!i.roleExpert&&!i.roleTeacher),e.xp6(1),e.Q6J("ngIf",i.roleTeacher&&!i.roleStudent&&!i.roleExpert),e.xp6(1),e.Q6J("ngIf",i.roleExpert&&i.flagConfirm),e.xp6(1),e.Q6J("ngIf",!i.flagConfirm),e.xp6(3),e.Q6J("ngIf",i.objectData)("ngIfElse",m)}},dependencies:[d.mk,d.sg,d.O5,g.Hq,Z.g,T.H,k.O,j.xf,j.x4,y.FN,J.d,ze,at,bt,d.JJ,ft,h.X$],styles:[".custom-skeleton[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pretty[_ngcontent-%COMP%]{width:100%;overflow-x:scroll}.metadata-content[_ngcontent-%COMP%]{position:relative}.metadata-content[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;z-index:100}.metadata-content[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{clear:both}.metadata-content[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{float:left;margin-right:5px}.code[_ngcontent-%COMP%]{width:100%;resize:none;cursor:text}p-message[_ngcontent-%COMP%]{z-index:100}.itemTotal[_ngcontent-%COMP%]{padding:10px;text-align:center}.forms[_ngcontent-%COMP%]{padding:10px 0}th[_ngcontent-%COMP%]{color:#495d77;padding:5px;border-radius:5px;text-align:center}td[_ngcontent-%COMP%]{text-align:center;background-color:var(--primary-color);color:#fff;padding:5px;border-radius:5px}.tableP[_ngcontent-%COMP%]{padding:10px;width:100%}"]})}return n})(),data:{breadcrumb:null}}];let Dt=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[f.Bz.forChild(Rt),f.Bz]})}return n})();var Wt=u(380),Bt=u(3807);let Kt=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[d.ez,Dt,Wt.m,Bt.K]})}return n})()}}]);