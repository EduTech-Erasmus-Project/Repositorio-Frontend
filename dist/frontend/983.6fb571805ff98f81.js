"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[983],{5983:(ye,v,l)=>{l.r(v),l.d(v,{SearchModule:()=>xe});var u=l(6895),d=l(7935),s=l(5861),e=l(6738),S=l(4112),b=l(9211),f=l(4120),q=l(8253),C=l(1155),T=l(2107),p=l(4006),x=l(548),y=l(8611),Z=l(6358),M=l(2833),P=l(8473),g=l(2466);function k(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return t.calificate=!1,e.KtG(t.submitSearch())}),e.ALo(2,"translate"),e.qZA()()}if(2&a){e.oxw();const r=e.MAs(1);e.xp6(1),e.Q6J("tabindex",null!=r&&r.selected?0:-1)("label",e.lcZ(2,2,"search.btnApply"))}}function A(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"p-accordionTab",6,15),e.ALo(2,"translate"),e.TgZ(3,"div",8)(4,"div",9)(5,"p-radioButton",16),e.NdJ("change",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.submitSearchExpert())})("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.submitSearchExpert())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw();return e.KtG(c.querySearchService.queryParams.is_evaluated=t)}),e.qZA(),e.TgZ(6,"label",11),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",9)(10,"p-radioButton",17),e.NdJ("change",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.submitSearchExpert())})("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.submitSearchExpert())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw();return e.KtG(c.querySearchService.queryParams.is_evaluated=t)}),e.qZA(),e.TgZ(11,"label",18),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.YNc(14,k,3,4,"div",19),e.qZA()()}if(2&a){const r=e.MAs(1),n=e.oxw();e.Q6J("header",e.lcZ(2,9,"search.qualifyOA"))("selected",n.querySearchService.queryParams.is_evaluated),e.xp6(5),e.Q6J("tabindex",null!=r&&r.selected?0:-1)("ngModel",n.querySearchService.queryParams.is_evaluated),e.xp6(2),e.Oqu(e.lcZ(8,11,"menu.sideMenu.noneQualification")),e.xp6(3),e.Q6J("tabindex",null!=r&&r.selected?0:-1)("ngModel",n.querySearchService.queryParams.is_evaluated),e.xp6(2),e.Oqu(e.lcZ(13,13,"menu.sideMenu.qualified")),e.xp6(2),e.Q6J("ngIf",n.calificate)}}function J(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",9)(1,"p-radioButton",31),e.NdJ("change",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.submitSearch())})("click",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.submitSearch())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw(2);return e.KtG(c.querySearchService.queryParams.knowledge_area__name_es=t)}),e.qZA(),e.TgZ(2,"label",32),e._uU(3),e.qZA()()}if(2&a){const r=i.$implicit;e.oxw();const n=e.MAs(2),t=e.oxw();e.xp6(1),e.Q6J("tabindex",null!=n&&n.selected?0:-1)("name",r.name)("value",r.name)("ngModel",t.querySearchService.queryParams.knowledge_area__name_es)("inputId",r.name),e.xp6(1),e.Q6J("for",r.name),e.xp6(1),e.Oqu(r.name)}}function O(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return t.areasBtn=!1,e.KtG(t.submitSearch())}),e.ALo(2,"translate"),e.qZA()()}if(2&a){e.oxw();const r=e.MAs(2);e.xp6(1),e.Q6J("tabindex",null!=r&&r.selected?0:-1)("label",e.lcZ(2,2,"search.btnApply"))}}function Q(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",9)(1,"p-radioButton",31),e.NdJ("change",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.submitSearch())})("click",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.submitSearch())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw(2);return e.KtG(c.querySearchService.queryParams.education_levels__name_es=t)}),e.qZA(),e.TgZ(2,"label",32),e._uU(3),e.qZA()()}if(2&a){const r=i.$implicit;e.oxw();const n=e.MAs(8),t=e.oxw();e.xp6(1),e.Q6J("tabindex",null!=n&&n.selected?0:-1)("name",r.name)("value",r.name)("ngModel",t.querySearchService.queryParams.education_levels__name_es)("inputId",r.name),e.xp6(1),e.Q6J("for",r.name),e.xp6(1),e.Oqu(r.name)}}function w(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return t.levelsBtn=!1,e.KtG(t.submitSearch())}),e.ALo(2,"translate"),e.qZA()()}if(2&a){e.oxw();const r=e.MAs(8);e.xp6(1),e.Q6J("tabindex",null!=r&&r.selected?0:-1)("label",e.lcZ(2,2,"search.btnApply"))}}function N(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",9)(1,"p-checkbox",34),e.NdJ("change",function(){e.CHM(r);const t=e.oxw(3);return e.KtG(t.submitSearch())})("click",function(){e.CHM(r);const t=e.oxw(3);return e.KtG(t.submitSearch())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw(3);return e.KtG(c.querySearchService.queryParams.accesibility_features=t)}),e.qZA(),e.TgZ(2,"label",32),e._uU(3),e.qZA()()}if(2&a){const r=i.$implicit;e.oxw(2);const n=e.MAs(14),t=e.oxw();e.xp6(1),e.Q6J("tabindex",null!=n&&n.selected?0:-1)("ngModel",t.querySearchService.queryParams.accesibility_features)("value",r.search_value)("inputId",r.search_value),e.xp6(1),e.Q6J("for",r.search_value),e.xp6(1),e.Oqu(r.preferences)}}function F(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",9)(1,"p-checkbox",35),e.NdJ("change",function(){e.CHM(r);const t=e.oxw(3);return e.KtG(t.submitSearch())})("click",function(){e.CHM(r);const t=e.oxw(3);return e.KtG(t.submitSearch())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw(3);return e.KtG(c.querySearchService.queryParams.annotation_modeaccess=t)}),e.qZA(),e.TgZ(2,"label",32),e._uU(3),e.qZA()()}if(2&a){const r=i.$implicit;e.oxw(2);const n=e.MAs(14),t=e.oxw();e.xp6(1),e.Q6J("tabindex",null!=n&&n.selected?0:-1)("ngModel",t.querySearchService.queryParams.annotation_modeaccess)("value",r.search_value)("inputId",r.search_value),e.xp6(1),e.Q6J("for",r.search_value),e.xp6(1),e.Oqu(r.preferences)}}function I(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",9)(1,"p-checkbox",36),e.NdJ("change",function(){e.CHM(r);const t=e.oxw(3);return e.KtG(t.submitSearch())})("click",function(){e.CHM(r);const t=e.oxw(3);return e.KtG(t.submitSearch())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw(3);return e.KtG(c.querySearchService.queryParams.accesibility_hazard=t)}),e.qZA(),e.TgZ(2,"label",32),e._uU(3),e.qZA()()}if(2&a){const r=i.$implicit;e.oxw(2);const n=e.MAs(14),t=e.oxw();e.xp6(1),e.Q6J("tabindex",null!=n&&n.selected?0:-1)("ngModel",t.querySearchService.queryParams.accesibility_hazard)("value",r.search_value)("inputId",r.search_value),e.xp6(1),e.Q6J("for",r.search_value),e.xp6(1),e.Oqu(r.preferences)}}function B(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",9)(1,"p-checkbox",37),e.NdJ("change",function(){e.CHM(r);const t=e.oxw(3);return e.KtG(t.submitSearch())})("click",function(){e.CHM(r);const t=e.oxw(3);return e.KtG(t.submitSearch())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw(3);return e.KtG(c.querySearchService.queryParams.key_preferences=t)}),e.qZA(),e.TgZ(2,"label",32),e._uU(3),e.qZA()()}if(2&a){const r=i.$implicit;e.oxw(2);const n=e.MAs(14),t=e.oxw();e.xp6(1),e.Q6J("tabindex",null!=n&&n.selected?0:-1)("ngModel",t.querySearchService.queryParams.key_preferences)("value",r.search_value)("inputId",r.search_value),e.xp6(1),e.Q6J("for",r.search_value),e.xp6(1),e.Oqu(r.preferences)}}function G(a,i){if(1&a&&(e.TgZ(0,"div",33),e.YNc(1,N,4,6,"div",25),e.YNc(2,F,4,6,"div",25),e.YNc(3,I,4,6,"div",25),e.YNc(4,B,4,6,"div",25),e.qZA()),2&a){const r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.getPreferencesGroup("accesibility_features")),e.xp6(1),e.Q6J("ngForOf",r.getPreferencesGroup("annotation_modeaccess")),e.xp6(1),e.Q6J("ngForOf",r.getPreferencesGroup("accesibility_hazard")),e.xp6(1),e.Q6J("ngForOf",r.getPreferencesGroup("key_preferences"))}}function Y(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return t.preferencesBtn=!1,e.KtG(t.submitSearch())}),e.ALo(2,"translate"),e.qZA()()}if(2&a){e.oxw();const r=e.MAs(14);e.xp6(1),e.Q6J("tabindex",null!=r&&r.selected?0:-1)("label",e.lcZ(2,2,"search.btnApply"))}}function E(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",9)(1,"p-radioButton",38),e.NdJ("change",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.submitSearch())})("click",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.submitSearch())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw(2);return e.KtG(c.querySearchService.queryParams.license__name_es=t)}),e.qZA(),e.TgZ(2,"label",32),e._uU(3),e.qZA()()}if(2&a){const r=i.$implicit;e.oxw();const n=e.MAs(20),t=e.oxw();e.xp6(1),e.Q6J("tabindex",null!=n&&n.selected?0:-1)("value",r.name)("ngModel",t.querySearchService.queryParams.license__name_es)("inputId",r.name),e.xp6(1),e.Q6J("for",r.name),e.xp6(1),e.Oqu(r.name)}}function H(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return t.lisenceBtn=!1,e.KtG(t.submitSearch())}),e.ALo(2,"translate"),e.qZA()()}if(2&a){e.oxw();const r=e.MAs(20);e.xp6(1),e.Q6J("tabindex",null!=r&&r.selected?0:-1)("label",e.lcZ(2,2,"search.btnApply"))}}function j(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",9)(1,"p-radioButton",39),e.NdJ("change",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.submitSearch())})("click",function(){e.CHM(r);const t=e.oxw(2);return e.KtG(t.submitSearch())})("ngModelChange",function(t){e.CHM(r);const c=e.oxw(2);return e.KtG(c.querySearchService.queryParams.created__year=t)}),e.qZA(),e.TgZ(2,"label",32),e._uU(3),e.qZA()()}if(2&a){const r=i.$implicit;e.oxw();const n=e.MAs(26),t=e.oxw();e.xp6(1),e.Q6J("tabindex",null!=n&&n.selected?0:-1)("name",r.created)("value",r.created)("ngModel",t.querySearchService.queryParams.created__year)("inputId",r.created),e.xp6(1),e.Q6J("for",r.created),e.xp6(1),e.Oqu(r.created)}}function K(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2);return t.yearsBtn=!1,e.KtG(t.submitSearch())}),e.ALo(2,"translate"),e.qZA()()}if(2&a){e.oxw();const r=e.MAs(26);e.xp6(1),e.Q6J("tabindex",null!=r&&r.selected?0:-1)("label",e.lcZ(2,2,"search.btnApply"))}}function L(a,i){if(1&a&&(e.TgZ(0,"div",22)(1,"p-accordionTab",6,23),e.ALo(3,"translate"),e.TgZ(4,"div",24),e.YNc(5,J,4,7,"div",25),e.YNc(6,O,3,4,"div",19),e.qZA()(),e.TgZ(7,"p-accordionTab",6,26),e.ALo(9,"translate"),e.TgZ(10,"div",24),e.YNc(11,Q,4,7,"div",25),e.YNc(12,w,3,4,"div",19),e.qZA()(),e.TgZ(13,"p-accordionTab",6,27),e.ALo(15,"translate"),e.TgZ(16,"div",24),e.YNc(17,G,5,4,"div",28),e.YNc(18,Y,3,4,"div",19),e.qZA()(),e.TgZ(19,"p-accordionTab",6,29),e.ALo(21,"translate"),e.TgZ(22,"div",24),e.YNc(23,E,4,6,"div",25),e.YNc(24,H,3,4,"div",19),e.qZA()(),e.TgZ(25,"p-accordionTab",6,30),e.ALo(27,"translate"),e.TgZ(28,"div",24),e.YNc(29,j,4,7,"div",25),e.YNc(30,K,3,4,"div",19),e.qZA()()()),2&a){const r=e.oxw();e.xp6(1),e.Q6J("header",e.lcZ(3,20,"search.interestAreas"))("selected",r.querySearchService.queryParams.knowledge_area__name_es),e.xp6(4),e.Q6J("ngForOf",r.areas),e.xp6(1),e.Q6J("ngIf",r.areasBtn),e.xp6(1),e.Q6J("header",e.lcZ(9,22,"search.educationLevel"))("selected",r.querySearchService.queryParams.education_levels__name_es),e.xp6(4),e.Q6J("ngForOf",r.levels),e.xp6(1),e.Q6J("ngIf",r.levelsBtn),e.xp6(1),e.Q6J("header",e.lcZ(15,24,"search.preferences"))("selected",r.selectedPreferences),e.xp6(4),e.Q6J("ngIf",r.preferences),e.xp6(1),e.Q6J("ngIf",r.preferencesBtn),e.xp6(1),e.Q6J("header",e.lcZ(21,26,"search.lisence"))("selected",r.querySearchService.queryParams.license__name_es),e.xp6(4),e.Q6J("ngForOf",r.licenses),e.xp6(1),e.Q6J("ngIf",r.lisenceBtn),e.xp6(1),e.Q6J("header",e.lcZ(27,28,"search.publicationYear"))("selected",r.querySearchService.queryParams.created__year),e.xp6(4),e.Q6J("ngForOf",r.years),e.xp6(1),e.Q6J("ngIf",r.yearsBtn)}}let U=(()=>{class a{constructor(r,n,t,c){this.searchService=r,this.router=n,this.loginService=t,this.querySearchService=c,this.suscribes=[],this.areas=[],this.levels=[],this.preferences=[],this.years=[],this.licenses=[],this.calificate=!1,this.areasBtn=!1,this.levelsBtn=!1,this.preferencesBtn=!1,this.yearsBtn=!1,this.lisenceBtn=!1}ngOnDestroy(){this.suscribes.forEach(r=>{})}ngOnInit(){this.loadData()}loadData(){var r=this;return(0,s.Z)(function*(){let n=yield r.searchService.getInterestAreas().subscribe(_=>{r.areas=_.values}),t=yield r.searchService.getLevelEducation().subscribe(_=>{r.levels=_.values}),c=yield r.searchService.getCreatedYear().subscribe(_=>{r.years=_.map(h=>({created:new Date(h.created).getFullYear()}))}),o=yield r.searchService.getLicenses().subscribe(_=>{r.licenses=_.values}),m=yield r.searchService.getgetFilterArea().subscribe(_=>{r.preferences=_});r.suscribes.push(n,t,c,o,m)})()}getPreferencesGroup(r){let n;try{n=this.preferences.find(t=>t.filters_area===r).preferences_filter}catch{}return n}submitSearch(){var r=this;return(0,s.Z)(function*(){let n={queryParams:r.querySearchService.queryParams};yield r.router.navigate(["/search"],n)})()}submitSearchExpert(){var r=this;return(0,s.Z)(function*(){if(0!=Object.keys(r.querySearchService.queryParams).length){let t=Object.keys(r.querySearchService.queryParams);for(let c=0;c<t.length;c++){let o=t[c];if(Array.isArray(r.querySearchService.queryParams[o]))switch(o){case"liked":case"scored":case"recent":r.querySearchService.queryParams[o]=r.querySearchService.queryParams[o][0]}else switch(o){case"liked":r.removeFilter("liked");break;case"scored":r.removeFilter("scored");break;case"recent":r.removeFilter("recent")}}}let n={queryParams:r.querySearchService.queryParams};yield r.router.navigate(["/search"],n)})()}removeFilter(r){""!=this.querySearchService.queryParams[r]&&(delete this.querySearchService.queryParams[r],this.router.navigate(["/search"],{queryParams:this.querySearchService.queryParams}))}checkEvent(r){}get selectedPreferences(){return this.querySearchService.queryParams.accesibility_features?.length>0||this.querySearchService.queryParams.annotation_modeaccess?.length>0||this.querySearchService.queryParams.accesibility_hazard?.length>0||this.querySearchService.queryParams.key_preferences?.length>0}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(S.o),e.Y36(d.F0),e.Y36(f.r),e.Y36(b.v))};static#r=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-sidebar-search"]],decls:28,vars:25,consts:[[1,"content"],[2,"font-size","1.5em"],[1,"p-grid"],[1,"p-col-12","p-md-12","p-lg-12"],[3,"multiple"],["aria-hidden","true",3,"header","selected",4,"ngIf"],["aria-hidden","true",3,"header","selected"],["acordingRelevance",""],["aria-hidden","true",1,"box"],[1,"p-field-radiobutton"],["name","liked","value","True",3,"tabindex","ngModel","change","click","ngModelChange"],["for","enr"],["name","scored","value","True",3,"tabindex","ngModel","change","click","ngModelChange"],["name","recent","value","True",3,"tabindex","ngModel","change","click","ngModelChange"],["class","view-rol-filters",4,"ngIf"],["acordingExpert",""],["name","rated","value","False","inputId","enr",3,"tabindex","ngModel","change","click","ngModelChange"],["name","rated","value","True","inputId","er",3,"tabindex","ngModel","change","click","ngModelChange"],["for","er"],["class","btn",4,"ngIf"],[1,"btn"],["pButton","","pRipple","","type","button",1,"p-button-sm",3,"tabindex","label","click"],[1,"view-rol-filters"],["acordingAreas",""],[1,"box"],["class","p-field-radiobutton",4,"ngFor","ngForOf"],["acordingLevel",""],["acordingPreferences",""],["class","preferences",4,"ngIf"],["acordingLicence",""],["acordingYear",""],[3,"tabindex","name","value","ngModel","inputId","change","click","ngModelChange"],[3,"for"],[1,"preferences"],["name","accesibility_features",3,"tabindex","ngModel","value","inputId","change","click","ngModelChange"],["name","annotation_modeaccess",3,"tabindex","ngModel","value","inputId","change","click","ngModelChange"],["name","accesibility_hazard",3,"tabindex","ngModel","value","inputId","change","click","ngModelChange"],["name","key_preferences",3,"tabindex","ngModel","value","inputId","change","click","ngModelChange"],["name","lisence",3,"tabindex","value","ngModel","inputId","change","click","ngModelChange"],["aria-hidden","true",3,"tabindex","name","value","ngModel","inputId","change","click","ngModelChange"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"p-accordion",4),e.YNc(7,A,15,15,"p-accordionTab",5),e.TgZ(8,"p-accordionTab",6,7),e.ALo(10,"translate"),e.TgZ(11,"div",8)(12,"div",9)(13,"p-checkbox",10),e.NdJ("change",function(){return t.submitSearchExpert()})("click",function(){return t.submitSearchExpert()})("ngModelChange",function(o){return t.querySearchService.queryParams.liked=o}),e.qZA(),e.TgZ(14,"label",11),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",9)(18,"p-checkbox",12),e.NdJ("change",function(){return t.submitSearchExpert()})("click",function(){return t.submitSearchExpert()})("ngModelChange",function(o){return t.querySearchService.queryParams.scored=o}),e.qZA(),e.TgZ(19,"label",11),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",9)(23,"p-checkbox",13),e.NdJ("change",function(){return t.submitSearchExpert()})("click",function(){return t.submitSearchExpert()})("ngModelChange",function(o){return t.querySearchService.queryParams.recent=o}),e.qZA(),e.TgZ(24,"label",11),e._uU(25),e.ALo(26,"translate"),e.qZA()()()(),e.YNc(27,L,31,30,"div",14),e.qZA()()()()),2&n){const c=e.MAs(9);e.xp6(2),e.Oqu(e.lcZ(3,15,"search.sidebarTitle")),e.xp6(4),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngIf",null==t.loginService.user?null:t.loginService.user.roles.includes("expert")),e.xp6(1),e.Q6J("header",e.lcZ(10,17,"search.filterRelevance"))("selected",t.querySearchService.queryParams.liked||t.querySearchService.queryParams.scored||t.querySearchService.queryParams.recent),e.xp6(5),e.Q6J("tabindex",null!=c&&c.selected?0:-1)("ngModel",t.querySearchService.queryParams.liked),e.xp6(2),e.Oqu(e.lcZ(16,19,"object.singleMostPopulars")),e.xp6(3),e.Q6J("tabindex",null!=c&&c.selected?0:-1)("ngModel",t.querySearchService.queryParams.scored),e.xp6(2),e.Oqu(e.lcZ(21,21,"object.labelPopulars")),e.xp6(3),e.Q6J("tabindex",null!=c&&c.selected?0:-1)("ngModel",t.querySearchService.queryParams.recent),e.xp6(2),e.Oqu(e.lcZ(26,23,"object.singleMostRecents")),e.xp6(2),e.Q6J("ngIf",null==t.loginService.user||(null==t.loginService.user?null:t.loginService.user.roles.includes("expert"))||(null==t.loginService.user?null:t.loginService.user.roles.includes("teacher"))||(null==t.loginService.user?null:t.loginService.user.roles.includes("student")))}},dependencies:[u.sg,u.O5,p.JJ,p.On,x.UQ,x.US,y.Hq,Z.XZ,M.EU,P.H,g.X$],styles:["h5[_ngcontent-%COMP%]{background-color:#efefef;padding:10px 5px}.btn[_ngcontent-%COMP%]{text-align:center}.btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.recommended[_ngcontent-%COMP%]{width:100%;margin:10px 0}"]})}return a})();var R=l(2111),$=l(4028),z=l(2778),D=l(2712),X=l(5626),W=l(155),V=l(9470);const ee=["paginator"];function re(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"div",20),e._uU(1),e.TgZ(2,"span",21),e.NdJ("click",function(){const c=e.CHM(r).$implicit,o=e.oxw(2);return e.KtG(o.removeChip(c))})("keyup.Space",function(){const c=e.CHM(r).$implicit,o=e.oxw(2);return e.KtG(o.removeChip(c))}),e._UZ(3,"i",22),e.qZA()()}if(2&a){const r=i.$implicit;e.xp6(1),e.hij(" ",r.value," ")}}function te(a,i){if(1&a&&(e.ynx(0),e.YNc(1,re,4,1,"div",19),e.BQk()),2&a){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.chipsSearch)}}function ne(a,i){if(1&a){const r=e.EpF();e.TgZ(0,"p-button",23),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.onClearFilters())}),e.ALo(1,"translate"),e.qZA()}2&a&&e.s9C("label",e.lcZ(1,1,"search.filterClean"))}function ae(a,i){1&a&&e._UZ(0,"p-skeleton",34)}function ce(a,i){1&a&&e._UZ(0,"p-skeleton",35)}const ie=function(){return{width:"100%"}};function oe(a,i){1&a&&(e.TgZ(0,"div",26)(1,"div",27)(2,"p-card",28),e.YNc(3,ae,1,0,"ng-template",29),e.TgZ(4,"div",30),e._UZ(5,"p-skeleton",31)(6,"p-skeleton",32),e.qZA(),e._UZ(7,"p-divider"),e.TgZ(8,"div",30),e._UZ(9,"p-skeleton",31),e.qZA(),e.YNc(10,ce,1,0,"ng-template",33),e.qZA()()()),2&a&&(e.xp6(2),e.Akn(e.DdM(2,ie)))}function le(a,i){if(1&a&&(e.ynx(0),e.TgZ(1,"div",24),e.YNc(2,oe,11,3,"div",25),e.qZA(),e.BQk()),2&a){const r=e.oxw();e.xp6(2),e.Q6J("ngForOf",r.objectsSkeleton)}}function se(a,i){1&a&&(e.TgZ(0,"div",37)(1,"div",38)(2,"p",39),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&a&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"search.filterErrorSearchNone")))}function _e(a,i){if(1&a&&(e.TgZ(0,"div",45),e._UZ(1,"app-card",46),e.qZA()),2&a){const r=e.oxw().$implicit;e.xp6(1),e.Q6J("object",r)("expertOptions",!0)}}function ue(a,i){if(1&a&&(e.TgZ(0,"div",47),e._UZ(1,"app-card",48),e.qZA()),2&a){const r=e.oxw().$implicit;e.xp6(1),e.Q6J("object",r)("studentOptions",!0)}}function de(a,i){if(1&a&&(e.TgZ(0,"div",49),e._UZ(1,"app-card",50),e.qZA()),2&a){const r=e.oxw().$implicit;e.xp6(1),e.Q6J("object",r)}}function pe(a,i){if(1&a&&(e.TgZ(0,"div",41),e.YNc(1,_e,2,2,"div",42),e.YNc(2,ue,2,2,"div",43),e.YNc(3,de,2,1,"div",44),e.qZA()),2&a){const r=e.oxw(3);e.xp6(1),e.Q6J("ngIf",r.roleExpert),e.xp6(1),e.Q6J("ngIf",r.roleStudent),e.xp6(1),e.Q6J("ngIf",!r.roleExpert&&!r.roleStudent)}}function he(a,i){if(1&a&&(e.ynx(0),e.YNc(1,pe,4,3,"div",40),e.BQk()),2&a){const r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.objects)}}function ge(a,i){1&a&&(e.ynx(0),e.TgZ(1,"h3"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"search.noResults")))}function me(a,i){if(1&a&&(e.TgZ(0,"div",24),e.YNc(1,se,5,3,"div",36),e.YNc(2,he,2,1,"ng-container",14),e.YNc(3,ge,4,3,"ng-container",14),e.qZA()),2&a){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",1==r.resultOAsNone),e.xp6(1),e.Q6J("ngIf",(null==r.objects?null:r.objects.length)>0),e.xp6(1),e.Q6J("ngIf",0===(null==r.objects?null:r.objects.length))}}const ve=[{path:"",component:(()=>{class a{constructor(r,n,t,c,o,m,_){this.route=r,this.router=n,this.searchService=t,this.querySearchService=c,this.loginService=o,this.breadcrumbService=m,this.languageService=_,this.subscribes=[],this.preferences=[],this.objectsSkeleton=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],this.loading=!1,this.rows=0,this.totalRecords=0,this.pageSize=0,this.page_now=0,this.next_event="",this.previus_event="",this.resultOAsNone=!1,this.route.queryParams.subscribe(h=>{this.chipsSearch=[],this.querySearchService.queryParams=JSON.parse(JSON.stringify(h)),this.is_evaluated=h,this.add_breadcrumb(),this.validate_rol_add_chipSearch()})}ngOnInit(){}ngOnDestroy(){this.subscribes.forEach(r=>{r.unsubscribe()})}add_breadcrumb(){var r=this;return(0,s.Z)(function*(){if(r.loginService.validateRole("expert")){let n=r.validate_is_evaluate();r.breadcrumbService.setItems([{label:"ROA"},{label:yield r.languageService.translate.get("menu.search").toPromise()},{label:yield n,routerLink:["/search"]}])}else r.breadcrumbService.setItems([{label:"ROA"},{label:yield r.languageService.translate.get("menu.search").toPromise(),routerLink:["/search"]}])})()}validate_is_evaluate(){var r=this;return(0,s.Z)(function*(){let n;return"True"==r.is_evaluated.is_evaluated?(n=yield r.languageService.translate.get("menu.sideMenu.qualified").toPromise(),n):(n=yield r.languageService.translate.get("menu.sideMenu.noneQualification").toPromise(),n)})()}validate_rol_add_chipSearch(){var r=this;return(0,s.Z)(function*(){if(0!=Object.keys(r.querySearchService.queryParams).length){let n=Object.keys(r.querySearchService.queryParams);r.chipsSearch=[];for(let t=0;t<n.length;t++){let c=n[t];0!==r.querySearchService.queryParams[c].length&&((yield r.checkParameterNames(r.chipsSearch,r.querySearchService.queryParams[c],c))||r.chipsSearch.push({value:r.querySearchService.queryParams[c]}))}}r.searchData()})()}checkParameterNames(r,n,t){var c=this;return(0,s.Z)(function*(){if("True"===c.querySearchService.queryParams[t]||"False"===c.querySearchService.queryParams[t]){switch(t){case"is_evaluated":c.chipsSearch.push("True"===c.querySearchService.queryParams[t]?{value:yield c.languageService.translate.get("menu.sideMenu.qualified").toPromise()}:{value:yield c.languageService.translate.get("menu.sideMenu.noneQualification").toPromise()});break;case"scored":"True"===c.querySearchService.queryParams[t]?c.chipsSearch.push({value:yield c.languageService.translate.get("object.labelPopulars").toPromise()}):c.router.navigate(["/search"]);break;case"liked":"True"===c.querySearchService.queryParams[t]?c.chipsSearch.push({value:yield c.languageService.translate.get("object.labelLikes").toPromise()}):c.router.navigate(["/search"]);break;case"recent":"True"===c.querySearchService.queryParams[t]?c.chipsSearch.push({value:yield c.languageService.translate.get("object.labelMostRecent").toPromise()}):c.router.navigate(["/search"])}return!0}return!1})()}searchData(){var r=this;return(0,s.Z)(function*(){r.loading=!0;let n=yield r.searchService.search(r.querySearchService.queryParams).subscribe(t=>{t.results.length>0?(r.pageSize=t.pages,r.totalRecords=t.count,r.rows=t.results.length,r.objects=t.results,r.next_event=t.links.next,r.previus_event=t.links.previous,r.loading=!1,r.resultOAsNone=!1):(r.loading=!1,r.resultOAsNone=!0)},t=>{console.log(t),r.loading=!1});r.subscribes.push(n)})()}removeChip(r){var n=this;return(0,s.Z)(function*(){for(var t in r.value===(yield n.languageService.translate.get("menu.sideMenu.noneQualification").toPromise())?r.value="False":r.value===(yield n.languageService.translate.get("menu.sideMenu.qualified").toPromise())&&(r.value="True"),r.value=yield n.renameIndexVarWithFilterRelevance(r.value),n.querySearchService.queryParams)n.querySearchService.queryParams.hasOwnProperty(t)&&!n.removeParamsRelevanceFilter(n.querySearchService.queryParams[t],t,r.value)&&n.querySearchService.queryParams[t]===r.value&&(delete n.querySearchService.queryParams[t],n.router.navigate(["/search"],{queryParams:n.querySearchService.queryParams}))})()}renameIndexVarWithFilterRelevance(r){var n=this;return(0,s.Z)(function*(){switch(r){case yield n.languageService.translate.get("object.labelLikes").toPromise():return"liked";case yield n.languageService.translate.get("object.labelPopulars").toPromise():return"scored";case yield n.languageService.translate.get("object.labelMostRecent").toPromise():return"recent"}return r})()}removeParamsRelevanceFilter(r,n,t){return n==t&&(delete this.querySearchService.queryParams[n],this.router.navigate(["/search"],{queryParams:this.querySearchService.queryParams}),!0)}onSearch(){this.querySearchService.queryParams.general_title&&""!==this.querySearchService.queryParams.general_title&&this.router.navigate(["/search"],{queryParams:this.querySearchService.queryParams})}onClearFilters(){this.chipsSearch=[],this.querySearchService.queryParams={},this.router.navigate(["/search"],{queryParams:this.querySearchService.queryParams})}get idQueryEmpty(){return 0!==Object.keys(this.querySearchService.queryParams).length}get roleExpert(){return this.loginService.validateRole("expert")}get roleTeacher(){return this.loginService.validateRole("teacher")}get roleStudent(){return this.loginService.validateRole("student")}paginate(r){var n=this;return(0,s.Z)(function*(){n.loading=!0;const t=r.page+1;try{let c=yield n.searchService.searchPagePaginator(t).toPromise();c&&c.results.length>0&&(n.objects=c.results,n.loading=!1,n.next_event=c.links.next,n.previus_event=c.links.previous)}catch{n.loading=!1}})()}updateCurrentPage(r){setTimeout(()=>this.paginator.changePage(r))}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(S.o),e.Y36(b.v),e.Y36(f.r),e.Y36(q.p),e.Y36(C.T))};static#r=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-search"]],viewQuery:function(n,t){if(1&n&&e.Gf(ee,7),2&n){let c;e.iGM(c=e.CRH())&&(t.paginator=c.first)}},decls:24,vars:16,consts:[[3,"header_title"],[1,"main-content"],[1,"p-grid"],[1,"p-col-12","p-md-4","p-lg-3"],[1,"box","sidebar"],[1,"input-search"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","",3,"ngModel","placeholder","keyup.enter","ngModelChange"],[3,"label","click"],[1,"p-col-12","p-md-8","p-lg-9"],[1,"box","content"],[1,"header-search"],[1,"p-ai-center"],[4,"ngIf"],["icon","pi pi-sliders-v","iconPos","right",3,"label","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["loadingTemplate",""],[3,"rows","totalRecords","onPageChange"],["class","chip","tabindex","0",4,"ngFor","ngForOf"],["tabindex","0",1,"chip"],["onclick","this.parentElement.style.display='none'","tabindex","0","aria-label","Eliminar filtro",1,"closebtn",3,"click","keyup.Space"],[1,"pi","pi-times"],["icon","pi pi-sliders-v","iconPos","right",3,"label","click"],[1,"p-grid","card-content"],["class","p-col-12 p-md-6 p-lg-3 card-skeleton",4,"ngFor","ngForOf"],[1,"p-col-12","p-md-6","p-lg-3","card-skeleton"],[1,"animate__animated","animate__fadeIn","card-content"],["styleClass","p-card-shadow"],["pTemplate","header"],[2,"flex","1"],["width","100%","styleClass","mb-2"],["width","75%"],["pTemplate","footer"],["width","262px","height","150px"],["width","205px","height","50px"],["class","p-col-12 p-md-12 p-lg-12",4,"ngIf"],[1,"p-col-12","p-md-12","p-lg-12"],[1,"container-message"],[2,"font-size","18px"],["class","p-col-12 p-md-6 p-lg-3",4,"ngFor","ngForOf"],[1,"p-col-12","p-md-6","p-lg-3"],["class","rol-expert",4,"ngIf"],["class","rol-student",4,"ngIf"],["class","rol-others",4,"ngIf"],[1,"rol-expert"],[3,"object","expertOptions"],[1,"rol-student"],[3,"object","studentOptions"],[1,"rol-others"],[3,"object"]],template:function(n,t){if(1&n&&(e._UZ(0,"app-header",0),e.ALo(1,"translate"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"span",6),e._UZ(8,"i",7),e.TgZ(9,"input",8),e.NdJ("keyup.enter",function(){return t.onSearch()})("ngModelChange",function(o){return t.querySearchService.queryParams.general_title=o}),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"p-button",9),e.NdJ("click",function(){return t.onSearch()}),e.ALo(12,"translate"),e.qZA()(),e._UZ(13,"app-sidebar-search"),e.qZA()(),e.TgZ(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13),e.YNc(18,te,2,1,"ng-container",14),e.YNc(19,ne,2,3,"p-button",15),e.qZA()(),e.YNc(20,le,3,1,"ng-container",16),e.YNc(21,me,4,3,"ng-template",null,17,e.W1O),e.TgZ(23,"p-paginator",18),e.NdJ("onPageChange",function(o){return t.paginate(o)}),e.qZA()()()()()),2&n){const c=e.MAs(22);e.Q6J("header_title",e.lcZ(1,10,"menu.searchUp")),e.xp6(9),e.Q6J("ngModel",t.querySearchService.queryParams.general_title)("placeholder",e.lcZ(10,12,"input.search")),e.xp6(2),e.Q6J("label",e.lcZ(12,14,"input.search")),e.xp6(7),e.Q6J("ngIf",t.chipsSearch.length>0&&t.idQueryEmpty),e.xp6(1),e.Q6J("ngIf",t.idQueryEmpty),e.xp6(1),e.Q6J("ngIf",t.loading)("ngIfElse",c),e.xp6(3),e.Q6J("rows",t.rows)("totalRecords",t.totalRecords)}},dependencies:[u.sg,u.O5,T.A,U,p.Fj,p.JJ,p.On,R.jx,y.zx,$.Z,z.o,D.i,X.D,W.O,V.G,g.X$],styles:[".container-message[_ngcontent-%COMP%]{background:#fff;height:120px;display:flex;align-items:center;justify-content:center}.sidebar[_ngcontent-%COMP%]{padding:25px 0}.content[_ngcontent-%COMP%]{padding:25px 0;min-height:125vh}[_nghost-%COMP%]     .p-chip.custom-chip{background:var(--primary-color);color:var(--primary-color-text)}.card-content[_ngcontent-%COMP%]{margin-top:15px}.input-search[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}.input-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.input-search[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin-left:5px}.spinner[_ngcontent-%COMP%]{height:55vh;width:100%;position:relative;transform:none;top:0;left:0;display:flex;justify-content:center;align-items:center}.rol-others[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]     .p-chip.custom-chip{margin-top:3px}[_nghost-%COMP%]     .p-chip .p-chip-text{line-height:1.5;margin-top:.4rem;margin-bottom:.4rem}.chip[_ngcontent-%COMP%]{display:inline-block;padding:0 10px;height:35px;line-height:35px;border-radius:10px;background-color:#3b5b68;color:#fff;margin:0 10px 0 0}.closebtn[_ngcontent-%COMP%]{padding-left:4px;padding-right:4px;color:#fff;float:right;font-size:20px;cursor:pointer}.closebtn[_ngcontent-%COMP%]:hover{color:#b60000}[_nghost-%COMP%]     .p-card-content{padding:0}.card-content[_ngcontent-%COMP%]{height:100%}.card-content   [_nghost-%COMP%]     .p-card-shadow{height:100%;display:flex;flex-direction:column;justify-content:space-between}.card-content   [_nghost-%COMP%]     .p-card-body{padding:15px}[_nghost-%COMP%]     .p-card-shadow{position:relative}"]})}return a})(),data:{breadcrumb:null}}];let Se=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#r=this.\u0275mod=e.oAB({type:a});static#t=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(ve),d.Bz]})}return a})();var be=l(3807),fe=l(380);let xe=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#r=this.\u0275mod=e.oAB({type:a});static#t=this.\u0275inj=e.cJS({imports:[u.ez,Se,be.K,fe.m,g.aw]})}return a})()}}]);