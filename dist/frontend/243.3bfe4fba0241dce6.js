"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[243],{3807:(P,h,a)=>{a.d(h,{K:()=>t});var g=a(6895),f=a(380),d=a(4006),n=a(2466),m=a(5030),v=a(6738);let t=(()=>{class i{static#t=this.\u0275fac=function(u){return new(u||i)};static#e=this.\u0275mod=v.oAB({type:i});static#s=this.\u0275inj=v.cJS({imports:[g.ez,f.m,d.UX,n.aw,m.Y]})}return i})()},5030:(P,h,a)=>{a.d(h,{Y:()=>n});var g=a(6895),f=a(8611),d=a(6738);let n=(()=>{class m{constructor(){this.buttonMenuBoolean=!1,this.itemsStructure=[],this.containUrlName=""}ngOnInit(){this.createDropdownMenu()}createDropdownMenu(){const t=this.object.learning_object_file.url.split("/");this.containUrlName=t[t.length-1];const p=this.object.learning_object_file.url.replace(this.containUrlName,"imsmanifest.xml");let c=new XMLHttpRequest;c.open("GET",p,!1),c.send();let u=c.responseXML;var _=u.getElementsByTagName("organizations")[0].getElementsByTagName("organization");let A=_[0].getElementsByTagName("title"),Z=_[0].querySelector("item"),C=this.obtainItemValues(Z);this.objectCollectionMenu={title:A[0].textContent,items:C},this.showingManagement(),this.itemsStructure.forEach(b=>{let x=document.getElementById(b.title);const y=u.querySelectorAll('resource[identifier="'+b.id+'"]')[0].getElementsByTagName("file")[0].getAttribute("href");null!=x.textContent&&""!=x.textContent&&(x.onclick=()=>{this.object.learning_object_file.url=this.object.learning_object_file.url.replace(this.containUrlName,y),this.containUrlName=y},x.addEventListener("keydown",O=>{"Enter"===O.key&&(this.object.learning_object_file.url=this.object.learning_object_file.url.replace(this.containUrlName,y),this.containUrlName=y)}))})}obtainItemValues(t){let i=t.querySelector("title");const p=i?i.textContent:"";let c=`<li><a id="${p}" tabindex="0" class="link-ref">${p}`;""!=p&&this.itemsStructure.push({title:p,id:t.getAttribute("identifierref")});const u=t.children;if(u.length>0){c+="<ul>";for(let w=0;w<u.length;w++){let _=this.obtainItemValues(u[w]);null!=_&&(c+=_)}return c+="</ul>",c+="</a></li>",c}}showingManagement(){const t=document.getElementById("jerarquia-container");t&&(t.innerHTML=`<ul>${this.objectCollectionMenu.items}</ul>`)}static#t=this.\u0275fac=function(i){return new(i||m)};static#e=this.\u0275cmp=d.Xpm({type:m,selectors:[["app-drop-down-menu-learning-object"]],inputs:{buttonMenuBoolean:"buttonMenuBoolean",objectCollectionMenu:"objectCollectionMenu",object:"object"},standalone:!0,features:[d.jDz],decls:4,vars:1,consts:[["tabindex","0",1,"container-menu-items"],[2,"font-size","15px"],["id","jerarquia-container"]],template:function(i,p){1&i&&(d.TgZ(0,"div",0)(1,"h1",1),d._uU(2),d.qZA(),d._UZ(3,"div",2),d.qZA()),2&i&&(d.xp6(2),d.hij(" ",p.objectCollectionMenu.title," "))},dependencies:[f.hJ,g.ez],styles:["[_nghost-%COMP%]  li{margin-top:.5em;margin-bottom:.5em}.container-menu-items[_ngcontent-%COMP%]{margin-top:4em;margin-left:2em;margin-right:2em}@media (max-width: 1300px){.container-menu-items[_ngcontent-%COMP%]{padding:10px!important;margin-top:1em!important}}[_nghost-%COMP%]  a{cursor:pointer}"]})}return m})()},5243:(P,h,a)=>{a.r(h),a.d(h,{SecurityModule:()=>Y});var g=a(6895),f=a(7935),d=a(5861),n=a(4006),m=a(5226),v=a.n(m),t=a(6738),i=a(4120),p=a(2111),c=a(8253),u=a(1155),w=a(8611),_=a(2778),A=a(8473),Z=a(9723),C=a(2466);function b(s,l){1&s&&(t.TgZ(0,"small",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij("*",t.lcZ(2,1,"validation.obligatoryCamp"),"*"))}function x(s,l){if(1&s&&(t.TgZ(0,"div"),t.YNc(1,b,3,3,"small",26),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.passwordOld.errors.required)}}function N(s,l){1&s&&(t.TgZ(0,"small",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij("*",t.lcZ(2,1,"security.passError"),"*"))}function y(s,l){1&s&&(t.TgZ(0,"small",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij("*",t.lcZ(2,1,"validation.obligatoryCamp"),"*"))}function O(s,l){1&s&&(t.TgZ(0,"small",33),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"ul",34)(4,"li"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"li"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"li"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"li"),t._uU(14),t.ALo(15,"translate"),t.qZA()()()),2&s&&(t.xp6(1),t.hij("*",t.lcZ(2,5,"validation.passwordEnter"),"* "),t.xp6(4),t.Oqu(t.lcZ(6,7,"validation.passDigit")),t.xp6(3),t.Oqu(t.lcZ(9,9,"validation.passMinu")),t.xp6(3),t.Oqu(t.lcZ(12,11,"validation.passMayu")),t.xp6(3),t.Oqu(t.lcZ(15,13,"validation.passChar")))}function E(s,l){1&s&&(t.TgZ(0,"small",35),t._uU(1,"*La contrase\xf1a no puede ser la misma que la anterior*"),t.qZA())}function S(s,l){if(1&s&&(t.TgZ(0,"div"),t.YNc(1,y,3,3,"small",29),t.YNc(2,O,16,15,"small",30),t.YNc(3,E,2,0,"small",31),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.passwordNew.errors.required),t.xp6(1),t.Q6J("ngIf",e.passwordNew.errors.pattern),t.xp6(1),t.Q6J("ngIf",e.passsword_invalid)}}function U(s,l){1&s&&(t.TgZ(0,"small",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij("*",t.lcZ(2,1,"validation.obligatoryCamp"),"*"))}function I(s,l){if(1&s&&(t.TgZ(0,"div"),t.YNc(1,U,3,3,"small",36),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.passwordAgain.errors.required)}}function L(s,l){1&s&&(t.TgZ(0,"small",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"security.confirmPassError")))}function j(s,l){1&s&&(t.TgZ(0,"small",39),t._uU(1,"*La contrase\xf1a no puede ser la misma que la anterior*"),t.qZA())}const T=function(s){return{"ng-dirty ng-invalid":s}},F=function(s,l){return{"pi-eye":s,"pi-eye-slash":l}};function q(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",11)(3,"label",12),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"br"),t.TgZ(7,"div",11)(8,"label",12),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t._UZ(11,"br"),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t._UZ(16,"br"),t.qZA(),t.TgZ(17,"div",2)(18,"form",13),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.sendPasswordRest())}),t.TgZ(19,"div",11)(20,"div",14),t._UZ(21,"input",15),t.ALo(22,"translate"),t.TgZ(23,"i",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.show2=!r.show2)})("keyup.enter",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.show2=!r.show2)}),t.qZA()(),t.YNc(24,x,2,1,"div",17),t.YNc(25,N,3,3,"small",18),t.qZA(),t._UZ(26,"br"),t.TgZ(27,"div",11)(28,"input",19),t.NdJ("keypress",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.enabled_Password())}),t.ALo(29,"translate"),t.qZA(),t.YNc(30,S,4,3,"div",17),t.qZA(),t._UZ(31,"br"),t.TgZ(32,"div",11)(33,"input",20),t.NdJ("keyup",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.validatorPassword())}),t.ALo(34,"translate"),t.qZA(),t.YNc(35,I,2,1,"div",17),t.YNc(36,L,3,3,"small",21),t.YNc(37,j,2,0,"small",22),t.qZA(),t._UZ(38,"br"),t.TgZ(39,"div",11)(40,"div",23)(41,"button",24),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.resetForm())}),t.qZA(),t._uU(42," \xa0 "),t._UZ(43,"button",25),t.ALo(44,"translate"),t.qZA()()()()()}if(2&s){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,19,"security.oldPass")),t.xp6(5),t.Oqu(t.lcZ(10,21,"security.newPass")),t.xp6(5),t.Oqu(t.lcZ(15,23,"security.againNewPass")),t.xp6(4),t.Q6J("formGroup",e.angForm),t.xp6(3),t.s9C("placeholder",t.lcZ(22,25,"security.oldPass")),t.Q6J("type",e.show2?"text":"password")("ngClass",t.VKq(33,T,e.passwordOld.invalid&&(e.passwordOld.dirty||e.passwordOld.touched)||e.passError)),t.xp6(2),t.Q6J("ngClass",t.WLB(35,F,!e.show2,e.show2)),t.xp6(1),t.Q6J("ngIf",e.passwordOld.invalid&&(e.passwordOld.dirty||e.passwordOld.touched)),t.xp6(1),t.Q6J("ngIf",e.passError),t.xp6(3),t.s9C("placeholder",t.lcZ(29,27,"security.newPass")),t.Q6J("ngClass",t.VKq(38,T,e.passwordNew.invalid&&(e.passwordNew.dirty||e.passwordNew.touched)||e.passsword_invalid)),t.xp6(2),t.Q6J("ngIf",e.passwordNew.invalid&&(e.passwordNew.dirty||e.passwordNew.touched)),t.xp6(3),t.s9C("placeholder",t.lcZ(34,29,"security.againNewPass")),t.Q6J("ngClass",t.VKq(40,T,e.passwordAgain.invalid&&(e.passwordAgain.dirty||e.passwordAgain.touched)||e.passsword_invalid)),t.xp6(2),t.Q6J("ngIf",e.passwordAgain.invalid&&(e.passwordAgain.dirty||e.passwordAgain.touched)),t.xp6(1),t.Q6J("ngIf",!e.flagConfirm&&e.passwordAgain.dirty),t.xp6(1),t.Q6J("ngIf",e.passsword_invalid),t.xp6(6),t.s9C("label",t.lcZ(44,31,"newObject.form.btnSubmit"))}}const J=function(s,l){return{"pi-chevron-right":s,"pi-chevron-down":l}},D=[{path:"",component:(()=>{class s{constructor(e,o,r,M,R){this.fb=e,this.loginService=o,this.messageService=r,this.breadcrumbService=M,this.languageService=R,this.show=!1,this.show2=!1,this.flagConfirm=!1,this.passError=!1,this.subscribes=[],this.passsword_invalid=!1,this.createForm(),this.add_breadcrumb()}ngOnDestroy(){this.subscribes.forEach(e=>{e.unsubscribe()})}ngOnInit(){}add_breadcrumb(){var e=this;return(0,d.Z)(function*(){e.breadcrumbService.setItems([{label:"ROA"},{label:yield e.languageService.translate.get("menu.settings").toPromise()},{label:yield e.languageService.translate.get("menu.sideMenu.security").toPromise(),routerLink:["/settings/security"]}])})()}createForm(){this.angForm=this.fb.group({passwordOld:[this.oldPassword,[n.kI.required]],passwordNew:[{value:this.newPassword,disabled:!1},[n.kI.required,n.kI.pattern("(?=\\D*\\d)(?=[^a-z]*[a-z])(?=[^A-Z]*[A-Z]).{8,30}")]],passwordAgain:[{value:this.againPassword,disabled:!0},[n.kI.required]]})}sendPasswordRest(){var e=this;return(0,d.Z)(function*(){if(e.angForm.valid){if(e.validatorPassword())return void e.showError("La contrase\xf1as no coinciden");e.oldPassword=e.angForm.get("passwordOld").value,e.newPassword=e.angForm.get("passwordNew").value,e.againPassword=e.angForm.get("passwordAgain").value,e.passwords={password:e.newPassword,password2:e.againPassword,old_password:e.oldPassword};let o=yield e.loginService.changePassword(e.passwords,e.loginService.user.id).subscribe(r=>{"Ok"==r.status&&(e.showSuccess("Contrase\xf1a actualizada"),v().fire({allowOutsideClick:!1,icon:"info",text:"Actualizando su contrase\xf1a..."}),v().showLoading(null),e.loginService.signOutPass(),v().close())},r=>{"New password cannot be the same as above."==r.error.details.password[0]&&(e.passsword_invalid=!0,e.showError("La nueva contrase\xf1a no puede ser la misma que la anterior."),e.angForm.controls.passwordNew.markAllAsTouched(),e.angForm.controls.passwordAgain.markAllAsTouched()),"Old password is not correct"==r.error.details.old_password.old_password&&(e.showError("La contrase\xf1a anterior es incorrecta"),e.passError=!0),"Password fields didn't match."==r.error.details.password[0]&&(e.showError("La contrase\xf1a nueva no coincide"),e.passError=!0),"Old password is not correct"==r?.error?.details?.old_password.old_password&&(e.showError("La contrase\xf1a actual es incorrecta"),e.passError=!0)});e.subscribes.push(o)}else e.markTouchForm()})()}showError(e){this.messageService.add({severity:"error",summary:"Error",detail:e})}showSuccess(e){this.messageService.add({severity:"success",summary:"Success",detail:e})}validatorPassword(){return this.angForm.get("passwordNew").value===this.angForm.get("passwordAgain").value?(this.flagConfirm=!0,this.passsword_invalid=!1,!1):(this.flagConfirm=!1,!0)}resetForm(){this.angForm.reset(),this.show=!1}markTouchForm(){Object.values(this.angForm.controls).forEach(e=>{e.markAsTouched()})}get passwordOld(){return this.angForm.get("passwordOld")}get passwordNew(){return this.angForm.get("passwordNew")}get passwordAgain(){return this.angForm.get("passwordAgain")}enabled_Password(){"DISABLED"===this.angForm.get("passwordAgain").status&&null!=this.angForm.get("passwordNew").value&&""!=this.angForm.get("passwordNew").value?this.angForm.controls.passwordAgain.enable():(null===this.angForm.get("passwordNew").value||void 0===this.angForm.get("passwordNew").value||""===this.angForm.get("passwordNew").value)&&this.angForm.controls.passwordAgain.disable()}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(n.QS),t.Y36(i.r),t.Y36(p.ez),t.Y36(c.p),t.Y36(u.T))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-security"]],decls:24,vars:15,consts:[[1,"card"],[1,"p-grid"],[1,"p-col-6"],[1,"title"],["tabindex","0",1,"box","animate__animated","animate__fadeIn"],["loading","lazy","loading","lazy","src","./../../../../../../assets/img/key-Security.png",1,"imgLoad",3,"alt"],[2,"font-size","1.1em","font-weight","bold"],["pButton","",2,"width","100%",3,"label","click"],[1,"pi",3,"ngClass"],["class","p-grid",4,"ngIf"],[1,"hr1"],[1,"forms"],[1,"labelPass"],["autocomplete","off","id","loginForm",3,"formGroup","ngSubmit"],[1,"viewPass"],["id","passwordOldInput","formControlName","passwordOld","aria-describedby","passwordOld passwordOld1","type","password","pInputText","",1,"passPass",3,"type","ngClass","placeholder"],["tabindex","0","aria-label","Ver contrase\xf1a",1,"pi",3,"ngClass","click","keyup.enter"],[4,"ngIf"],["id","passwordOld1","class","p-error",4,"ngIf"],["id","passwordNew","formControlName","passwordNew","aria-describedby","password passwordNewErr passwordNew","key","","type","password","pInputText","",1,"passPass",3,"ngClass","placeholder","keypress"],["id","passwordNewAgain","formControlName","passwordAgain","aria-describedby","passwordAgain passwordOldNo passwordNewErr2","type","password","pInputText","",1,"passPass",3,"ngClass","placeholder","keyup"],["id","passwordOldNo","class","p-error",4,"ngIf"],["id","passwordNewErr2","class","p-error",4,"ngIf"],[1,"butonC"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",3,"click"],["pButton","","pRipple","","type","submit","icon","pi pi-check",3,"label"],["id","passwordOld","class","p-error",4,"ngIf"],["id","passwordOld",1,"p-error"],["id","passwordOld1",1,"p-error"],["id","passwordNew ","class","p-error",4,"ngIf"],["id","password","class","p-error",4,"ngIf"],["id","passwordNewErr","class","p-error",4,"ngIf"],["id","passwordNew ",1,"p-error"],["id","password",1,"p-error"],[1,"p-pl-2","p-ml-2","p-mt-0",2,"line-height","1.5"],["id","passwordNewErr",1,"p-error"],["id","passwordAgain ","class","p-error",4,"ngIf"],["id","passwordAgain ",1,"p-error"],["id","passwordOldNo",1,"p-error"],["id","passwordNewErr2",1,"p-error"]],template:function(o,r){1&o&&(t._UZ(0,"p-toast"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h2",3),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",2)(8,"div",4)(9,"figure"),t._UZ(10,"img",5),t.qZA()()(),t.TgZ(11,"div",2)(12,"label",3)(13,"p",6),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.TgZ(16,"div",2)(17,"button",7),t.NdJ("click",function(){return r.show=!r.show}),t.ALo(18,"translate"),t.TgZ(19,"i",8),t._uU(20," \xa0"),t.qZA()()()(),t._UZ(21,"p-toast"),t.YNc(22,q,45,42,"div",9),t._UZ(23,"div",10),t.qZA()),2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,6,"security.titlePass")),t.xp6(5),t.Q6J("alt","Imagen referente a cambio de contrase\xf1a"),t.xp6(4),t.Oqu(t.lcZ(15,8,"login.labelPassword")),t.xp6(3),t.s9C("label",t.lcZ(18,10,"security.changePass")),t.xp6(2),t.Q6J("ngClass",t.WLB(12,J,!r.show,r.show)),t.xp6(3),t.Q6J("ngIf",r.show))},dependencies:[g.mk,g.O5,n._Y,n.Fj,n.JJ,n.JL,w.Hq,_.o,A.H,Z.FN,n.sg,n.u,C.X$],styles:[".imgLoad[_ngcontent-%COMP%]{width:250px;height:150px}.title[_ngcontent-%COMP%]{text-align:justify}.card[_ngcontent-%COMP%]{box-shadow:1px 1px 5px #00000080;border-radius:10px}.pi[_ngcontent-%COMP%]{padding:0 20px}.p-col-6[_ngcontent-%COMP%]{overflow:hidden}.hr1[_ngcontent-%COMP%]{height:0px;padding:0;margin:5px auto 0;box-shadow:0 0 2px 1px #b1b1b1}.two[_ngcontent-%COMP%]{text-align:end}.labelPass[_ngcontent-%COMP%]{padding:10px}.passPass[_ngcontent-%COMP%]{width:100%}.viewPass[_ngcontent-%COMP%]{position:relative}.viewPass[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:8px;right:10px;padding:5px;cursor:pointer}"]})}return s})(),data:{breadcrumb:null}}];let B=(()=>{class s{static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275mod=t.oAB({type:s});static#s=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(D),f.Bz]})}return s})();var K=a(3807),Q=a(380);let Y=(()=>{class s{static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275mod=t.oAB({type:s});static#s=this.\u0275inj=t.cJS({imports:[g.ez,B,K.K,Q.m,n.UX]})}return s})()}}]);