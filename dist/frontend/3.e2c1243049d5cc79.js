"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[3],{1740:(f,p,n)=>{n.r(p),n.d(p,{VerifyEmailModule:()=>Y});var d=n(6895),m=n(7935),g=n(5861),e=n(6738),v=n(3071),c=n(2111),_=n(8253),s=n(1155),a=n(8611),h=n(4028),y=n(1540),E=n(8473),C=n(9723),T=n(1572);function b(t,l){1&t&&e._UZ(0,"img",11)}const Z=function(){return{width:"100%","margin-bottom":"2em"}};function x(t,l){if(1&t){const i=e.EpF();e.TgZ(0,"div",7)(1,"p-card",8),e.YNc(2,b,1,0,"ng-template",9),e.TgZ(3,"p"),e._uU(4,"\xa1Gracias por unirte a \xe9l Repositorio de Objetos de Aprendizaje ROA!"),e.qZA(),e.TgZ(5,"button",10),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o._router.navigate(["/login"]))}),e.qZA()()()}2&t&&(e.xp6(1),e.Akn(e.DdM(2,Z)))}function A(t,l){1&t&&e._UZ(0,"img",15)}const S=function(){return{width:"100%","margin-bottom":"2em",border:"red 1px solid"}};function M(t,l){if(1&t){const i=e.EpF();e.TgZ(0,"div",12)(1,"p-card",13),e.YNc(2,A,1,0,"ng-template",9),e.TgZ(3,"p"),e._uU(4,"\xa1Existi\xf3 un error al momento de verificar su cuenta!"),e.qZA(),e.TgZ(5,"button",14),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.set_token_user())}),e.qZA()()()}2&t&&(e.xp6(1),e.Akn(e.DdM(2,S)))}function I(t,l){1&t&&e._UZ(0,"img",15)}const F=function(){return{width:"100%","margin-bottom":"2em",border:"green 1px solid"}};function O(t,l){1&t&&(e.TgZ(0,"div",12)(1,"p-card",16),e.YNc(2,I,1,0,"ng-template",9),e._UZ(3,"p-message",17),e.qZA()()),2&t&&(e.xp6(1),e.Akn(e.DdM(2,F)))}function U(t,l){1&t&&(e.TgZ(0,"div",18),e._UZ(1,"p-progressSpinner"),e.qZA())}const V=[{path:"",component:(()=>{class t{constructor(i,r,o,u,N,P){this._activeRoute=i,this._router=r,this._userService=o,this.messageService=u,this.breadcrumbService=N,this.languageService=P,this.state_request=!1,this.state_success=!1,this.state_success_token=!1,this._subcriptions=[],this.email=this._activeRoute.snapshot.params.email,this.token=this._activeRoute.snapshot.params.token,this.add_breadcrumb()}ngOnInit(){this.set_email_token()}set_email_token(){var i=this;return(0,g.Z)(function*(){let r=atob(i.email),o=yield i._userService.sent_email_token_verify(i.token,r).subscribe(u=>{i.state_success=!0},u=>{"Token invalido"==u.error.error?(i._router.navigate(["/notfound"]),i.showError("No se pudo verificar la cuenta")):"Activacion expirada"==u.error.error&&(i.state_request=!0,i.showError("Sesi\xf3n expirada"))});i._subcriptions.push(o)})()}add_breadcrumb(){var i=this;return(0,g.Z)(function*(){i.breadcrumbService.setItems([{label:"ROA"},{label:yield i.languageService.translate.get("menu.sendLink").toPromise(),routerLink:["/login"]}])})()}showError(i){this.messageService.add({severity:"error",summary:"Error",detail:i})}showSuccess(i){this.messageService.add({severity:"success",summary:"Correcto",detail:i})}set_token_user(){let i=this._userService.set_email_verify_new_token(atob(this.email)).subscribe(r=>{200==r.status?(this.state_request=!1,this.state_success_token=!0,this.showSuccess("Se envio un nuevo enlace")):this._router.navigate(["/"])},r=>{this._router.navigate(["/"])});this._subcriptions.push(i)}static#e=this.\u0275fac=function(r){return new(r||t)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(v.K),e.Y36(c.ez),e.Y36(_.p),e.Y36(s.T))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-verify-email"]],decls:9,vars:4,consts:[[1,"login-body","layout-light"],[1,"login-content","animate__animated","animate__fadeIn"],[1,"login-panel"],[1,"login-panel-content"],["class","confirm-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","form-permission",4,"ngIf"],[1,"confirm-message"],["header","Tu cuenta ha sido activada"],["pTemplate","header","style","text-align: center"],["pButton","","pRipple","","type","button","label","Iniciar Sesi\xf3n","icon","pi pi-arrow-right","iconPos","right",1,"p-button-success",3,"click"],["alt","Card","src","assets/img/edutech-icon.png",1,"img-responsive-header"],[1,"error-message"],["header","Error de confirmaci\xf3n"],["pButton","","pRipple","","type","button","label","Enviar nuevo enlace","icon","pi pi-refresh","iconPos","right",1,"p-button-danger",3,"click"],["alt","Card","src","../../../../assets/img/edutech-icon.png",1,"img-responsive-header"],["header","Enviado correctamente"],["severity","success","text","\xa1Se envio un nuevo enlace a tu correo electr\xf3nico con exito!","styleClass","mr-2"],[1,"form-permission"]],template:function(r,o){1&r&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),e.YNc(5,x,6,3,"div",4),e.YNc(6,M,6,3,"div",5),e.YNc(7,O,4,3,"div",5),e.YNc(8,U,2,0,"div",6),e.qZA()()()()),2&r&&(e.xp6(5),e.Q6J("ngIf",o.state_success),e.xp6(1),e.Q6J("ngIf",o.state_request),e.xp6(1),e.Q6J("ngIf",o.state_success_token),e.xp6(1),e.Q6J("ngIf",!o.state_success&&!o.state_success_token&&!o.state_request))},dependencies:[d.O5,c.jx,a.Hq,h.Z,y.q,E.H,C.FN,T.G],styles:["[_nghost-%COMP%]     .p-card-header{text-align:center}.img-responsive-header[_ngcontent-%COMP%]{width:100px;height:auto}p-card[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]     .login-panel{height:70vh!important}"]})}return t})()}];let k=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(V),m.Bz]})}return t})();var D=n(380);let Y=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[d.ez,k,D.m]})}return t})()},3071:(f,p,n)=>{n.d(p,{K:()=>v});var d=n(2340),m=n(6738),g=n(529);const e=d.N.baseUrl;let v=(()=>{class c{constructor(s){this.http=s}getUserDetail(s){return this.http.get(`${e}/user-management/${s}`)}updateUser(s){return this.http.put(`${e}/user-management/${s.id}/`,s)}updateImage(s,a){let h=new FormData;return h.append("image",s),this.http.put(`${e}/user/photo/${a}/`,h)}sent_email_token_verify(s,a){return this.http.get(`${e}/email-verify/`+s+"/"+a)}set_email_verify_new_token(s){return this.http.post(`${e}/set-verify/`,{email:s})}sendContactEmail(s){let a=new FormData;return a.append("name",s.name),a.append("email",s.email),a.append("content",s.message),this.http.post(`${e}/contact-email/`,a)}static#e=this.\u0275fac=function(a){return new(a||c)(m.LFG(g.eN))};static#t=this.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);