(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{lu3c:function(e,r,t){"use strict";t.r(r),t.d(r,"LoginModule",function(){return N});var s=t("ofXK"),a=t("tyNb"),i=t("mrSG"),o=t("3Pt+"),n=t("PSD3"),l=t.n(n),c=t("fXoL"),m=t("DSp3"),b=t("kyOO"),g=t("7zfz"),h=t("EFyh"),d=t("n90K"),u=t("dts7"),p=t("7kUa"),v=t("+YxP"),f=t("Ji6n"),w=t("jIHw"),y=t("sYmb");function O(e,r){1&e&&(c.Ob(0,"small",22),c.Fc(1),c.Zb(2,"translate"),c.Nb()),2&e&&(c.xb(1),c.Gc(c.ac(2,1,"login.errorMsjEmail")))}function E(e,r){1&e&&(c.Ob(0,"small",23),c.Fc(1),c.Zb(2,"translate"),c.Nb()),2&e&&(c.xb(1),c.Gc(c.ac(2,1,"login.errorMsjPassword")))}const F=function(e){return{"ng-dirty":e}},C=function(e,r){return{"pi-eye":e,"pi-eye-slash":r}},k=[{path:"",component:(()=>{class e{constructor(e,r,t,s,a,i,n){this.auth=e,this.router=r,this.fb=t,this.languageService=s,this.messageService=a,this.loginService=i,this.storageService=n,this.subscribes=[],this.show=!1,this.loginForm=this.fb.group({email:[this.storageService.getCookieItem("userEmail")||null,[o.q.required,o.q.pattern("^([a-zA-Z0-9_'-'.]+)@([a-zA-Z0-9_'-'.]+).([a-zA-Z]{2,5})$")]],password:[null,[o.q.required]],rememberMe:[!!this.storageService.getCookieItem("userEmail")]})}ngOnDestroy(){this.subscribes.forEach(e=>{})}ngOnInit(){this.translate=this.languageService.translate,this.translate.onLangChange.subscribe(e=>{this.msjModal=e.translations.login.modalMsj,this.msjError={severity:"error",summary:e.translations.message.titleError,detail:e.translations.login.errorMesage}})}get errorEmailRequired(){var e;return(null===(e=this.loginForm.get("email").errors)||void 0===e?void 0:e.required)&&this.loginForm.get("email").touched}get errorEmailFormat(){var e;return(null===(e=this.loginForm.get("email").errors)||void 0===e?void 0:e.pattern)&&this.loginForm.get("email").touched}get errorPasswordRequired(){var e;return(null===(e=this.loginForm.get("password").errors)||void 0===e?void 0:e.required)&&this.loginForm.get("password").touched}onLogin(){return Object(i.a)(this,void 0,void 0,function*(){if(this.loadTranslateText(),this.messageService.clear(),this.loginForm.valid){l.a.fire({allowOutsideClick:!1,icon:"info",text:this.msjModal}),l.a.showLoading();let e={email:this.loginForm.get("email").value,password:this.loginForm.get("password").value},r=yield this.loginService.signIn(e).subscribe(e=>Object(i.a)(this,void 0,void 0,function*(){if(e.detail)return this.showMessageError(),void l.a.close();this.storageService.saveCookieItem("data_acc",e.access),this.storageService.saveCookieItem("data_ref",e.refresh),yield this.loginService.validateUser(e.access).then(()=>{this.saveEmail(),l.a.close()}).catch(e=>{this.messageService.add({severity:"error",summary:"Server Error",detail:e}),this.showMessageError(),l.a.close()})}),e=>{this.showMessageError(),l.a.close()});this.subscribes.push(r)}else this.markTouchForm()})}markTouchForm(){Object.values(this.loginForm.controls).forEach(e=>{e.markAsTouched()})}loadTranslateText(){let e=this.translate.currentLang;"es"===e?(this.msjModal=this.translate.translations.es.login.modalMsj,this.msjError={severity:"error",summary:this.translate.translations.es.message.titleError,detail:this.translate.translations.es.login.errorMesage}):"en"==e&&(this.msjModal=this.translate.translations.en.login.modalMsj,this.msjError={severity:"error",summary:this.translate.translations.en.message.titleError,detail:this.translate.translations.en.login.errorMesage})}showMessageError(){this.messageService.add(this.msjError)}onSaveEmail(e){e.checked?this.saveEmail():this.storageService.removeCookieItem("userEmail")}saveEmail(){null!==this.loginForm.get("email").value&&""!==this.loginForm.get("email").value?this.storageService.saveCookieItem("userEmail",this.loginForm.get("email").value):(this.markTouchForm(),this.loginForm.controls.rememberMe.setValue(!1))}}return e.\u0275fac=function(r){return new(r||e)(c.Ib(m.a),c.Ib(a.d),c.Ib(o.b),c.Ib(b.a),c.Ib(g.h),c.Ib(h.a),c.Ib(d.a))},e.\u0275cmp=c.Cb({type:e,selectors:[["app-login"]],decls:38,vars:42,consts:[[1,"login-body","layout-light"],[1,"login-content","animate__animated","animate__fadeIn"],[1,"login-panel"],[1,"login-panel-content"],[1,"logo"],["loading","lazy","src","assets/img/image2vector.svg",3,"alt"],["autocomplete","off","id","loginForm",3,"formGroup","ngSubmit"],[1,"forms"],[1,"p-field","p-fluid"],["for","email"],["aria-describedby","email-help","id","email","pInputText","","type","email","name","email","formControlName","email",3,"ngClass","placeholder"],["id","email-help","class","p-error",4,"ngIf"],["for","password"],[1,"viewPass"],["aria-describedby","pass-help","id","password","name","password","formControlName","password","pPassword","",3,"ngClass","type","placeholder","feedback"],["tabindex","0",1,"pi",3,"ngClass","click","keyup.enter"],["id","pass-help","class","p-error",4,"ngIf"],[1,"p-col-12"],["name","checked","id","check","formControlName","rememberMe","value","SaveInfo","binary","true",3,"label","onChange"],[1,"buttons"],["pButton","","type","submit",3,"label"],["href","#/restart-password",1,"secondary-button"],["id","email-help",1,"p-error"],["id","pass-help",1,"p-error"]],template:function(e,r){1&e&&(c.Ob(0,"div",0),c.Ob(1,"div",1),c.Ob(2,"div",2),c.Ob(3,"div",3),c.Ob(4,"div",4),c.Jb(5,"img",5),c.Zb(6,"translate"),c.Nb(),c.Ob(7,"h2"),c.Fc(8),c.Zb(9,"translate"),c.Nb(),c.Jb(10,"p-messages"),c.Ob(11,"form",6),c.Vb("ngSubmit",function(){return r.onLogin()}),c.Ob(12,"div",7),c.Ob(13,"div",8),c.Ob(14,"label",9),c.Fc(15),c.Zb(16,"translate"),c.Nb(),c.Jb(17,"input",10),c.Zb(18,"translate"),c.Dc(19,O,3,3,"small",11),c.Nb(),c.Ob(20,"div",8),c.Ob(21,"label",12),c.Fc(22),c.Zb(23,"translate"),c.Nb(),c.Ob(24,"div",13),c.Jb(25,"input",14),c.Zb(26,"translate"),c.Ob(27,"i",15),c.Vb("click",function(){return r.show=!r.show})("keyup.enter",function(){return r.show=!r.show}),c.Nb(),c.Nb(),c.Dc(28,E,3,3,"small",16),c.Nb(),c.Ob(29,"div",17),c.Ob(30,"p-checkbox",18),c.Vb("onChange",function(e){return r.onSaveEmail(e)}),c.Zb(31,"translate"),c.Nb(),c.Nb(),c.Ob(32,"div",19),c.Jb(33,"button",20),c.Zb(34,"translate"),c.Ob(35,"a",21),c.Fc(36),c.Zb(37,"translate"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.xb(5),c.fc("alt",c.ac(6,17,"menu.altLogo")),c.xb(3),c.Gc(c.ac(9,19,"login.loginTitle")),c.xb(3),c.fc("formGroup",r.loginForm),c.xb(4),c.Gc(c.ac(16,21,"login.labeEmail")),c.xb(2),c.fc("ngClass",c.jc(35,F,r.errorEmailRequired||r.errorEmailFormat))("placeholder",c.ac(18,23,"login.placeholderEmail")),c.xb(2),c.fc("ngIf",r.errorEmailRequired||r.errorEmailFormat),c.xb(3),c.Gc(c.ac(23,25,"login.labelPassword")),c.xb(3),c.fc("ngClass",c.jc(37,F,r.errorPasswordRequired))("type",r.show?"text":"password")("placeholder",c.ac(26,27,"login.placeholderPass"))("feedback",!1),c.xb(2),c.fc("ngClass",c.kc(39,C,!r.show,r.show)),c.xb(1),c.fc("ngIf",r.errorPasswordRequired),c.xb(2),c.fc("label",c.ac(31,29,"login.check")),c.xb(3),c.fc("label",c.ac(34,31,"login.btnLogin")),c.xb(3),c.Hc("",c.ac(37,33,"login.recoverPassword")," "))},directives:[u.a,o.r,o.l,o.f,o.a,p.a,o.k,o.e,s.j,s.l,v.a,f.a,w.b],pipes:[y.c],styles:[".login-content[_ngcontent-%COMP%]{position:relative;height:100vh}.login-content[_ngcontent-%COMP%]   .desert[_ngcontent-%COMP%]{position:absolute;bottom:0}.login-content[_ngcontent-%COMP%]   .login-panel[_ngcontent-%COMP%]{height:100%}.viewPass[_ngcontent-%COMP%]{position:relative}.viewPass[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:8px;right:10px;padding:5px;cursor:pointer}"]}),e})(),data:{breadcrumb:null}}];let M=(()=>{class e{}return e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(r){return new(r||e)},imports:[[a.h.forChild(k)],a.h]}),e})();var x=t("PCNd");let N=(()=>{class e{}return e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(r){return new(r||e)},imports:[[s.b,M,o.o,x.a]]}),e})()}}]);