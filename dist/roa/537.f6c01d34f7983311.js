"use strict";(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[537],{537:(se,Z,o)=>{o.r(Z),o.d(Z,{EditObjectModule:()=>le});var g=o(6895),_=o(7935),p=o(5861),r=o(4006),e=o(6738),U=o(1622),v=o(865),C=o(4112),y=o(2111),x=o(1155),q=o(8253),f=o(8611),j=o(2778),w=o(4642),I=o(8178),O=o(7617),E=o(4146),L=o(2833),N=o(8473),S=o(7734),k=o(9723),F=o(1572),R=o(2712),T=o(2466);let J=(()=>{class a{constructor(t,n,i,l){this.fb=t,this.objectService=n,this.messageService=i,this.languageService=l,this.clouceEvent=new e.vpe,this.updateEvent=new e.vpe,this.subscribes=[]}ngOnInit(){this.loadForm()}ngOnDestroy(){this.subscribes.forEach(t=>{t.unsubscribe()})}loadForm(){this.metadataForm=this.fb.group({general_catalog:[this.object.general_catalog||null],general_coverage:[this.object.general_coverage||null],general_entry:[this.object.general_entry||null],general_keyword:[this.object.general_keyword||null],general_language:[this.object.general_language||null],general_structure:[this.object.general_structure||null],life_cycle_role:[this.object.life_cycle_role||null],life_cycle_version:[this.object.life_cycle_version||null],meta_metadata_catalog:[this.object.meta_metadata_catalog||null],meta_metadata_description:[this.object.meta_metadata_description||null],meta_metadata_dateTime:[this.object.meta_metadata_dateTime||null],technical_description:[this.object.technical_description||null],technical_format:[this.object.technical_format||null],technical_installationRremarks:[this.object.technical_installationRremarks||null],technical_location:[this.object.technical_location||null],educational_description:[this.object.educational_description||null],educational_difficulty:[this.object.educational_difficulty||null],educational_language:[this.object.educational_language||null],educational_learningResourceType:[this.object.educational_learningResourceType||null],educational_procces_cognitve:[this.object.educational_procces_cognitve||null],educational_typicalLearningTime_description:[this.object.educational_typicalLearningTime_description||null],rights_copyrightAndOtherRestrictions:[this.object.rights_copyrightAndOtherRestrictions||null],annotation_date_description:[this.object.annotation_date_description||null],annotation_date_dateTime:[this.object.annotation_date_dateTime||null],annotation_description:[this.object.annotation_description||null],annotation_entity:[this.object.annotation_entity||null],annotation_modeaccess:[this.object.annotation_modeaccess||null],annotation_modeaccesssufficient:[this.object.annotation_modeaccesssufficient||null],relation_catalog:[this.object.relation_catalog||null],relation_description:[this.object.relation_description||null],relation_kind:[this.object.relation_kind||null],relation_entry:[this.object.relation_entry||null],classification_description:[this.object.classification_description||null],classification_keyword:[this.object.classification_keyword||null],classification_purpose:[this.object.classification_purpose||null],classification_taxonPath_source:[this.object.classification_taxonPath_source||null],classification_taxonPath_taxon:[this.object.classification_taxonPath_taxon||null],accesibility_summary:[this.object.accesibility_summary||null],accesibility_features:[this.object.accesibility_features||null],accesibility_hazard:[this.object.accesibility_hazard||null],accesibility_control:[this.object.accesibility_control||null],accesibility_api:[this.object.accesibility_api||null],rights_cost:[this.object.rights_cost||null],annotation_rol:[this.object.annotation_rol||null]})}onEditmetadata(){var t=this;return(0,p.Z)(function*(){let n=t.metadataForm.value;n.id=t.object.id;let i=yield t.objectService.editMetadata(n).subscribe(function(){var l=(0,p.Z)(function*(c){t.updateEvent.emit(!0),t.messageService.add({severity:"success",summary:yield t.languageService.translate.get("newObject.form.success").toPromise(),detail:yield t.languageService.translate.get("object.messageSuccess").toPromise()})});return function(c){return l.apply(this,arguments)}}(),function(){var l=(0,p.Z)(function*(c){t.messageService.add({severity:"error",summary:yield t.languageService.translate.get("newObject.form.alert").toPromise(),detail:yield t.languageService.translate.get("object.messageError").toPromise()})});return function(c){return l.apply(this,arguments)}}());t.subscribes.push(i)})()}onClouceWindow(){this.clouceEvent.emit(!1)}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(r.QS),e.Y36(v.N),e.Y36(y.ez),e.Y36(x.T))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-metadata"]],inputs:{object:"object"},outputs:{clouceEvent:"clouceEvent",updateEvent:"updateEvent"},decls:181,vars:16,consts:[[3,"formGroup","ngSubmit"],[1,"content"],["pInputText","","type","text","formControlName","general_catalog","name","general_catalog"],["pInputText","","type","text","formControlName","general_coverage","name","general_coverage"],["pInputText","","type","text","formControlName","general_entry","name","general_entry"],["pInputText","","type","text","formControlName","general_keyword","name","general_keyword"],["pInputText","","type","text","formControlName","general_language","name","general_language"],["pInputText","","type","text","formControlName","general_structure","name","general_structure"],["layout","horizontal","align","left"],["pInputText","","type","text","formControlName","life_cycle_role","name","life_cycle_role"],["pInputText","","type","text","formControlName","life_cycle_version","name","life_cycle_version"],["pInputText","","type","text","formControlName","meta_metadata_catalog","name","meta_metadata_catalog"],["pInputText","","type","text","formControlName","meta_metadata_description","name","meta_metadata_description"],["pInputText","","type","text","formControlName","technical_description","name","technical_description"],["pInputText","","type","text","formControlName","technical_format","name","technical_format"],["pInputText","","type","text","formControlName","technical_installationRremarks","name","technical_installationRremarks"],["pInputText","","type","text","formControlName","technical_location"],["pInputText","","type","text","formControlName","educational_description","name","educational_description"],["pInputText","","type","text","formControlName","educational_difficulty","name","educational_difficulty"],["pInputText","","type","text","formControlName","educational_language","name","educational_language"],["pInputText","","type","text","formControlName","educational_learningResourceType"],["pInputText","","type","text","formControlName","educational_procces_cognitve","name","educational_procces_cognitve"],["pInputText","","type","text","formControlName","educational_typicalLearningTime_description"],["pInputText","","type","text","formControlName","rights_copyrightAndOtherRestrictions","name","rights_copyrightAndOtherRestrictions"],["pInputText","","type","text","formControlName","rights_cost","name","rights_cost"],["pInputText","","type","text","placeholder","Description","formControlName","annotation_date_description","name","annotation_date_description"],["pInputText","","type","text","placeholder","Date","formControlName","annotation_date_dateTime","name","annotation_date_dateTime"],["pInputText","","type","text","formControlName","annotation_description","name","annotation_description"],["pInputText","","type","text","formControlName","annotation_entity","name","annotation_entity"],["pInputText","","type","text","formControlName","annotation_modeaccess","name","annotation_modeaccess"],["pInputText","","type","text","formControlName","annotation_modeaccesssufficient","name","annotation_modeaccesssufficient"],["pInputText","","type","text","formControlName","annotation_rol","name","annotation_rol"],["pInputText","","type","text","formControlName","relation_catalog","name","relation_catalog"],["pInputText","","type","text","formControlName","relation_description","name","relation_description"],["pInputText","","type","text","formControlName","relation_kind","name","relation_kind"],["pInputText","","type","text","formControlName","relation_entry","name","relation_entry"],["pInputText","","type","text","formControlName","classification_description","name","classification_description"],["pInputText","","type","text","formControlName","classification_keyword","name","classification_keyword"],["pInputText","","type","text","formControlName","classification_purpose","name","classification_purpose"],["pInputText","","type","text","formControlName","classification_taxonPath_source","name","classification_taxonPath_source"],["pInputText","","type","text","formControlName","classification_taxonPath_taxon","name","classification_taxonPath_taxon"],["pInputText","","type","text","formControlName","accesibility_summary","name","accesibility_summary"],["pInputText","","type","text","formControlName","accesibility_features","name","accesibility_features"],["pInputText","","type","text","formControlName","accesibility_hazard","name","accesibility_hazard"],["pInputText","","type","text","formControlName","accesibility_control","name","accesibility_control"],["pInputText","","type","text","formControlName","accesibility_api","name","accesibility_api"],[1,"buttons"],["type","submit","styleClass","p-button-text",3,"label"],["styleClass","p-button-text",3,"label","click"]],template:function(n,i){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.onEditmetadata()}),e.TgZ(1,"div",1)(2,"h6"),e._uU(3,"General"),e.qZA(),e.TgZ(4,"ul")(5,"li"),e._uU(6,"Catalog: "),e._UZ(7,"input",2),e.qZA(),e.TgZ(8,"li"),e._uU(9,"Coverage: "),e._UZ(10,"input",3),e.qZA(),e.TgZ(11,"li"),e._uU(12,"Entry: "),e._UZ(13,"input",4),e.qZA(),e.TgZ(14,"li"),e._uU(15,"Keyword: "),e._UZ(16,"input",5),e.qZA(),e.TgZ(17,"li"),e._uU(18,"Language: "),e._UZ(19,"input",6),e.qZA(),e.TgZ(20,"li"),e._uU(21,"Structure: "),e._UZ(22,"input",7),e.qZA()(),e._UZ(23,"p-divider",8),e.TgZ(24,"h6"),e._uU(25,"Life Cycle"),e.qZA(),e.TgZ(26,"ul")(27,"li")(28,"strong"),e._uU(29),e.qZA(),e._uU(30),e.ALo(31,"date"),e.qZA(),e.TgZ(32,"li"),e._uU(33,"Role: "),e._UZ(34,"input",9),e.qZA(),e.TgZ(35,"li"),e._uU(36,"Version: "),e._UZ(37,"input",10),e.qZA()(),e._UZ(38,"p-divider",8),e.TgZ(39,"h6"),e._uU(40,"Meta-Metadata"),e.qZA(),e.TgZ(41,"ul")(42,"li"),e._uU(43,"Catalog: "),e._UZ(44,"input",11),e.qZA(),e.TgZ(45,"li"),e._uU(46,"Description: "),e._UZ(47,"input",12),e._uU(48),e.ALo(49,"date"),e.qZA()(),e._UZ(50,"p-divider",8),e.TgZ(51,"h6"),e._uU(52,"Technical"),e.qZA(),e.TgZ(53,"ul")(54,"li"),e._uU(55,"Description: "),e._UZ(56,"input",13),e.qZA(),e.TgZ(57,"li"),e._uU(58,"Format: "),e._UZ(59,"input",14),e.qZA(),e.TgZ(60,"li"),e._uU(61,"Installation remarks: "),e._UZ(62,"input",15),e.qZA(),e.TgZ(63,"li"),e._uU(64,"Location: "),e._UZ(65,"input",16),e.qZA()(),e._UZ(66,"p-divider",8),e.TgZ(67,"h6"),e._uU(68,"Educational"),e.qZA(),e.TgZ(69,"ul")(70,"li"),e._uU(71,"Description: "),e._UZ(72,"input",17),e.qZA(),e.TgZ(73,"li"),e._uU(74,"difficulty: "),e._UZ(75,"input",18),e.qZA(),e.TgZ(76,"li"),e._uU(77,"Language: "),e._UZ(78,"input",19),e.qZA(),e.TgZ(79,"li"),e._uU(80,"Learning resource Type: "),e._UZ(81,"input",20),e.qZA(),e.TgZ(82,"li"),e._uU(83,"Procces cognitve: "),e._UZ(84,"input",21),e.qZA(),e.TgZ(85,"li"),e._uU(86,"Description: "),e._UZ(87,"input",22),e.qZA()(),e._UZ(88,"p-divider",8),e.TgZ(89,"h6"),e._uU(90,"Rights"),e.qZA(),e.TgZ(91,"ul")(92,"li"),e._uU(93,"Copyright and Other Restrictions: "),e._UZ(94,"input",23),e.qZA(),e.TgZ(95,"li"),e._uU(96,"Cost: "),e._UZ(97,"input",24),e.qZA()(),e._UZ(98,"p-divider",8),e.TgZ(99,"h6"),e._uU(100,"Annotation"),e.qZA(),e.TgZ(101,"ul")(102,"li"),e._uU(103,"Annotation date: "),e._UZ(104,"input",25),e._uU(105," | "),e._UZ(106,"input",26),e.qZA(),e.TgZ(107,"li"),e._uU(108,"Description: "),e._UZ(109,"input",27),e.qZA(),e.TgZ(110,"li"),e._uU(111,"Entity: "),e._UZ(112,"input",28),e.qZA(),e.TgZ(113,"li"),e._uU(114,"Modeaccess: "),e._UZ(115,"input",29),e.qZA(),e.TgZ(116,"li"),e._uU(117,"Modeaccess sufficient: "),e._UZ(118,"input",30),e.qZA(),e.TgZ(119,"li"),e._uU(120,"Rol: "),e._UZ(121,"input",31),e.qZA()(),e._UZ(122,"p-divider",8),e.TgZ(123,"h6"),e._uU(124,"Relation"),e.qZA(),e.TgZ(125,"ul")(126,"li"),e._uU(127,"Catalog: "),e._UZ(128,"input",32),e.qZA(),e.TgZ(129,"li"),e._uU(130,"Description: "),e._UZ(131,"input",33),e.qZA(),e.TgZ(132,"li"),e._uU(133,"Kind: "),e._UZ(134,"input",34),e.qZA(),e.TgZ(135,"li"),e._uU(136,"Entry: "),e._UZ(137,"input",35),e.qZA()(),e._UZ(138,"p-divider",8),e.TgZ(139,"h6"),e._uU(140,"Classification"),e.qZA(),e.TgZ(141,"ul")(142,"li"),e._uU(143,"Description: "),e._UZ(144,"input",36),e.qZA(),e.TgZ(145,"li"),e._uU(146,"Keyword: "),e._UZ(147,"input",37),e.qZA(),e.TgZ(148,"li"),e._uU(149,"Purpose: "),e._UZ(150,"input",38),e.qZA(),e.TgZ(151,"li"),e._uU(152,"TaxonPath_source: "),e._UZ(153,"input",39),e.qZA(),e.TgZ(154,"li"),e._uU(155,"TaxonPath_taxon: "),e._UZ(156,"input",40),e.qZA()(),e._UZ(157,"p-divider",8),e.TgZ(158,"h6"),e._uU(159,"Accessibility"),e.qZA(),e.TgZ(160,"ul")(161,"li"),e._uU(162,"Summary: "),e._UZ(163,"input",41),e.qZA(),e.TgZ(164,"li"),e._uU(165,"Features: "),e._UZ(166,"input",42),e.qZA(),e.TgZ(167,"li"),e._uU(168,"Hazard: "),e._UZ(169,"input",43),e.qZA(),e.TgZ(170,"li"),e._uU(171,"Control:"),e._UZ(172,"input",44),e.qZA(),e.TgZ(173,"li"),e._uU(174,"Api: "),e._UZ(175,"input",45),e.qZA()()(),e.TgZ(176,"div",46),e._UZ(177,"p-button",47),e.ALo(178,"translate"),e.TgZ(179,"p-button",48),e.NdJ("click",function(){return i.onClouceWindow()}),e.ALo(180,"translate"),e.qZA()()()),2&n&&(e.Q6J("formGroup",i.metadataForm),e.xp6(29),e.hij("",i.object.life_cycle_description||"unknown",": "),e.xp6(1),e.hij(" ",e.xi3(31,6,i.object.life_cycle_dateTime,"medium"),""),e.xp6(18),e.hij(" ",e.xi3(49,9,i.object.meta_metadata_dateTime,"medium"),""),e.xp6(129),e.s9C("label",e.lcZ(178,12,"registesest.btnEvaU")),e.xp6(2),e.s9C("label",e.lcZ(180,14,"register.cancel")))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,f.zx,j.o,R.i,r.sg,r.u,g.uU,T.X$],styles:[".buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}input[_ngcontent-%COMP%]{margin-bottom:5px}"]})}return a})();var M=o(7057);const Q=function(){return{width:"50vw"}};function D(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"p-dialog",50),e.NdJ("visibleChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.displayWindow=i)}),e.TgZ(1,"app-edit-metadata",51),e.NdJ("clouceEvent",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.clouceEvent(i))})("updateEvent",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.updateMetadataEvt(i))}),e.qZA()()}if(2&a){const t=e.oxw(2);e.Akn(e.DdM(6,Q)),e.Q6J("header",t.object.general_title)("visible",t.displayWindow)("baseZIndex",1e4),e.xp6(1),e.Q6J("object",t.object)}}function Y(a,u){1&a&&(e.TgZ(0,"small",52),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"newObject.errors.title")))}function P(a,u){1&a&&(e.TgZ(0,"small",53),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"newObject.errors.description")))}function K(a,u){1&a&&(e.TgZ(0,"small",54),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij("",e.lcZ(2,1,"newObject.errors.keywords")," "))}function z(a,u){1&a&&(e.TgZ(0,"small",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"newObject.errors.educationLevel")))}function V(a,u){1&a&&(e.TgZ(0,"small",56),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"newObject.errors.language")))}function B(a,u){1&a&&(e.TgZ(0,"small",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"newObject.errors.knowledgeArea")))}function G(a,u){1&a&&(e.TgZ(0,"small",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"newObject.errors.license")))}function H(a,u){1&a&&(e.TgZ(0,"small",59),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"newObject.errors.imgHelp")))}function W(a,u){if(1&a&&e._UZ(0,"img",60),2&a){const t=e.oxw(2);e.Q6J("src",t.currentImg,e.LSH)("alt",t.object.general_title)}}const b=function(a){return{"ng-dirty":a}},m=function(a){return{"ng-invalid ng-dirty":a}},A=function(){return{margin:"0 5px"}};function X(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",2,3),e._UZ(2,"iframe",4),e.ALo(3,"translate"),e.ALo(4,"urlsanitizer"),e.YNc(5,D,2,7,"p-dialog",5),e.TgZ(6,"form",6),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(7,"div",7)(8,"label",8),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",9),e.ALo(12,"translate"),e.YNc(13,Y,3,3,"small",10),e.qZA(),e.TgZ(14,"div",7)(15,"label",11),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"textarea",12),e.ALo(19,"translate"),e.YNc(20,P,3,3,"small",13),e.qZA(),e.TgZ(21,"div",7)(22,"label",14),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",15),e.ALo(26,"translate"),e.YNc(27,K,3,3,"small",16),e.qZA(),e.TgZ(28,"div",17)(29,"div",18)(30,"div",19)(31,"div",7)(32,"label",20),e._uU(33),e.ALo(34,"translate"),e.qZA(),e._UZ(35,"p-dropdown",21),e.ALo(36,"translate"),e.YNc(37,z,3,3,"small",22),e.qZA()()(),e.TgZ(38,"div",18)(39,"div",19)(40,"div",7)(41,"label",23),e._uU(42),e.ALo(43,"translate"),e.qZA(),e._UZ(44,"p-dropdown",24),e.ALo(45,"translate"),e.YNc(46,V,3,3,"small",25),e.qZA()()()(),e.TgZ(47,"div",17)(48,"div",18)(49,"div",19)(50,"div",7)(51,"label",26),e._uU(52),e.ALo(53,"translate"),e.qZA(),e._UZ(54,"p-dropdown",27),e.ALo(55,"translate"),e.YNc(56,B,3,3,"small",28),e.qZA()()(),e.TgZ(57,"div",18)(58,"div",19)(59,"div",7)(60,"label",29),e._uU(61),e.ALo(62,"translate"),e.qZA(),e._UZ(63,"p-dropdown",30),e.ALo(64,"translate"),e.YNc(65,G,3,3,"small",31),e.qZA()()()(),e.TgZ(66,"div",17)(67,"div",18)(68,"div",32)(69,"div",33)(70,"label",34),e._uU(71),e.ALo(72,"translate"),e.qZA(),e._UZ(73,"p-slider",35),e.qZA()()(),e.TgZ(74,"div",18)(75,"div",19)(76,"div",7)(77,"label",36),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"div",37)(81,"div",38),e._UZ(82,"p-radioButton",39),e.TgZ(83,"label",40),e._uU(84),e.ALo(85,"translate"),e.qZA()(),e.TgZ(86,"div",38),e._UZ(87,"p-radioButton",41),e.TgZ(88,"label",42),e._uU(89),e.ALo(90,"translate"),e.qZA()()()()()()(),e.TgZ(91,"div",17)(92,"div",18)(93,"div",7)(94,"label",43),e._uU(95),e.ALo(96,"translate"),e.qZA(),e.TgZ(97,"p-fileUpload",44),e.NdJ("onSelect",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.onSelectImage(i))}),e.ALo(98,"translate"),e.ALo(99,"translate"),e.ALo(100,"translate"),e.qZA(),e.YNc(101,H,3,3,"small",45),e.qZA()(),e.TgZ(102,"div",18)(103,"p"),e._uU(104),e.ALo(105,"translate"),e.qZA(),e.YNc(106,W,1,2,"img",46),e.qZA()(),e.TgZ(107,"button",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.navigateTo("settings/my-objects"))}),e.ALo(108,"translate"),e.qZA(),e._UZ(109,"button",48),e.ALo(110,"translate"),e.TgZ(111,"p-button",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showBasicDialog2())}),e.ALo(112,"translate"),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("title",e.lcZ(3,67,"object.titleIframe"))("src",e.lcZ(4,69,t.currentFile.url),e.uOi),e.xp6(3),e.Q6J("ngIf",t.object&&t.displayWindow),e.xp6(1),e.Q6J("formGroup",t.objectForm),e.xp6(3),e.hij("",e.lcZ(10,71,"newObject.form.titleLabel"),"*"),e.xp6(2),e.Q6J("ngClass",e.VKq(123,b,t.getErrorFormRequired("general_title")))("placeholder",e.lcZ(12,73,"newObject.form.title")),e.xp6(2),e.Q6J("ngIf",t.getErrorFormRequired("general_title")),e.xp6(3),e.hij("",e.lcZ(17,75,"newObject.form.descriptionLabel"),"*"),e.xp6(2),e.Q6J("ngClass",e.VKq(125,b,t.getErrorFormRequired("general_description")))("placeholder",e.lcZ(19,77,"newObject.form.description")),e.xp6(2),e.Q6J("ngIf",t.getErrorFormRequired("general_description")),e.xp6(3),e.hij("",e.lcZ(24,79,"newObject.form.keywordsLabel"),"*"),e.xp6(2),e.Q6J("ngClass",e.VKq(127,m,t.getErrorFormRequired("general_keyword")))("placeholder",e.lcZ(26,81,"newObject.form.keywords")),e.xp6(2),e.Q6J("ngIf",t.getErrorFormRequired("general_keyword")),e.xp6(6),e.hij("",e.lcZ(34,83,"newObject.form.educationLevelLabel"),"*"),e.xp6(2),e.Q6J("ngClass",e.VKq(129,m,t.getErrorFormRequired("education_levels")))("options",t.educationLevels)("placeholder",e.lcZ(36,85,"newObject.form.educationLevel"))("showClear",!0),e.xp6(2),e.Q6J("ngIf",t.getErrorFormRequired("education_levels")),e.xp6(5),e.hij("",e.lcZ(43,87,"newObject.form.languageLabel"),"*"),e.xp6(2),e.Q6J("ngClass",e.VKq(131,m,t.getErrorFormRequired("general_language")))("options",t.language)("placeholder",e.lcZ(45,89,"newObject.form.language"))("showClear",!0),e.xp6(2),e.Q6J("ngIf",t.getErrorFormRequired("general_language")),e.xp6(6),e.hij("",e.lcZ(53,91,"newObject.form.knowledgeAreaLabel"),"*"),e.xp6(2),e.Q6J("ngClass",e.VKq(133,m,t.getErrorFormRequired("knowledge_area")))("options",t.knowledgeArea)("placeholder",e.lcZ(55,93,"newObject.form.knowledgeArea"))("showClear",!0),e.xp6(2),e.Q6J("ngIf",t.getErrorFormRequired("knowledge_area")),e.xp6(5),e.hij("",e.lcZ(62,95,"newObject.form.licenseLabel"),"*"),e.xp6(2),e.Q6J("ngClass",e.VKq(135,m,t.getErrorFormRequired("license")))("options",t.licenses)("placeholder",e.lcZ(64,97,"newObject.form.license"))("showClear",!0),e.xp6(2),e.Q6J("ngIf",t.getErrorFormRequired("license")),e.xp6(6),e.AsE("",e.lcZ(72,99,"newObject.form.ageLabel"),": ",(null==t.objectForm.controls.educational_typicalAgeRange?null:t.objectForm.controls.educational_typicalAgeRange.value[0])+" - "+(null==t.objectForm.controls.educational_typicalAgeRange?null:t.objectForm.controls.educational_typicalAgeRange.value[1]),""),e.xp6(2),e.Q6J("min",5)("max",150)("range",!0),e.xp6(5),e.hij("",e.lcZ(79,101,"newObject.form.adaptationsLabel"),"*"),e.xp6(4),e.Q6J("ngClass",e.VKq(137,b,t.getErrorFormRequired("adaptation"))),e.xp6(2),e.Oqu(e.lcZ(85,103,"newObject.form.adaptationsYes")),e.xp6(3),e.Q6J("ngClass",e.VKq(139,b,t.getErrorFormRequired("adaptation"))),e.xp6(2),e.Oqu(e.lcZ(90,105,"newObject.form.adaptationsNo")),e.xp6(6),e.Oqu(e.lcZ(96,107,"newObject.form.imgLabel")),e.xp6(2),e.Q6J("chooseLabel",e.lcZ(98,109,"newObject.form.imgSelect"))("showUploadButton",!1)("cancelLabel",e.lcZ(99,111,"newObject.form.imgCancel"))("invalidFileTypeMessageDetail",e.lcZ(100,113,"newObject.errors.img"))("multiple",!1),e.xp6(4),e.Q6J("ngIf",t.getErrorFormRequired("avatar")),e.xp6(3),e.Oqu(e.lcZ(105,115,"object.imgCurrent")),e.xp6(2),e.Q6J("ngIf",t.currentImg),e.xp6(1),e.Akn(e.DdM(141,A)),e.Q6J("label",e.lcZ(108,117,"newObject.form.imgCancel")),e.xp6(2),e.Q6J("disabled",t.loading)("label",e.lcZ(110,119,"newObject.form.btnSubmit")),e.xp6(2),e.Akn(e.DdM(142,A)),e.Q6J("label",e.lcZ(112,121,"newObject.form.btnShowMetadata"))}}function $(a,u){1&a&&(e.TgZ(0,"p"),e._uU(1,"Guardando..."),e.qZA())}const ee=function(){return{width:"100px",height:"100px"}};function te(a,u){if(1&a&&(e.TgZ(0,"div",61),e._UZ(1,"p-progressSpinner",62),e.YNc(2,$,2,0,"p",63),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Akn(e.DdM(3,ee)),e.xp6(1),e.Q6J("ngIf",t.editData)}}const ae=[{path:"",redirectTo:"/settings/my-objects",pathMatch:"full",data:{breadcrumb:null}},{path:":slug",component:(()=>{class a{constructor(t,n,i,l,c,h,d,s,re){this.tokenService=t,this.fb=n,this.route=i,this.objectService=l,this.searchService=c,this.router=h,this.messageService=d,this.languageService=s,this.breadcrumbService=re,this.subscribes=[],this.editData=!1,this.loading=!1,this.language=[{name:"Espa\xf1ol",code:"es"},{name:"Ingles",code:"en"}],this.route.params.subscribe(ce=>{this.getObjectDetail(Number(ce.slug))}),this.add_breadcrumb()}ngOnInit(){this.loading=!0,this.loadData()}ngOnDestroy(){this.subscribes.forEach(t=>{t.unsubscribe()})}add_breadcrumb(){var t=this;return(0,p.Z)(function*(){t.breadcrumbService.setItems([{label:"ROA"},{label:yield t.languageService.translate.get("menu.settings").toPromise()},{label:yield t.languageService.translate.get("menu.editOa").toPromise(),routerLink:["/settings/my-objects"]}])})()}getObjectDetail(t){var n=this;return(0,p.Z)(function*(){let i=yield n.objectService.getObjectDetailById(t).subscribe(l=>{n.object=l,n.currentFile=l.learning_object_file,n.currentImg=l.avatar,n.loadForm(),n.loading=!1},l=>{console.log("err",l),n.router.navigateByUrl("/settings/my-objects")});n.subscribes.push(i)})()}loadData(){var t=this;return(0,p.Z)(function*(){let n=yield t.tokenService.refreshToken().subscribe(d=>{}),i=yield t.searchService.getPreferences().subscribe(d=>{t.preferencesData=d.map(s=>({name:s.description,code:s.id}))}),l=yield t.searchService.getLevelEducation().subscribe(d=>{t.educationLevels=d.values.map(s=>({name:s.name,code:s.id}))}),c=yield t.searchService.getInterestAreas().subscribe(d=>{t.knowledgeArea=d.values.map(s=>({name:s.name,code:s.id}))}),h=yield t.searchService.getLicenses().subscribe(d=>{t.licenses=d.values.map(s=>({name:s.name,code:s.id}))});t.subscribes.push(n,i,l,c,h)})()}loadForm(){this.objectForm=this.fb.group({general_title:[this.object?.general_title||null,[r.kI.required]],general_description:[this.object?.general_description||null,[r.kI.required]],general_keyword:[this.object?.general_keyword||null,[r.kI.required]],education_levels:[this.object?.education_levels.id||null,[r.kI.required]],general_language:[this.object?.general_language||null,[r.kI.required]],knowledge_area:[this.object?.knowledge_area.id||null,[r.kI.required]],license:[this.object?.license.id||null,[r.kI.required]],adaptation:[this.object?.adaptation||"yes",[r.kI.required]],educational_typicalAgeRange:[this.getRageAge(),[r.kI.required,r.kI.min(5),r.kI.max(150)]],avatar:[null]})}getRageAge(){if(this.object.educational_typicalAgeRange){let t=this.object?.educational_typicalAgeRange.split("-");return 2===t?.length?t.map(n=>parseInt(n)):[5,100]}return[5,100]}getErrorFormRequired(t){return this.objectForm.get(t).hasError("required")&&this.objectForm.get(t).touched}onSubmit(){var t=this;return(0,p.Z)(function*(){if(t.objectForm.valid){t.editData=!0,t.loading=!0;let n=t.objectForm.value;n.id=t.object.id,n.educational_typicalAgeRange=`${t.objectForm.value.educational_typicalAgeRange[0]}-${t.objectForm.value.educational_typicalAgeRange[1]}`,t.objectForm.value.avatar||delete n.avatar;let i=yield t.objectService.editMetadata(n).subscribe(function(){var l=(0,p.Z)(function*(c){t.object=c,t.currentImg=c.avatar,t.messageService.add({severity:"success",summary:yield t.languageService.translate.get("newObject.form.success").toPromise(),detail:yield t.languageService.translate.get("object.messageSuccess").toPromise()}),t.file=null,t.loading=!1,t.editData=!1});return function(c){return l.apply(this,arguments)}}(),function(){var l=(0,p.Z)(function*(c){console.log("err",c),t.messageService.add({severity:"error",summary:yield t.languageService.translate.get("newObject.form.alert").toPromise(),detail:yield t.languageService.translate.get("object.messageError").toPromise()}),t.loading=!1});return function(c){return l.apply(this,arguments)}}());t.subscribes.push(i)}else t.markTouchForm()})()}markTouchForm(){Object.values(this.objectForm.controls).forEach(t=>{t.markAsTouched()})}onSelectImage(t){this.objectForm.patchValue({avatar:t.currentFiles[0]})}showBasicDialog2(){this.displayWindow=!0}navigateTo(t){this.router.navigate([t])}clouceEvent(t){this.displayWindow=t}updateMetadataEvt(t){t&&this.getObjectDetail(this.object.id)}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(U.B),e.Y36(r.QS),e.Y36(_.gz),e.Y36(v.N),e.Y36(C.o),e.Y36(_.F0),e.Y36(y.ez),e.Y36(x.T),e.Y36(q.p))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-object"]],decls:3,vars:2,consts:[["class","web-view animate__animated animate__fadeIn",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"web-view","animate__animated","animate__fadeIn"],["webView",""],["frameborder","0","allowfullscreen","",1,"frame-object",3,"title","src"],[3,"header","visible","style","baseZIndex","visibleChange",4,"ngIf"],[1,"animate__animated","animate__fadeIn",3,"formGroup","ngSubmit"],[1,"p-field","p-fluid"],["for","title"],["aria-describedby","title-help","pInputText","","name","general_title","type","text","formControlName","general_title","id","title",3,"ngClass","placeholder"],["id","title-help","class","p-error",4,"ngIf"],["for","description"],["rows","10","pInputTextarea","","name","general_description","formControlName","general_description","id","description","aria-describedby","description-help",3,"ngClass","placeholder"],["id","description-help","class","p-error",4,"ngIf"],["for","keywords"],["aria-describedby","keywords-help","pInputText","","type","text","formControlName","general_keyword","id","keywords","name","general_keyword",3,"ngClass","placeholder"],["id","keywords-help","class","p-error",4,"ngIf"],[1,"p-grid"],[1,"p-col-12","p-md-6","p-lg-6"],[1,"box","sidebar"],["for","level"],["id","level","aria-describedby","level-help","formControlName","education_levels","optionLabel","name","optionValue","code",3,"ngClass","options","placeholder","showClear"],["id","level-help","class","p-error",4,"ngIf"],["for","language"],["id","language","aria-describedby","language-help","formControlName","general_language","optionLabel","name","optionValue","code",3,"ngClass","options","placeholder","showClear"],["id","language-help","class","p-error",4,"ngIf"],["for","knowledgeArea"],["id","knowledgeArea","aria-describedby","knowledgeArea-help","formControlName","knowledge_area","optionLabel","name","optionValue","code",3,"ngClass","options","placeholder","showClear"],["id","knowledgeArea-help","class","p-error",4,"ngIf"],["for","license"],["id","license","aria-describedby","license-help","formControlName","license","optionLabel","name","optionValue","code",3,"ngClass","options","placeholder","showClear"],["id","license-help","class","p-error",4,"ngIf"],[1,"box","content"],[1,"p-field","p-fluid","slider"],["for","Correo"],["formControlName","educational_typicalAgeRange","name","educational_typicalAgeRange",3,"min","max","range"],["for","adaptations"],[1,"radio-buttons"],[1,"p-field-radiobutton"],["aria-describedby","adaptations-help","name","adaptation","formControlName","adaptation","inputId","yes","value","yes",3,"ngClass"],["for","yes"],["aria-describedby","adaptations-help","name","adaptation","value","no","formControlName","adaptation","inputId","no",3,"ngClass"],["for","no"],["for","fileImage"],["id","fileImage","name","fileImage","accept","image/*","aria-describedby","img-help",3,"chooseLabel","showUploadButton","cancelLabel","invalidFileTypeMessageDetail","multiple","onSelect"],["id","img-help","class","p-error",4,"ngIf"],["class","avatar-object",3,"src","alt",4,"ngIf"],["pButton","","pRipple","","type","submit",1,"p-button-danger",3,"label","click"],["pButton","","pRipple","","type","submit",1,"p-button-success",3,"disabled","label"],["icon","pi pi-external-link",3,"label","click"],[3,"header","visible","baseZIndex","visibleChange"],[3,"object","clouceEvent","updateEvent"],["id","title-help",1,"p-error"],["id","description-help",1,"p-error"],["id","keywords-help",1,"p-error"],["id","level-help",1,"p-error"],["id","language-help",1,"p-error"],["id","knowledgeArea-help",1,"p-error"],["id","license-help",1,"p-error"],["id","img-help",1,"p-error"],[1,"avatar-object",3,"src","alt"],[1,"spinner"],["styleClass","custom-spinner","strokeWidth","4","fill","#EEEEEE","animationDuration",".5s"],[4,"ngIf"]],template:function(n,i){1&n&&(e.YNc(0,X,113,143,"div",0),e.YNc(1,te,3,4,"div",1),e._UZ(2,"p-toast")),2&n&&(e.Q6J("ngIf",i.object&&!i.loading),e.xp6(1),e.Q6J("ngIf",i.loading))},dependencies:[g.mk,g.O5,r._Y,r.Fj,r.JJ,r.JL,f.Hq,f.zx,j.o,w.V,I.Lt,O.p,E.g,L.EU,N.H,S.iR,k.FN,F.G,r.sg,r.u,J,M.z,T.X$],styles:[".frame-object[_ngcontent-%COMP%]{width:100%;height:50vh}.avatar-object[_ngcontent-%COMP%]{width:100%}@media (max-width: 700px){[_nghost-%COMP%]     .p-dialog{width:95vw!important}}"]})}return a})(),data:{breadcrumb:null}}];let ne=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275mod=e.oAB({type:a});static#a=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(ae),_.Bz]})}return a})();var ie=o(380),oe=o(8763);let le=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275mod=e.oAB({type:a});static#a=this.\u0275inj=e.cJS({imports:[g.ez,ne,ie.m,r.UX,oe.K]})}return a})()}}]);