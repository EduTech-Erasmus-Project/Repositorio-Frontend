!function(){function s(s,a){for(var r=0;r<a.length;r++){var e=a[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}function a(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{QGhL:function(s,r,e){"use strict";e.d(r,"a",function(){return c});var t=e("ofXK"),o=e("PCNd"),n=e("3Pt+"),i=e("sYmb"),d=e("fXoL"),c=function(){var s=function s(){a(this,s)};return s.\u0275mod=d.Gb({type:s}),s.\u0275inj=d.Fb({factory:function(a){return new(a||s)},imports:[[t.b,o.a,n.o,i.b]]}),s}()},icYe:function(r,e,t){"use strict";t.r(e),t.d(e,"SecurityModule",function(){return T});var o=t("ofXK"),n=t("tyNb"),i=t("mrSG"),d=t("3Pt+"),c=t("PSD3"),l=t.n(c),b=t("fXoL"),p=t("EFyh"),u=t("7zfz"),w=t("57Ks"),g=t("kyOO"),f=t("Gxio"),h=t("jIHw"),v=t("7kUa"),m=t("Q4Mo"),O=t("sYmb");function N(s,a){1&s&&(b.Ob(0,"small",26),b.Gc(1),b.Zb(2,"translate"),b.Nb()),2&s&&(b.xb(1),b.Ic("*",b.ac(2,1,"validation.obligatoryCamp"),"*"))}function y(s,a){if(1&s&&(b.Ob(0,"div"),b.Ec(1,N,3,3,"small",25),b.Nb()),2&s){var r=b.Yb(2);b.xb(1),b.fc("ngIf",r.passwordOld.errors.required)}}function x(s,a){1&s&&(b.Ob(0,"small",27),b.Gc(1),b.Zb(2,"translate"),b.Nb()),2&s&&(b.xb(1),b.Ic("*",b.ac(2,1,"security.passError"),"*"))}function P(s,a){1&s&&(b.Ob(0,"small",31),b.Gc(1),b.Zb(2,"translate"),b.Nb()),2&s&&(b.xb(1),b.Ic("*",b.ac(2,1,"validation.obligatoryCamp"),"*"))}function k(s,a){1&s&&(b.Ob(0,"small",32),b.Gc(1),b.Zb(2,"translate"),b.Ob(3,"ul",33),b.Ob(4,"li"),b.Gc(5),b.Zb(6,"translate"),b.Nb(),b.Ob(7,"li"),b.Gc(8),b.Zb(9,"translate"),b.Nb(),b.Ob(10,"li"),b.Gc(11),b.Zb(12,"translate"),b.Nb(),b.Ob(13,"li"),b.Gc(14),b.Zb(15,"translate"),b.Nb(),b.Nb(),b.Nb()),2&s&&(b.xb(1),b.Ic("*",b.ac(2,5,"validation.passwordEnter"),"* "),b.xb(4),b.Hc(b.ac(6,7,"validation.passDigit")),b.xb(3),b.Hc(b.ac(9,9,"validation.passMinu")),b.xb(3),b.Hc(b.ac(12,11,"validation.passMayu")),b.xb(3),b.Hc(b.ac(15,13,"validation.passChar")))}function C(s,a){1&s&&(b.Ob(0,"small",34),b.Gc(1,"*La contrase\xf1a no puede ser la misma que la anterior*"),b.Nb())}function I(s,a){if(1&s&&(b.Ob(0,"div"),b.Ec(1,P,3,3,"small",28),b.Ec(2,k,16,15,"small",29),b.Ec(3,C,2,0,"small",30),b.Nb()),2&s){var r=b.Yb(2);b.xb(1),b.fc("ngIf",r.passwordNew.errors.required),b.xb(1),b.fc("ngIf",r.passwordNew.errors.pattern),b.xb(1),b.fc("ngIf",r.passsword_invalid)}}function E(s,a){1&s&&(b.Ob(0,"small",36),b.Gc(1),b.Zb(2,"translate"),b.Nb()),2&s&&(b.xb(1),b.Ic("*",b.ac(2,1,"validation.obligatoryCamp"),"*"))}function F(s,a){if(1&s&&(b.Ob(0,"div"),b.Ec(1,E,3,3,"small",35),b.Nb()),2&s){var r=b.Yb(2);b.xb(1),b.fc("ngIf",r.passwordAgain.errors.required)}}function A(s,a){1&s&&(b.Ob(0,"small",37),b.Gc(1),b.Zb(2,"translate"),b.Nb()),2&s&&(b.xb(1),b.Hc(b.ac(2,1,"security.confirmPassError")))}function _(s,a){1&s&&(b.Ob(0,"small",38),b.Gc(1,"*La contrase\xf1a no puede ser la misma que la anterior*"),b.Nb())}var G=function(s){return{"ng-dirty ng-invalid":s}},S=function(s,a){return{"pi-eye":s,"pi-eye-slash":a}};function Z(s,a){if(1&s){var r=b.Pb();b.Ob(0,"div",1),b.Ob(1,"div",2),b.Ob(2,"div",10),b.Ob(3,"label",11),b.Gc(4),b.Zb(5,"translate"),b.Nb(),b.Nb(),b.Jb(6,"br"),b.Ob(7,"div",10),b.Ob(8,"label",11),b.Gc(9),b.Zb(10,"translate"),b.Nb(),b.Nb(),b.Jb(11,"br"),b.Ob(12,"div",10),b.Ob(13,"label",11),b.Gc(14),b.Zb(15,"translate"),b.Nb(),b.Nb(),b.Jb(16,"br"),b.Nb(),b.Ob(17,"div",2),b.Ob(18,"form",12),b.Vb("ngSubmit",function(){return b.uc(r),b.Yb().sendPasswordRest()}),b.Ob(19,"div",10),b.Ob(20,"div",13),b.Jb(21,"input",14),b.Zb(22,"translate"),b.Ob(23,"i",15),b.Vb("click",function(){b.uc(r);var s=b.Yb();return s.show2=!s.show2})("keyup.enter",function(){b.uc(r);var s=b.Yb();return s.show2=!s.show2}),b.Nb(),b.Nb(),b.Ec(24,y,2,1,"div",16),b.Ec(25,x,3,3,"small",17),b.Nb(),b.Jb(26,"br"),b.Ob(27,"div",10),b.Ob(28,"input",18),b.Vb("keypress",function(){return b.uc(r),b.Yb().enabled_Password()}),b.Zb(29,"translate"),b.Nb(),b.Ec(30,I,4,3,"div",16),b.Nb(),b.Jb(31,"br"),b.Ob(32,"div",10),b.Ob(33,"input",19),b.Vb("keyup",function(){return b.uc(r),b.Yb().validatorPassword()}),b.Zb(34,"translate"),b.Nb(),b.Ec(35,F,2,1,"div",16),b.Ec(36,A,3,3,"small",20),b.Ec(37,_,2,0,"small",21),b.Nb(),b.Jb(38,"br"),b.Ob(39,"div",10),b.Ob(40,"div",22),b.Ob(41,"button",23),b.Vb("click",function(){return b.uc(r),b.Yb().resetForm()}),b.Nb(),b.Gc(42," \xa0 "),b.Jb(43,"button",24),b.Zb(44,"translate"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()}if(2&s){var e=b.Yb();b.xb(4),b.Hc(b.ac(5,19,"security.oldPass")),b.xb(5),b.Hc(b.ac(10,21,"security.newPass")),b.xb(5),b.Hc(b.ac(15,23,"security.againNewPass")),b.xb(4),b.fc("formGroup",e.angForm),b.xb(3),b.gc("placeholder",b.ac(22,25,"security.oldPass")),b.fc("type",e.show2?"text":"password")("ngClass",b.jc(33,G,e.passwordOld.invalid&&(e.passwordOld.dirty||e.passwordOld.touched)||e.passError)),b.xb(2),b.fc("ngClass",b.kc(35,S,!e.show2,e.show2)),b.xb(1),b.fc("ngIf",e.passwordOld.invalid&&(e.passwordOld.dirty||e.passwordOld.touched)),b.xb(1),b.fc("ngIf",e.passError),b.xb(3),b.gc("placeholder",b.ac(29,27,"security.newPass")),b.fc("ngClass",b.jc(38,G,e.passwordNew.invalid&&(e.passwordNew.dirty||e.passwordNew.touched)||e.passsword_invalid)),b.xb(2),b.fc("ngIf",e.passwordNew.invalid&&(e.passwordNew.dirty||e.passwordNew.touched)),b.xb(3),b.gc("placeholder",b.ac(34,29,"security.againNewPass")),b.fc("ngClass",b.jc(40,G,e.passwordAgain.invalid&&(e.passwordAgain.dirty||e.passwordAgain.touched)||e.passsword_invalid)),b.xb(2),b.fc("ngIf",e.passwordAgain.invalid&&(e.passwordAgain.dirty||e.passwordAgain.touched)),b.xb(1),b.fc("ngIf",!e.flagConfirm&&e.passwordAgain.dirty),b.xb(1),b.fc("ngIf",e.passsword_invalid),b.xb(6),b.gc("label",b.ac(44,31,"newObject.form.btnSubmit"))}}var M,L,j,J=function(s,a){return{"pi-chevron-right":s,"pi-chevron-down":a}},Y=[{path:"",component:(M=function(){function r(s,e,t,o,n){a(this,r),this.fb=s,this.loginService=e,this.messageService=t,this.breadcrumbService=o,this.languageService=n,this.show=!1,this.show2=!1,this.flagConfirm=!1,this.passError=!1,this.subscribes=[],this.passsword_invalid=!1,this.createForm(),this.add_breadcrumb()}var e,t,o;return e=r,(t=[{key:"ngOnDestroy",value:function(){this.subscribes.forEach(function(s){s.unsubscribe()})}},{key:"ngOnInit",value:function(){}},{key:"add_breadcrumb",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=this.breadcrumbService,s.t1={label:"ROA"},s.next=4,this.languageService.translate.get("menu.settings").toPromise();case 4:return s.t2=s.sent,s.t3={label:s.t2},s.next=8,this.languageService.translate.get("menu.sideMenu.security").toPromise();case 8:s.t4=s.sent,s.t5=["/settings/security"],s.t6={label:s.t4,routerLink:s.t5},s.t7=[s.t1,s.t3,s.t6],s.t0.setItems.call(s.t0,s.t7);case 13:case"end":return s.stop()}},s,this)}))}},{key:"createForm",value:function(){this.angForm=this.fb.group({passwordOld:[this.oldPassword,[d.r.required]],passwordNew:[{value:this.newPassword,disabled:!1},[d.r.required,d.r.pattern("(?=\\D*\\d)(?=[^a-z]*[a-z])(?=[^A-Z]*[A-Z]).{8,30}")]],passwordAgain:[{value:this.againPassword,disabled:!0},[d.r.required]]})}},{key:"sendPasswordRest",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark(function s(){var a,r=this;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.angForm.valid){s.next=10;break}if(!this.validatorPassword()){s.next=3;break}return s.abrupt("return",void this.showError("La contrase\xf1as no coinciden"));case 3:return this.oldPassword=this.angForm.get("passwordOld").value,this.newPassword=this.angForm.get("passwordNew").value,this.againPassword=this.angForm.get("passwordAgain").value,this.passwords={password:this.newPassword,password2:this.againPassword,old_password:this.oldPassword},s.next=6,this.loginService.changePassword(this.passwords,this.loginService.user.id).subscribe(function(s){"Ok"==s.status&&(r.showSuccess("Contrase\xf1a actualizada"),l.a.fire({allowOutsideClick:!1,icon:"info",text:"Actualizando su contrase\xf1a..."}),l.a.showLoading(),r.loginService.signOutPass(),l.a.close())},function(s){var a,e;"New password cannot be the same as above."==s.error.details.password[0]&&(r.passsword_invalid=!0,r.showError("La nueva contrase\xf1a no puede ser la misma que la anterior."),r.angForm.controls.passwordNew.markAllAsTouched(),r.angForm.controls.passwordAgain.markAllAsTouched()),"Old password is not correct"==s.error.details.old_password.old_password&&(r.showError("La contrase\xf1a anterior es incorrecta"),r.passError=!0),"Password fields didn't match."==s.error.details.password[0]&&(r.showError("La contrase\xf1a nueva no coincide"),r.passError=!0),"Old password is not correct"==(null===(e=null===(a=null==s?void 0:s.error)||void 0===a?void 0:a.details)||void 0===e?void 0:e.old_password.old_password)&&(r.showError("La contrase\xf1a actual es incorrecta"),r.passError=!0)});case 6:a=s.sent,this.subscribes.push(a),s.next=11;break;case 10:this.markTouchForm();case 11:case"end":return s.stop()}},s,this)}))}},{key:"showError",value:function(s){this.messageService.add({severity:"error",summary:"Error",detail:s})}},{key:"showSuccess",value:function(s){this.messageService.add({severity:"success",summary:"Success",detail:s})}},{key:"validatorPassword",value:function(){return this.angForm.get("passwordNew").value===this.angForm.get("passwordAgain").value?(this.flagConfirm=!0,this.passsword_invalid=!1,!1):(this.flagConfirm=!1,!0)}},{key:"resetForm",value:function(){this.angForm.reset(),this.show=!1}},{key:"markTouchForm",value:function(){Object.values(this.angForm.controls).forEach(function(s){s.markAsTouched()})}},{key:"passwordOld",get:function(){return this.angForm.get("passwordOld")}},{key:"passwordNew",get:function(){return this.angForm.get("passwordNew")}},{key:"passwordAgain",get:function(){return this.angForm.get("passwordAgain")}},{key:"enabled_Password",value:function(){"DISABLED"===this.angForm.get("passwordAgain").status&&null!=this.angForm.get("passwordNew").value&&""!=this.angForm.get("passwordNew").value?this.angForm.controls.passwordAgain.enable():null!==this.angForm.get("passwordNew").value&&void 0!==this.angForm.get("passwordNew").value&&""!==this.angForm.get("passwordNew").value||this.angForm.controls.passwordAgain.disable()}}])&&s(e.prototype,t),o&&s(e,o),r}(),M.\u0275fac=function(s){return new(s||M)(b.Ib(d.b),b.Ib(p.a),b.Ib(u.h),b.Ib(w.a),b.Ib(g.a))},M.\u0275cmp=b.Cb({type:M,selectors:[["app-security"]],decls:24,vars:15,consts:[[1,"card"],[1,"p-grid"],[1,"p-col-6"],[1,"title"],["tabindex","0",1,"box","animate__animated","animate__fadeIn"],["loading","lazy","loading","lazy","src","./../../../../../../assets/img/key-Security.png",1,"imgLoad",3,"alt"],["pButton","",2,"width","100%",3,"label","click"],[1,"pi",3,"ngClass"],["class","p-grid",4,"ngIf"],[1,"hr1"],[1,"forms"],[1,"labelPass"],["autocomplete","off","id","loginForm",3,"formGroup","ngSubmit"],[1,"viewPass"],["id","passwordOldInput","formControlName","passwordOld","aria-describedby","passwordOld passwordOld1","type","password","pInputText","",1,"passPass",3,"type","ngClass","placeholder"],["tabindex","0","aria-label","Ver contrase\xf1a",1,"pi",3,"ngClass","click","keyup.enter"],[4,"ngIf"],["id","passwordOld1","class","p-error",4,"ngIf"],["id","passwordNew","formControlName","passwordNew","aria-describedby","password passwordNewErr passwordNew","key","","type","password","pInputText","",1,"passPass",3,"ngClass","placeholder","keypress"],["id","passwordNewAgain","formControlName","passwordAgain","aria-describedby","passwordAgain passwordOldNo passwordNewErr2","type","password","pInputText","",1,"passPass",3,"ngClass","placeholder","keyup"],["id","passwordOldNo","class","p-error",4,"ngIf"],["id","passwordNewErr2","class","p-error",4,"ngIf"],[1,"butonC"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",3,"click"],["pButton","","pRipple","","type","submit","icon","pi pi-check",3,"label"],["id","passwordOld","class","p-error",4,"ngIf"],["id","passwordOld",1,"p-error"],["id","passwordOld1",1,"p-error"],["id","passwordNew ","class","p-error",4,"ngIf"],["id","password","class","p-error",4,"ngIf"],["id","passwordNewErr","class","p-error",4,"ngIf"],["id","passwordNew ",1,"p-error"],["id","password",1,"p-error"],[1,"p-pl-2","p-ml-2","p-mt-0",2,"line-height","1.5"],["id","passwordNewErr",1,"p-error"],["id","passwordAgain ","class","p-error",4,"ngIf"],["id","passwordAgain ",1,"p-error"],["id","passwordOldNo",1,"p-error"],["id","passwordNewErr2",1,"p-error"]],template:function(s,a){1&s&&(b.Jb(0,"p-toast"),b.Ob(1,"div",0),b.Ob(2,"div",1),b.Ob(3,"div",2),b.Ob(4,"h2",3),b.Gc(5),b.Zb(6,"translate"),b.Nb(),b.Nb(),b.Ob(7,"div",2),b.Ob(8,"div",4),b.Ob(9,"figure"),b.Jb(10,"img",5),b.Nb(),b.Nb(),b.Nb(),b.Ob(11,"div",2),b.Ob(12,"label",3),b.Ob(13,"h5"),b.Gc(14),b.Zb(15,"translate"),b.Nb(),b.Nb(),b.Nb(),b.Ob(16,"div",2),b.Ob(17,"button",6),b.Vb("click",function(){return a.show=!a.show}),b.Zb(18,"translate"),b.Ob(19,"i",7),b.Gc(20," \xa0"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Jb(21,"p-toast"),b.Ec(22,Z,45,42,"div",8),b.Jb(23,"div",9),b.Nb()),2&s&&(b.xb(5),b.Hc(b.ac(6,6,"security.titlePass")),b.xb(5),b.fc("alt","Imagen referente a cambio de contrase\xf1a"),b.xb(4),b.Hc(b.ac(15,8,"login.labelPassword")),b.xb(3),b.gc("label",b.ac(18,10,"security.changePass")),b.xb(2),b.fc("ngClass",b.kc(12,J,!a.show,a.show)),b.xb(3),b.fc("ngIf",a.show))},directives:[f.a,h.b,o.j,o.l,d.t,d.k,d.e,d.a,d.j,d.d,v.a,m.a],pipes:[O.c],styles:[".imgLoad[_ngcontent-%COMP%]{width:250px;height:150px}.title[_ngcontent-%COMP%]{text-align:justify}.card[_ngcontent-%COMP%]{box-shadow:1px 1px 5px rgba(0,0,0,.5);border-radius:10px}.pi[_ngcontent-%COMP%]{padding:0 20px}.p-col-6[_ngcontent-%COMP%]{overflow:hidden}.hr1[_ngcontent-%COMP%]{height:0;padding:0;margin:5px auto 0;box-shadow:0 0 2px 1px #b1b1b1}.two[_ngcontent-%COMP%]{text-align:end}.labelPass[_ngcontent-%COMP%]{padding:10px}.passPass[_ngcontent-%COMP%]{width:100%}.viewPass[_ngcontent-%COMP%]{position:relative}.viewPass[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:8px;right:10px;padding:5px;cursor:pointer}"]}),M),data:{breadcrumb:null}}],H=((L=function s(){a(this,s)}).\u0275mod=b.Gb({type:L}),L.\u0275inj=b.Fb({factory:function(s){return new(s||L)},imports:[[n.h.forChild(Y)],n.h]}),L),q=t("QGhL"),R=t("PCNd"),T=((j=function s(){a(this,s)}).\u0275mod=b.Gb({type:j}),j.\u0275inj=b.Fb({factory:function(s){return new(s||j)},imports:[[o.b,H,q.a,R.a,d.o]]}),j)}}])}();