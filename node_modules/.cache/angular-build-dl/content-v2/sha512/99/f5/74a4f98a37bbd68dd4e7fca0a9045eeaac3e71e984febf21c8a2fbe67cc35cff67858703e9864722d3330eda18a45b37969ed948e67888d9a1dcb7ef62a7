(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{QGhL:function(s,a,r){"use strict";r.d(a,"a",function(){return d});var o=r("ofXK"),e=r("PCNd"),t=r("3Pt+"),i=r("sYmb"),n=r("fXoL");let d=(()=>{class s{}return s.\u0275mod=n.Gb({type:s}),s.\u0275inj=n.Fb({factory:function(a){return new(a||s)},imports:[[o.b,e.a,t.o,i.b]]}),s})()},icYe:function(s,a,r){"use strict";r.r(a),r.d(a,"SecurityModule",function(){return L});var o=r("ofXK"),e=r("tyNb"),t=r("mrSG"),i=r("3Pt+"),n=r("PSD3"),d=r.n(n),c=r("fXoL"),l=r("EFyh"),b=r("7zfz"),p=r("Gxio"),w=r("jIHw"),u=r("7kUa"),g=r("Q4Mo"),h=r("sYmb");function f(s,a){1&s&&(c.Ob(0,"small",26),c.Gc(1),c.Zb(2,"translate"),c.Nb()),2&s&&(c.xb(1),c.Ic("*",c.ac(2,1,"validation.obligatoryCamp"),"*"))}function m(s,a){if(1&s&&(c.Ob(0,"div"),c.Ec(1,f,3,3,"small",25),c.Nb()),2&s){const s=c.Yb(2);c.xb(1),c.fc("ngIf",s.passwordOld.errors.required)}}function v(s,a){1&s&&(c.Ob(0,"small",27),c.Gc(1),c.Zb(2,"translate"),c.Nb()),2&s&&(c.xb(1),c.Ic("*",c.ac(2,1,"security.passError"),"*"))}function O(s,a){1&s&&(c.Ob(0,"small",31),c.Gc(1),c.Zb(2,"translate"),c.Nb()),2&s&&(c.xb(1),c.Ic("*",c.ac(2,1,"validation.obligatoryCamp"),"*"))}function N(s,a){1&s&&(c.Ob(0,"small",32),c.Gc(1),c.Zb(2,"translate"),c.Ob(3,"ul",33),c.Ob(4,"li"),c.Gc(5),c.Zb(6,"translate"),c.Nb(),c.Ob(7,"li"),c.Gc(8),c.Zb(9,"translate"),c.Nb(),c.Ob(10,"li"),c.Gc(11),c.Zb(12,"translate"),c.Nb(),c.Ob(13,"li"),c.Gc(14),c.Zb(15,"translate"),c.Nb(),c.Nb(),c.Nb()),2&s&&(c.xb(1),c.Ic("*",c.ac(2,5,"validation.passwordEnter"),"* "),c.xb(4),c.Hc(c.ac(6,7,"validation.passDigit")),c.xb(3),c.Hc(c.ac(9,9,"validation.passMinu")),c.xb(3),c.Hc(c.ac(12,11,"validation.passMayu")),c.xb(3),c.Hc(c.ac(15,13,"validation.passChar")))}function x(s,a){1&s&&(c.Ob(0,"small",34),c.Gc(1,"*La contrase\xf1a no puede ser la misma que la anterior*"),c.Nb())}function y(s,a){if(1&s&&(c.Ob(0,"div"),c.Ec(1,O,3,3,"small",28),c.Ec(2,N,16,15,"small",29),c.Ec(3,x,2,0,"small",30),c.Nb()),2&s){const s=c.Yb(2);c.xb(1),c.fc("ngIf",s.passwordNew.errors.required),c.xb(1),c.fc("ngIf",s.passwordNew.errors.pattern),c.xb(1),c.fc("ngIf",s.passsword_invalid)}}function P(s,a){1&s&&(c.Ob(0,"small",36),c.Gc(1),c.Zb(2,"translate"),c.Nb()),2&s&&(c.xb(1),c.Ic("*",c.ac(2,1,"validation.obligatoryCamp"),"*"))}function C(s,a){if(1&s&&(c.Ob(0,"div"),c.Ec(1,P,3,3,"small",35),c.Nb()),2&s){const s=c.Yb(2);c.xb(1),c.fc("ngIf",s.passwordAgain.errors.required)}}function I(s,a){1&s&&(c.Ob(0,"small",37),c.Gc(1),c.Zb(2,"translate"),c.Nb()),2&s&&(c.xb(1),c.Hc(c.ac(2,1,"security.confirmPassError")))}function E(s,a){1&s&&(c.Ob(0,"small",38),c.Gc(1,"*La contrase\xf1a no puede ser la misma que la anterior*"),c.Nb())}const F=function(s){return{"ng-dirty ng-invalid":s}},A=function(s,a){return{"pi-eye":s,"pi-eye-slash":a}};function _(s,a){if(1&s){const s=c.Pb();c.Ob(0,"div",1),c.Ob(1,"div",2),c.Ob(2,"div",10),c.Ob(3,"label",11),c.Gc(4),c.Zb(5,"translate"),c.Nb(),c.Nb(),c.Jb(6,"br"),c.Ob(7,"div",10),c.Ob(8,"label",11),c.Gc(9),c.Zb(10,"translate"),c.Nb(),c.Nb(),c.Jb(11,"br"),c.Ob(12,"div",10),c.Ob(13,"label",11),c.Gc(14),c.Zb(15,"translate"),c.Nb(),c.Nb(),c.Jb(16,"br"),c.Nb(),c.Ob(17,"div",2),c.Ob(18,"form",12),c.Vb("ngSubmit",function(){return c.uc(s),c.Yb().sendPasswordRest()}),c.Ob(19,"div",10),c.Ob(20,"div",13),c.Jb(21,"input",14),c.Zb(22,"translate"),c.Ob(23,"i",15),c.Vb("click",function(){c.uc(s);const a=c.Yb();return a.show2=!a.show2})("keyup.enter",function(){c.uc(s);const a=c.Yb();return a.show2=!a.show2}),c.Nb(),c.Nb(),c.Ec(24,m,2,1,"div",16),c.Ec(25,v,3,3,"small",17),c.Nb(),c.Jb(26,"br"),c.Ob(27,"div",10),c.Ob(28,"input",18),c.Vb("keypress",function(){return c.uc(s),c.Yb().enabled_Password()}),c.Zb(29,"translate"),c.Nb(),c.Ec(30,y,4,3,"div",16),c.Nb(),c.Jb(31,"br"),c.Ob(32,"div",10),c.Ob(33,"input",19),c.Vb("keyup",function(){return c.uc(s),c.Yb().validatorPassword()}),c.Zb(34,"translate"),c.Nb(),c.Ec(35,C,2,1,"div",16),c.Ec(36,I,3,3,"small",20),c.Ec(37,E,2,0,"small",21),c.Nb(),c.Jb(38,"br"),c.Ob(39,"div",10),c.Ob(40,"div",22),c.Ob(41,"button",23),c.Vb("click",function(){return c.uc(s),c.Yb().resetForm()}),c.Nb(),c.Gc(42," \xa0 "),c.Jb(43,"button",24),c.Zb(44,"translate"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&s){const s=c.Yb();c.xb(4),c.Hc(c.ac(5,19,"security.oldPass")),c.xb(5),c.Hc(c.ac(10,21,"security.newPass")),c.xb(5),c.Hc(c.ac(15,23,"security.againNewPass")),c.xb(4),c.fc("formGroup",s.angForm),c.xb(3),c.gc("placeholder",c.ac(22,25,"security.oldPass")),c.fc("type",s.show2?"text":"password")("ngClass",c.jc(33,F,s.passwordOld.invalid&&(s.passwordOld.dirty||s.passwordOld.touched)||s.passError)),c.xb(2),c.fc("ngClass",c.kc(35,A,!s.show2,s.show2)),c.xb(1),c.fc("ngIf",s.passwordOld.invalid&&(s.passwordOld.dirty||s.passwordOld.touched)),c.xb(1),c.fc("ngIf",s.passError),c.xb(3),c.gc("placeholder",c.ac(29,27,"security.newPass")),c.fc("ngClass",c.jc(38,F,s.passwordNew.invalid&&(s.passwordNew.dirty||s.passwordNew.touched)||s.passsword_invalid)),c.xb(2),c.fc("ngIf",s.passwordNew.invalid&&(s.passwordNew.dirty||s.passwordNew.touched)),c.xb(3),c.gc("placeholder",c.ac(34,29,"security.againNewPass")),c.fc("ngClass",c.jc(40,F,s.passwordAgain.invalid&&(s.passwordAgain.dirty||s.passwordAgain.touched)||s.passsword_invalid)),c.xb(2),c.fc("ngIf",s.passwordAgain.invalid&&(s.passwordAgain.dirty||s.passwordAgain.touched)),c.xb(1),c.fc("ngIf",!s.flagConfirm&&s.passwordAgain.dirty),c.xb(1),c.fc("ngIf",s.passsword_invalid),c.xb(6),c.gc("label",c.ac(44,31,"newObject.form.btnSubmit"))}}const k=function(s,a){return{"pi-chevron-right":s,"pi-chevron-down":a}},G=[{path:"",component:(()=>{class s{constructor(s,a,r){this.fb=s,this.loginService=a,this.messageService=r,this.show=!1,this.show2=!1,this.flagConfirm=!1,this.passError=!1,this.subscribes=[],this.passsword_invalid=!1,this.createForm()}ngOnDestroy(){this.subscribes.forEach(s=>{s.unsubscribe()})}ngOnInit(){}createForm(){this.angForm=this.fb.group({passwordOld:[this.oldPassword,[i.r.required]],passwordNew:[{value:this.newPassword,disabled:!1},[i.r.required,i.r.pattern("(?=\\D*\\d)(?=[^a-z]*[a-z])(?=[^A-Z]*[A-Z]).{8,30}")]],passwordAgain:[{value:this.againPassword,disabled:!0},[i.r.required]]})}sendPasswordRest(){return Object(t.a)(this,void 0,void 0,function*(){if(this.angForm.valid){if(this.validatorPassword())return void this.showError("La contrase\xf1as no coinciden");this.oldPassword=this.angForm.get("passwordOld").value,this.newPassword=this.angForm.get("passwordNew").value,this.againPassword=this.angForm.get("passwordAgain").value,this.passwords={password:this.newPassword,password2:this.againPassword,old_password:this.oldPassword};let s=yield this.loginService.changePassword(this.passwords,this.loginService.user.id).subscribe(s=>{"Ok"==s.status&&(this.showSuccess("Contrase\xf1a actualizada"),d.a.fire({allowOutsideClick:!1,icon:"info",text:"Actualizando su contrase\xf1a..."}),d.a.showLoading(),this.loginService.signOutPass(),d.a.close())},s=>{var a,r;"New password cannot be the same as above."==s.error.details.password[0]&&(this.passsword_invalid=!0,this.showError("La nueva contrase\xf1a no puede ser la misma que la anterior."),this.angForm.controls.passwordNew.markAllAsTouched(),this.angForm.controls.passwordAgain.markAllAsTouched()),"Old password is not correct"==s.error.details.old_password.old_password&&(this.showError("La contrase\xf1a anterior es incorrecta"),this.passError=!0),"Password fields didn't match."==s.error.details.password[0]&&(this.showError("La contrase\xf1a nueva no coincide"),this.passError=!0),"Old password is not correct"==(null===(r=null===(a=null==s?void 0:s.error)||void 0===a?void 0:a.details)||void 0===r?void 0:r.old_password.old_password)&&(this.showError("La contrase\xf1a actual es incorrecta"),this.passError=!0)});this.subscribes.push(s)}else this.markTouchForm()})}showError(s){this.messageService.add({severity:"error",summary:"Error",detail:s})}showSuccess(s){this.messageService.add({severity:"success",summary:"Success",detail:s})}validatorPassword(){return this.angForm.get("passwordNew").value===this.angForm.get("passwordAgain").value?(this.flagConfirm=!0,this.passsword_invalid=!1,!1):(this.flagConfirm=!1,!0)}resetForm(){this.angForm.reset(),this.show=!1}markTouchForm(){Object.values(this.angForm.controls).forEach(s=>{s.markAsTouched()})}get passwordOld(){return this.angForm.get("passwordOld")}get passwordNew(){return this.angForm.get("passwordNew")}get passwordAgain(){return this.angForm.get("passwordAgain")}enabled_Password(){"DISABLED"===this.angForm.get("passwordAgain").status&&null!=this.angForm.get("passwordNew").value&&""!=this.angForm.get("passwordNew").value?this.angForm.controls.passwordAgain.enable():null!==this.angForm.get("passwordNew").value&&void 0!==this.angForm.get("passwordNew").value&&""!==this.angForm.get("passwordNew").value||this.angForm.controls.passwordAgain.disable()}}return s.\u0275fac=function(a){return new(a||s)(c.Ib(i.b),c.Ib(l.a),c.Ib(b.h))},s.\u0275cmp=c.Cb({type:s,selectors:[["app-security"]],decls:24,vars:15,consts:[[1,"card"],[1,"p-grid"],[1,"p-col-6"],[1,"title"],["tabindex","0",1,"box","animate__animated","animate__fadeIn"],["loading","lazy","loading","lazy","src","./../../../../../../assets/img/key-Security.png",1,"imgLoad",3,"alt"],["pButton","",2,"width","100%",3,"label","click"],[1,"pi",3,"ngClass"],["class","p-grid",4,"ngIf"],[1,"hr1"],[1,"forms"],[1,"labelPass"],["autocomplete","off","id","loginForm",3,"formGroup","ngSubmit"],[1,"viewPass"],["id","passwordOldInput","formControlName","passwordOld","aria-describedby","passwordOld passwordOld1","type","password","pInputText","",1,"passPass",3,"type","ngClass","placeholder"],["tabindex","0","aria-label","Ver contrase\xf1a",1,"pi",3,"ngClass","click","keyup.enter"],[4,"ngIf"],["id","passwordOld1","class","p-error",4,"ngIf"],["id","passwordNew","formControlName","passwordNew","aria-describedby","password passwordNewErr passwordNew","key","","type","password","pInputText","",1,"passPass",3,"ngClass","placeholder","keypress"],["id","passwordNewAgain","formControlName","passwordAgain","aria-describedby","passwordAgain passwordOldNo passwordNewErr2","type","password","pInputText","",1,"passPass",3,"ngClass","placeholder","keyup"],["id","passwordOldNo","class","p-error",4,"ngIf"],["id","passwordNewErr2","class","p-error",4,"ngIf"],[1,"butonC"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",3,"click"],["pButton","","pRipple","","type","submit","icon","pi pi-check",3,"label"],["id","passwordOld","class","p-error",4,"ngIf"],["id","passwordOld",1,"p-error"],["id","passwordOld1",1,"p-error"],["id","passwordNew ","class","p-error",4,"ngIf"],["id","password","class","p-error",4,"ngIf"],["id","passwordNewErr","class","p-error",4,"ngIf"],["id","passwordNew ",1,"p-error"],["id","password",1,"p-error"],[1,"p-pl-2","p-ml-2","p-mt-0",2,"line-height","1.5"],["id","passwordNewErr",1,"p-error"],["id","passwordAgain ","class","p-error",4,"ngIf"],["id","passwordAgain ",1,"p-error"],["id","passwordOldNo",1,"p-error"],["id","passwordNewErr2",1,"p-error"]],template:function(s,a){1&s&&(c.Jb(0,"p-toast"),c.Ob(1,"div",0),c.Ob(2,"div",1),c.Ob(3,"div",2),c.Ob(4,"h2",3),c.Gc(5),c.Zb(6,"translate"),c.Nb(),c.Nb(),c.Ob(7,"div",2),c.Ob(8,"div",4),c.Ob(9,"figure"),c.Jb(10,"img",5),c.Nb(),c.Nb(),c.Nb(),c.Ob(11,"div",2),c.Ob(12,"label",3),c.Ob(13,"h5"),c.Gc(14),c.Zb(15,"translate"),c.Nb(),c.Nb(),c.Nb(),c.Ob(16,"div",2),c.Ob(17,"button",6),c.Vb("click",function(){return a.show=!a.show}),c.Zb(18,"translate"),c.Ob(19,"i",7),c.Gc(20," \xa0"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Jb(21,"p-toast"),c.Ec(22,_,45,42,"div",8),c.Jb(23,"div",9),c.Nb()),2&s&&(c.xb(5),c.Hc(c.ac(6,6,"security.titlePass")),c.xb(5),c.fc("alt","Imagen referente a cambio de contrase\xf1a"),c.xb(4),c.Hc(c.ac(15,8,"login.labelPassword")),c.xb(3),c.gc("label",c.ac(18,10,"security.changePass")),c.xb(2),c.fc("ngClass",c.kc(12,k,!a.show,a.show)),c.xb(3),c.fc("ngIf",a.show))},directives:[p.a,w.b,o.j,o.l,i.t,i.k,i.e,i.a,i.j,i.d,u.a,g.a],pipes:[h.c],styles:[".imgLoad[_ngcontent-%COMP%]{width:250px;height:150px}.title[_ngcontent-%COMP%]{text-align:justify}.card[_ngcontent-%COMP%]{box-shadow:1px 1px 5px rgba(0,0,0,.5);border-radius:10px}.pi[_ngcontent-%COMP%]{padding:0 20px}.p-col-6[_ngcontent-%COMP%]{overflow:hidden}.hr1[_ngcontent-%COMP%]{height:0;padding:0;margin:5px auto 0;box-shadow:0 0 2px 1px #b1b1b1}.two[_ngcontent-%COMP%]{text-align:end}.labelPass[_ngcontent-%COMP%]{padding:10px}.passPass[_ngcontent-%COMP%]{width:100%}.viewPass[_ngcontent-%COMP%]{position:relative}.viewPass[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:8px;right:10px;padding:5px;cursor:pointer}"]}),s})(),data:{breadcrumb:null}}];let Z=(()=>{class s{}return s.\u0275mod=c.Gb({type:s}),s.\u0275inj=c.Fb({factory:function(a){return new(a||s)},imports:[[e.h.forChild(G)],e.h]}),s})();var S=r("QGhL"),M=r("PCNd");let L=(()=>{class s{}return s.\u0275mod=c.Gb({type:s}),s.\u0275inj=c.Fb({factory:function(a){return new(a||s)},imports:[[o.b,Z,S.a,M.a,i.o]]}),s})()}}]);